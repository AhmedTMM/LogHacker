"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/aircraft/route";
exports.ids = ["app/api/aircraft/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faircraft%2Froute&page=%2Fapi%2Faircraft%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faircraft%2Froute.ts&appDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faircraft%2Froute&page=%2Fapi%2Faircraft%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faircraft%2Froute.ts&appDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_ahmed_Documents_GitHub_LogHacker_app_api_aircraft_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/aircraft/route.ts */ \"(rsc)/./app/api/aircraft/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/aircraft/route\",\n        pathname: \"/api/aircraft\",\n        filename: \"route\",\n        bundlePath: \"app/api/aircraft/route\"\n    },\n    resolvedPagePath: \"/Users/ahmed/Documents/GitHub/LogHacker/app/api/aircraft/route.ts\",\n    nextConfigOutput,\n    userland: _Users_ahmed_Documents_GitHub_LogHacker_app_api_aircraft_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/aircraft/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhaXJjcmFmdCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWlyY3JhZnQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhaXJjcmFmdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFobWVkJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGTG9nSGFja2VyJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmFobWVkJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGTG9nSGFja2VyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNpQjtBQUM5RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2F2aWF0aW9uLWludGVsbGlnZW5jZS1icmFpbi8/MGU5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvYWhtZWQvRG9jdW1lbnRzL0dpdEh1Yi9Mb2dIYWNrZXIvYXBwL2FwaS9haXJjcmFmdC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWlyY3JhZnQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9haXJjcmFmdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYWlyY3JhZnQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvYWhtZWQvRG9jdW1lbnRzL0dpdEh1Yi9Mb2dIYWNrZXIvYXBwL2FwaS9haXJjcmFmdC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYWlyY3JhZnQvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faircraft%2Froute&page=%2Fapi%2Faircraft%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faircraft%2Froute.ts&appDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/aircraft/route.ts":
/*!***********************************!*\
  !*** ./app/api/aircraft/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_models_Aircraft__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/models/Aircraft */ \"(rsc)/./lib/models/Aircraft.ts\");\n/* harmony import */ var _lib_services_firecrawlService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/services/firecrawlService */ \"(rsc)/./lib/services/firecrawlService.ts\");\n/* harmony import */ var _lib_services_reductoService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/services/reductoService */ \"(rsc)/./lib/services/reductoService.ts\");\n\n\n\n\n\nconst dynamic = \"force-dynamic\";\nasync function GET() {\n    try {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const aircraft = await _lib_models_Aircraft__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find().sort({\n            tailNumber: 1\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: aircraft\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const body = await request.json();\n        // Check if this is a \"magic add\" request (only tail number provided)\n        // or if the user wants to force a lookup\n        if (body.tailNumber && Object.keys(body).length === 1) {\n            console.log(`Starting automated add for ${body.tailNumber}`);\n            // 1. Fetch details from Registry & Firecrawl (includes Image & POH URL)\n            const details = await (0,_lib_services_firecrawlService__WEBPACK_IMPORTED_MODULE_3__.fetchAircraftDetails)(body.tailNumber);\n            if (!details.success || !details.data) {\n                throw new Error(details.error || \"Could not fetch aircraft details\");\n            }\n            let aircraftData = {\n                ...details.data,\n                tailNumber: body.tailNumber,\n                currentHours: {\n                    hobbs: 0,\n                    tach: 0\n                },\n                maintenanceDates: {\n                    annual: new Date(),\n                    transponder: new Date(),\n                    staticSystem: new Date()\n                }\n            };\n            // 2. If we found a POH URL, try to parse it with Reducto for real operating limits\n            if (aircraftData.pohUrl) {\n                console.log(`Parsing POH from ${aircraftData.pohUrl}...`);\n                try {\n                    const pohResult = await (0,_lib_services_reductoService__WEBPACK_IMPORTED_MODULE_4__.parsePOHFromUrl)(aircraftData.pohUrl);\n                    if (pohResult.success && pohResult.data?.extractedData) {\n                        const parsedLimits = pohResult.data.extractedData;\n                        // Merge/Overwrite with Reducto data if valid\n                        if (parsedLimits.vSpeeds || parsedLimits.weights) {\n                            console.log(\"Successfully parsed POH data via Reducto\");\n                            aircraftData.operatingLimits = {\n                                vSpeeds: parsedLimits.vSpeeds || aircraftData.operatingLimits?.vSpeeds,\n                                weights: parsedLimits.weights || aircraftData.operatingLimits?.weights\n                            };\n                        }\n                    }\n                } catch (pohError) {\n                    console.error(\"Failed to parse POH via Reducto, falling back to scraped data\", pohError);\n                // Continue with Scraped data\n                }\n            }\n            console.log(\"Final Aircraft Data to Save:\", JSON.stringify({\n                tail: aircraftData.tailNumber,\n                limits: aircraftData.operatingLimits\n            }, null, 2));\n            const aircraft = new _lib_models_Aircraft__WEBPACK_IMPORTED_MODULE_2__[\"default\"](aircraftData);\n            await aircraft.save();\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: aircraft\n            }, {\n                status: 201\n            });\n        } else {\n            // Normal manual add (fallback)\n            const aircraft = new _lib_models_Aircraft__WEBPACK_IMPORTED_MODULE_2__[\"default\"](body);\n            await aircraft.save();\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: aircraft\n            }, {\n                status: 201\n            });\n        }\n    } catch (error) {\n        console.error(\"Add aircraft error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 400\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const { searchParams } = new URL(request.url);\n        const id = searchParams.get(\"id\");\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Aircraft ID required\"\n            }, {\n                status: 400\n            });\n        }\n        await _lib_models_Aircraft__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByIdAndDelete(id);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (error) {\n        console.error(\"Delete aircraft error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXZpYXRpb24taW50ZWxsaWdlbmNlLWJyYWluLy4vYXBwL2FwaS9haXJjcmFmdC9yb3V0ZS50cz9iMTg2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgZGJDb25uZWN0IGZyb20gJ0AvbGliL2RiJztcbmltcG9ydCBBaXJjcmFmdCBmcm9tICdAL2xpYi9tb2RlbHMvQWlyY3JhZnQnO1xuaW1wb3J0IHsgZmV0Y2hBaXJjcmFmdERldGFpbHMgfSBmcm9tICdAL2xpYi9zZXJ2aWNlcy9maXJlY3Jhd2xTZXJ2aWNlJztcbmltcG9ydCB7IHBhcnNlUE9IRnJvbVVybCB9IGZyb20gJ0AvbGliL3NlcnZpY2VzL3JlZHVjdG9TZXJ2aWNlJztcblxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgZGJDb25uZWN0KCk7XG4gICAgY29uc3QgYWlyY3JhZnQgPSBhd2FpdCBBaXJjcmFmdC5maW5kKCkuc29ydCh7IHRhaWxOdW1iZXI6IDEgfSk7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogYWlyY3JhZnQgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGF3YWl0IGRiQ29ubmVjdCgpO1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBcIm1hZ2ljIGFkZFwiIHJlcXVlc3QgKG9ubHkgdGFpbCBudW1iZXIgcHJvdmlkZWQpXG4gICAgLy8gb3IgaWYgdGhlIHVzZXIgd2FudHMgdG8gZm9yY2UgYSBsb29rdXBcbiAgICBpZiAoYm9keS50YWlsTnVtYmVyICYmIE9iamVjdC5rZXlzKGJvZHkpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc29sZS5sb2coYFN0YXJ0aW5nIGF1dG9tYXRlZCBhZGQgZm9yICR7Ym9keS50YWlsTnVtYmVyfWApO1xuXG4gICAgICAvLyAxLiBGZXRjaCBkZXRhaWxzIGZyb20gUmVnaXN0cnkgJiBGaXJlY3Jhd2wgKGluY2x1ZGVzIEltYWdlICYgUE9IIFVSTClcbiAgICAgIGNvbnN0IGRldGFpbHMgPSBhd2FpdCBmZXRjaEFpcmNyYWZ0RGV0YWlscyhib2R5LnRhaWxOdW1iZXIpO1xuXG4gICAgICBpZiAoIWRldGFpbHMuc3VjY2VzcyB8fCAhZGV0YWlscy5kYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkZXRhaWxzLmVycm9yIHx8ICdDb3VsZCBub3QgZmV0Y2ggYWlyY3JhZnQgZGV0YWlscycpO1xuICAgICAgfVxuXG4gICAgICBsZXQgYWlyY3JhZnREYXRhID0ge1xuICAgICAgICAuLi5kZXRhaWxzLmRhdGEsXG4gICAgICAgIHRhaWxOdW1iZXI6IGJvZHkudGFpbE51bWJlcixcbiAgICAgICAgY3VycmVudEhvdXJzOiB7IGhvYmJzOiAwLCB0YWNoOiAwIH0sXG4gICAgICAgIG1haW50ZW5hbmNlRGF0ZXM6IHtcbiAgICAgICAgICBhbm51YWw6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdHJhbnNwb25kZXI6IG5ldyBEYXRlKCksXG4gICAgICAgICAgc3RhdGljU3lzdGVtOiBuZXcgRGF0ZSgpXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIDIuIElmIHdlIGZvdW5kIGEgUE9IIFVSTCwgdHJ5IHRvIHBhcnNlIGl0IHdpdGggUmVkdWN0byBmb3IgcmVhbCBvcGVyYXRpbmcgbGltaXRzXG4gICAgICBpZiAoYWlyY3JhZnREYXRhLnBvaFVybCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgUGFyc2luZyBQT0ggZnJvbSAke2FpcmNyYWZ0RGF0YS5wb2hVcmx9Li4uYCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcG9oUmVzdWx0ID0gYXdhaXQgcGFyc2VQT0hGcm9tVXJsKGFpcmNyYWZ0RGF0YS5wb2hVcmwpO1xuXG4gICAgICAgICAgaWYgKHBvaFJlc3VsdC5zdWNjZXNzICYmIHBvaFJlc3VsdC5kYXRhPy5leHRyYWN0ZWREYXRhKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRMaW1pdHMgPSBwb2hSZXN1bHQuZGF0YS5leHRyYWN0ZWREYXRhO1xuXG4gICAgICAgICAgICAvLyBNZXJnZS9PdmVyd3JpdGUgd2l0aCBSZWR1Y3RvIGRhdGEgaWYgdmFsaWRcbiAgICAgICAgICAgIGlmIChwYXJzZWRMaW1pdHMudlNwZWVkcyB8fCBwYXJzZWRMaW1pdHMud2VpZ2h0cykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IHBhcnNlZCBQT0ggZGF0YSB2aWEgUmVkdWN0bycpO1xuICAgICAgICAgICAgICBhaXJjcmFmdERhdGEub3BlcmF0aW5nTGltaXRzID0ge1xuICAgICAgICAgICAgICAgIHZTcGVlZHM6IHBhcnNlZExpbWl0cy52U3BlZWRzIHx8IGFpcmNyYWZ0RGF0YS5vcGVyYXRpbmdMaW1pdHM/LnZTcGVlZHMsXG4gICAgICAgICAgICAgICAgd2VpZ2h0czogcGFyc2VkTGltaXRzLndlaWdodHMgfHwgYWlyY3JhZnREYXRhLm9wZXJhdGluZ0xpbWl0cz8ud2VpZ2h0c1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAocG9oRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgUE9IIHZpYSBSZWR1Y3RvLCBmYWxsaW5nIGJhY2sgdG8gc2NyYXBlZCBkYXRhJywgcG9oRXJyb3IpO1xuICAgICAgICAgIC8vIENvbnRpbnVlIHdpdGggU2NyYXBlZCBkYXRhXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ0ZpbmFsIEFpcmNyYWZ0IERhdGEgdG8gU2F2ZTonLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHRhaWw6IGFpcmNyYWZ0RGF0YS50YWlsTnVtYmVyLFxuICAgICAgICBsaW1pdHM6IGFpcmNyYWZ0RGF0YS5vcGVyYXRpbmdMaW1pdHNcbiAgICAgIH0sIG51bGwsIDIpKTtcblxuICAgICAgY29uc3QgYWlyY3JhZnQgPSBuZXcgQWlyY3JhZnQoYWlyY3JhZnREYXRhKTtcbiAgICAgIGF3YWl0IGFpcmNyYWZ0LnNhdmUoKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGFpcmNyYWZ0IH0sIHsgc3RhdHVzOiAyMDEgfSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm9ybWFsIG1hbnVhbCBhZGQgKGZhbGxiYWNrKVxuICAgICAgY29uc3QgYWlyY3JhZnQgPSBuZXcgQWlyY3JhZnQoYm9keSk7XG4gICAgICBhd2FpdCBhaXJjcmFmdC5zYXZlKCk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBhaXJjcmFmdCB9LCB7IHN0YXR1czogMjAxIH0pO1xuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FkZCBhaXJjcmFmdCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgZGJDb25uZWN0KCk7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IGlkID0gc2VhcmNoUGFyYW1zLmdldCgnaWQnKTtcblxuICAgIGlmICghaWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBaXJjcmFmdCBJRCByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGF3YWl0IEFpcmNyYWZ0LmZpbmRCeUlkQW5kRGVsZXRlKGlkKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0RlbGV0ZSBhaXJjcmFmdCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImRiQ29ubmVjdCIsIkFpcmNyYWZ0IiwiZmV0Y2hBaXJjcmFmdERldGFpbHMiLCJwYXJzZVBPSEZyb21VcmwiLCJkeW5hbWljIiwiR0VUIiwiYWlyY3JhZnQiLCJmaW5kIiwic29ydCIsInRhaWxOdW1iZXIiLCJqc29uIiwic3VjY2VzcyIsImRhdGEiLCJlcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsImRldGFpbHMiLCJFcnJvciIsImFpcmNyYWZ0RGF0YSIsImN1cnJlbnRIb3VycyIsImhvYmJzIiwidGFjaCIsIm1haW50ZW5hbmNlRGF0ZXMiLCJhbm51YWwiLCJEYXRlIiwidHJhbnNwb25kZXIiLCJzdGF0aWNTeXN0ZW0iLCJwb2hVcmwiLCJwb2hSZXN1bHQiLCJleHRyYWN0ZWREYXRhIiwicGFyc2VkTGltaXRzIiwidlNwZWVkcyIsIndlaWdodHMiLCJvcGVyYXRpbmdMaW1pdHMiLCJwb2hFcnJvciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0YWlsIiwibGltaXRzIiwic2F2ZSIsIkRFTEVURSIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImlkIiwiZ2V0IiwiZmluZEJ5SWRBbmREZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/aircraft/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://localhost:27017/aviation-intelligence\";\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable\");\n}\nlet cached = global.mongoose || {\n    conn: null,\n    promise: null\n};\nif (!global.mongoose) {\n    global.mongoose = cached;\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false,\n            serverSelectionTimeoutMS: 5000,\n            connectTimeoutMS: 5000\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            console.log(\"MongoDB connected successfully\");\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        console.error(\"MongoDB connection error:\", e);\n        throw new Error(\"Failed to connect to MongoDB. Please ensure MongoDB is running.\");\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVyxJQUFJO0FBRS9DLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFXQSxJQUFJQyxTQUF3QkMsT0FBT04sUUFBUSxJQUFJO0lBQUVPLE1BQU07SUFBTUMsU0FBUztBQUFLO0FBRTNFLElBQUksQ0FBQ0YsT0FBT04sUUFBUSxFQUFFO0lBQ3BCTSxPQUFPTixRQUFRLEdBQUdLO0FBQ3BCO0FBRUEsZUFBZUk7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7WUFDaEJDLDBCQUEwQjtZQUMxQkMsa0JBQWtCO1FBQ3BCO1FBRUFSLE9BQU9HLE9BQU8sR0FBR1IsdURBQWdCLENBQUNDLGFBQWFTLE1BQU1LLElBQUksQ0FBQyxDQUFDZjtZQUN6RGdCLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9qQjtRQUNUO0lBQ0Y7SUFFQSxJQUFJO1FBQ0ZLLE9BQU9FLElBQUksR0FBRyxNQUFNRixPQUFPRyxPQUFPO0lBQ3BDLEVBQUUsT0FBT1UsR0FBRztRQUNWYixPQUFPRyxPQUFPLEdBQUc7UUFDakJRLFFBQVFHLEtBQUssQ0FBQyw2QkFBNkJEO1FBQzNDLE1BQU0sSUFBSWQsTUFBTTtJQUNsQjtJQUVBLE9BQU9DLE9BQU9FLElBQUk7QUFDcEI7QUFFQSxpRUFBZUUsU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2F2aWF0aW9uLWludGVsbGlnZW5jZS1icmFpbi8uL2xpYi9kYi50cz8xZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkgfHwgJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvYXZpYXRpb24taW50ZWxsaWdlbmNlJztcblxuaWYgKCFNT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlJyk7XG59XG5cbmludGVyZmFjZSBNb25nb29zZUNhY2hlIHtcbiAgY29ubjogdHlwZW9mIG1vbmdvb3NlIHwgbnVsbDtcbiAgcHJvbWlzZTogUHJvbWlzZTx0eXBlb2YgbW9uZ29vc2U+IHwgbnVsbDtcbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICB2YXIgbW9uZ29vc2U6IE1vbmdvb3NlQ2FjaGUgfCB1bmRlZmluZWQ7XG59XG5cbmxldCBjYWNoZWQ6IE1vbmdvb3NlQ2FjaGUgPSBnbG9iYWwubW9uZ29vc2UgfHwgeyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XG5cbmlmICghZ2xvYmFsLm1vbmdvb3NlKSB7XG4gIGdsb2JhbC5tb25nb29zZSA9IGNhY2hlZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZGJDb25uZWN0KCk6IFByb21pc2U8dHlwZW9mIG1vbmdvb3NlPiB7XG4gIGlmIChjYWNoZWQuY29ubikge1xuICAgIHJldHVybiBjYWNoZWQuY29ubjtcbiAgfVxuXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLFxuICAgICAgc2VydmVyU2VsZWN0aW9uVGltZW91dE1TOiA1MDAwLFxuICAgICAgY29ubmVjdFRpbWVvdXRNUzogNTAwMCxcbiAgICB9O1xuXG4gICAgY2FjaGVkLnByb21pc2UgPSBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJLCBvcHRzKS50aGVuKChtb25nb29zZSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ01vbmdvREIgY29ubmVjdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgcmV0dXJuIG1vbmdvb3NlO1xuICAgIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjYWNoZWQuY29ubiA9IGF3YWl0IGNhY2hlZC5wcm9taXNlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xuICAgIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIgY29ubmVjdGlvbiBlcnJvcjonLCBlKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjb25uZWN0IHRvIE1vbmdvREIuIFBsZWFzZSBlbnN1cmUgTW9uZ29EQiBpcyBydW5uaW5nLicpO1xuICB9XG5cbiAgcmV0dXJuIGNhY2hlZC5jb25uO1xufVxuXG5leHBvcnQgZGVmYXVsdCBkYkNvbm5lY3Q7XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiZGJDb25uZWN0Iiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwic2VydmVyU2VsZWN0aW9uVGltZW91dE1TIiwiY29ubmVjdFRpbWVvdXRNUyIsImNvbm5lY3QiLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsImUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/models/Aircraft.ts":
/*!********************************!*\
  !*** ./lib/models/Aircraft.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst LogEntrySchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    date: {\n        type: Date,\n        required: true\n    },\n    description: {\n        type: String,\n        required: true\n    },\n    hobbsTime: {\n        type: Number,\n        required: true\n    },\n    tachTime: {\n        type: Number,\n        required: true\n    },\n    mechanic: {\n        type: String\n    },\n    rawText: {\n        type: String\n    }\n});\nconst AircraftSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    tailNumber: {\n        type: String,\n        required: true,\n        unique: true,\n        uppercase: true,\n        trim: true\n    },\n    model: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    serial: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    manufacturer: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    year: {\n        type: Number,\n        required: true\n    },\n    imageUrl: {\n        type: String\n    },\n    pohUrl: {\n        type: String\n    },\n    operatingLimits: {\n        vSpeeds: {\n            vso: {\n                type: Number\n            },\n            vs1: {\n                type: Number\n            },\n            vr: {\n                type: Number\n            },\n            vx: {\n                type: Number\n            },\n            vy: {\n                type: Number\n            },\n            vfe: {\n                type: Number\n            },\n            va: {\n                type: Number\n            },\n            vno: {\n                type: Number\n            },\n            vne: {\n                type: Number\n            }\n        },\n        weights: {\n            maxGross: {\n                type: Number\n            },\n            empty: {\n                type: Number\n            },\n            usefulLoad: {\n                type: Number\n            },\n            fuelCapacity: {\n                type: Number\n            }\n        }\n    },\n    maintenanceDates: {\n        annual: {\n            type: Date,\n            required: true\n        },\n        transponder: {\n            type: Date,\n            required: true\n        },\n        staticSystem: {\n            type: Date,\n            required: true\n        },\n        hundredHour: {\n            type: Date\n        }\n    },\n    currentHours: {\n        hobbs: {\n            type: Number,\n            required: true,\n            default: 0\n        },\n        tach: {\n            type: Number,\n            required: true,\n            default: 0\n        }\n    },\n    safetyAnalysis: {\n        lastAnalyzed: {\n            type: Date\n        },\n        score: {\n            type: Number\n        },\n        findings: [\n            {\n                component: {\n                    type: String\n                },\n                status: {\n                    type: String,\n                    enum: [\n                        \"ok\",\n                        \"warning\",\n                        \"critical\"\n                    ]\n                },\n                message: {\n                    type: String\n                },\n                lastMentioned: {\n                    type: Date\n                }\n            }\n        ]\n    },\n    linkedDocuments: [\n        {\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n            ref: \"ParsedDocument\"\n        }\n    ],\n    logs: [\n        LogEntrySchema\n    ],\n    owner: {\n        name: {\n            type: String\n        },\n        email: {\n            type: String\n        }\n    }\n}, {\n    timestamps: true\n});\n// Prevent model recompilation in Next.js dev mode\n// FORCE RECOMPILE in dev to ensure schema updates (like operatingLimits) are picked up\nif ( true && (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Aircraft) {\n    delete (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Aircraft;\n}\nconst Aircraft = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Aircraft || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Aircraft\", AircraftSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Aircraft);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRO1lBQUVDLEtBQUs7UUFBaUI7S0FBRTtJQUN6RUMsTUFBTTtRQUFDN0Q7S0FBZTtJQUN0QjhELE9BQU87UUFDTEMsTUFBTTtZQUFFN0QsTUFBTUk7UUFBTztRQUNyQjBELE9BQU87WUFBRTlELE1BQU1JO1FBQU87SUFDeEI7QUFDRixHQUNBO0lBQ0UyRCxZQUFZO0FBQ2Q7QUFHRixrREFBa0Q7QUFDbEQsdUZBQXVGO0FBQ3ZGLElBQUlDLEtBQXlCLElBQWlCcEUsd0RBQWUsQ0FBQ3NFLFFBQVEsRUFBRTtJQUN0RSxPQUFPdEUsd0RBQWUsQ0FBQ3NFLFFBQVE7QUFDakM7QUFDQSxNQUFNQSxXQUE2QnRFLHdEQUFlLENBQUNzRSxRQUFRLElBQUl0RSxxREFBYyxDQUFZLFlBQVljO0FBRXJHLGlFQUFld0QsUUFBUUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2F2aWF0aW9uLWludGVsbGlnZW5jZS1icmFpbi8uL2xpYi9tb2RlbHMvQWlyY3JhZnQudHM/YTE1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UsIHsgU2NoZW1hLCBNb2RlbCB9IGZyb20gJ21vbmdvb3NlJztcblxuZXhwb3J0IGludGVyZmFjZSBJTG9nRW50cnkge1xuICBkYXRlOiBEYXRlO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBob2Jic1RpbWU6IG51bWJlcjtcbiAgdGFjaFRpbWU6IG51bWJlcjtcbiAgbWVjaGFuaWM/OiBzdHJpbmc7XG4gIHJhd1RleHQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUFpcmNyYWZ0IHtcbiAgX2lkOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZDtcbiAgdGFpbE51bWJlcjogc3RyaW5nO1xuICBtb2RlbDogc3RyaW5nO1xuICBzZXJpYWw6IHN0cmluZztcbiAgbWFudWZhY3R1cmVyOiBzdHJpbmc7XG4gIHllYXI6IG51bWJlcjtcbiAgaW1hZ2VVcmw/OiBzdHJpbmc7XG4gIHBvaFVybD86IHN0cmluZztcbiAgb3BlcmF0aW5nTGltaXRzPzoge1xuICAgIHZTcGVlZHM6IHtcbiAgICAgIHZzbzogbnVtYmVyO1xuICAgICAgdnMxOiBudW1iZXI7XG4gICAgICB2cjogbnVtYmVyO1xuICAgICAgdng6IG51bWJlcjtcbiAgICAgIHZ5OiBudW1iZXI7XG4gICAgICB2ZmU6IG51bWJlcjtcbiAgICAgIHZhOiBudW1iZXI7XG4gICAgICB2bm86IG51bWJlcjtcbiAgICAgIHZuZTogbnVtYmVyO1xuICAgIH07XG4gICAgd2VpZ2h0czoge1xuICAgICAgbWF4R3Jvc3M6IG51bWJlcjtcbiAgICAgIGVtcHR5OiBudW1iZXI7XG4gICAgICB1c2VmdWxMb2FkOiBudW1iZXI7XG4gICAgICBmdWVsQ2FwYWNpdHk6IG51bWJlcjtcbiAgICB9O1xuICB9O1xuICBtYWludGVuYW5jZURhdGVzOiB7XG4gICAgYW5udWFsOiBEYXRlO1xuICAgIHRyYW5zcG9uZGVyOiBEYXRlO1xuICAgIHN0YXRpY1N5c3RlbTogRGF0ZTtcbiAgICBodW5kcmVkSG91cj86IERhdGU7XG4gIH07XG4gIGN1cnJlbnRIb3Vyczoge1xuICAgIGhvYmJzOiBudW1iZXI7XG4gICAgdGFjaDogbnVtYmVyO1xuICB9O1xuICBzYWZldHlBbmFseXNpcz86IHtcbiAgICBsYXN0QW5hbHl6ZWQ6IERhdGU7XG4gICAgc2NvcmU6IG51bWJlcjtcbiAgICBmaW5kaW5nczoge1xuICAgICAgY29tcG9uZW50OiBzdHJpbmc7XG4gICAgICBzdGF0dXM6ICdvaycgfCAnd2FybmluZycgfCAnY3JpdGljYWwnO1xuICAgICAgbWVzc2FnZTogc3RyaW5nO1xuICAgICAgbGFzdE1lbnRpb25lZD86IERhdGU7XG4gICAgfVtdO1xuICB9O1xuICBsaW5rZWREb2N1bWVudHM/OiBtb25nb29zZS5UeXBlcy5PYmplY3RJZFtdO1xuICBsb2dzOiBJTG9nRW50cnlbXTtcbiAgb3duZXI/OiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gIH07XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xufVxuXG5jb25zdCBMb2dFbnRyeVNjaGVtYSA9IG5ldyBTY2hlbWE8SUxvZ0VudHJ5Pih7XG4gIGRhdGU6IHsgdHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgZGVzY3JpcHRpb246IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBob2Jic1RpbWU6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxuICB0YWNoVGltZTogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIG1lY2hhbmljOiB7IHR5cGU6IFN0cmluZyB9LFxuICByYXdUZXh0OiB7IHR5cGU6IFN0cmluZyB9LFxufSk7XG5cbmNvbnN0IEFpcmNyYWZ0U2NoZW1hID0gbmV3IFNjaGVtYTxJQWlyY3JhZnQ+KFxuICB7XG4gICAgdGFpbE51bWJlcjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB1bmlxdWU6IHRydWUsXG4gICAgICB1cHBlcmNhc2U6IHRydWUsXG4gICAgICB0cmltOiB0cnVlLFxuICAgIH0sXG4gICAgbW9kZWw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICB9LFxuICAgIHNlcmlhbDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB0cmltOiB0cnVlLFxuICAgIH0sXG4gICAgbWFudWZhY3R1cmVyOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIHRyaW06IHRydWUsXG4gICAgfSxcbiAgICB5ZWFyOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIGltYWdlVXJsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgfSxcbiAgICBwb2hVcmw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICB9LFxuICAgIG9wZXJhdGluZ0xpbWl0czoge1xuICAgICAgdlNwZWVkczoge1xuICAgICAgICB2c286IHsgdHlwZTogTnVtYmVyIH0sXG4gICAgICAgIHZzMTogeyB0eXBlOiBOdW1iZXIgfSxcbiAgICAgICAgdnI6IHsgdHlwZTogTnVtYmVyIH0sXG4gICAgICAgIHZ4OiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgICB2eTogeyB0eXBlOiBOdW1iZXIgfSxcbiAgICAgICAgdmZlOiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgICB2YTogeyB0eXBlOiBOdW1iZXIgfSxcbiAgICAgICAgdm5vOiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgICB2bmU6IHsgdHlwZTogTnVtYmVyIH0sXG4gICAgICB9LFxuICAgICAgd2VpZ2h0czoge1xuICAgICAgICBtYXhHcm9zczogeyB0eXBlOiBOdW1iZXIgfSxcbiAgICAgICAgZW1wdHk6IHsgdHlwZTogTnVtYmVyIH0sXG4gICAgICAgIHVzZWZ1bExvYWQ6IHsgdHlwZTogTnVtYmVyIH0sXG4gICAgICAgIGZ1ZWxDYXBhY2l0eTogeyB0eXBlOiBOdW1iZXIgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBtYWludGVuYW5jZURhdGVzOiB7XG4gICAgICBhbm51YWw6IHsgdHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIHRyYW5zcG9uZGVyOiB7IHR5cGU6IERhdGUsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICBzdGF0aWNTeXN0ZW06IHsgdHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIGh1bmRyZWRIb3VyOiB7IHR5cGU6IERhdGUgfSxcbiAgICB9LFxuICAgIGN1cnJlbnRIb3Vyczoge1xuICAgICAgaG9iYnM6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogMCB9LFxuICAgICAgdGFjaDogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiAwIH0sXG4gICAgfSxcbiAgICBzYWZldHlBbmFseXNpczoge1xuICAgICAgbGFzdEFuYWx5emVkOiB7IHR5cGU6IERhdGUgfSxcbiAgICAgIHNjb3JlOiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgZmluZGluZ3M6IFt7XG4gICAgICAgIGNvbXBvbmVudDogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICAgICAgc3RhdHVzOiB7IHR5cGU6IFN0cmluZywgZW51bTogWydvaycsICd3YXJuaW5nJywgJ2NyaXRpY2FsJ10gfSxcbiAgICAgICAgbWVzc2FnZTogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICAgICAgbGFzdE1lbnRpb25lZDogeyB0eXBlOiBEYXRlIH1cbiAgICAgIH1dXG4gICAgfSxcbiAgICBsaW5rZWREb2N1bWVudHM6IFt7IHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnUGFyc2VkRG9jdW1lbnQnIH1dLFxuICAgIGxvZ3M6IFtMb2dFbnRyeVNjaGVtYV0sXG4gICAgb3duZXI6IHtcbiAgICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nIH0sXG4gICAgICBlbWFpbDogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGltZXN0YW1wczogdHJ1ZSxcbiAgfVxuKTtcblxuLy8gUHJldmVudCBtb2RlbCByZWNvbXBpbGF0aW9uIGluIE5leHQuanMgZGV2IG1vZGVcbi8vIEZPUkNFIFJFQ09NUElMRSBpbiBkZXYgdG8gZW5zdXJlIHNjaGVtYSB1cGRhdGVzIChsaWtlIG9wZXJhdGluZ0xpbWl0cykgYXJlIHBpY2tlZCB1cFxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIG1vbmdvb3NlLm1vZGVscy5BaXJjcmFmdCkge1xuICBkZWxldGUgbW9uZ29vc2UubW9kZWxzLkFpcmNyYWZ0O1xufVxuY29uc3QgQWlyY3JhZnQ6IE1vZGVsPElBaXJjcmFmdD4gPSBtb25nb29zZS5tb2RlbHMuQWlyY3JhZnQgfHwgbW9uZ29vc2UubW9kZWw8SUFpcmNyYWZ0PignQWlyY3JhZnQnLCBBaXJjcmFmdFNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFpcmNyYWZ0O1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiTG9nRW50cnlTY2hlbWEiLCJkYXRlIiwidHlwZSIsIkRhdGUiLCJyZXF1aXJlZCIsImRlc2NyaXB0aW9uIiwiU3RyaW5nIiwiaG9iYnNUaW1lIiwiTnVtYmVyIiwidGFjaFRpbWUiLCJtZWNoYW5pYyIsInJhd1RleHQiLCJBaXJjcmFmdFNjaGVtYSIsInRhaWxOdW1iZXIiLCJ1bmlxdWUiLCJ1cHBlcmNhc2UiLCJ0cmltIiwibW9kZWwiLCJzZXJpYWwiLCJtYW51ZmFjdHVyZXIiLCJ5ZWFyIiwiaW1hZ2VVcmwiLCJwb2hVcmwiLCJvcGVyYXRpbmdMaW1pdHMiLCJ2U3BlZWRzIiwidnNvIiwidnMxIiwidnIiLCJ2eCIsInZ5IiwidmZlIiwidmEiLCJ2bm8iLCJ2bmUiLCJ3ZWlnaHRzIiwibWF4R3Jvc3MiLCJlbXB0eSIsInVzZWZ1bExvYWQiLCJmdWVsQ2FwYWNpdHkiLCJtYWludGVuYW5jZURhdGVzIiwiYW5udWFsIiwidHJhbnNwb25kZXIiLCJzdGF0aWNTeXN0ZW0iLCJodW5kcmVkSG91ciIsImN1cnJlbnRIb3VycyIsImhvYmJzIiwiZGVmYXVsdCIsInRhY2giLCJzYWZldHlBbmFseXNpcyIsImxhc3RBbmFseXplZCIsInNjb3JlIiwiZmluZGluZ3MiLCJjb21wb25lbnQiLCJzdGF0dXMiLCJlbnVtIiwibWVzc2FnZSIsImxhc3RNZW50aW9uZWQiLCJsaW5rZWREb2N1bWVudHMiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwibG9ncyIsIm93bmVyIiwibmFtZSIsImVtYWlsIiwidGltZXN0YW1wcyIsInByb2Nlc3MiLCJtb2RlbHMiLCJBaXJjcmFmdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/models/Aircraft.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/firecrawlService.ts":
/*!******************************************!*\
  !*** ./lib/services/firecrawlService.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchAircraftDetails: () => (/* binding */ fetchAircraftDetails),\n/* harmony export */   fetchAircraftImage: () => (/* binding */ fetchAircraftImage),\n/* harmony export */   scrapeUrl: () => (/* binding */ scrapeUrl),\n/* harmony export */   searchAirworthinessDirectives: () => (/* binding */ searchAirworthinessDirectives),\n/* harmony export */   searchNTSBReports: () => (/* binding */ searchNTSBReports),\n/* harmony export */   searchPilotAccidents: () => (/* binding */ searchPilotAccidents)\n/* harmony export */ });\n// Firecrawl Web Intelligence Service\nconst FIRECRAWL_API_URL = \"https://api.firecrawl.dev/v1\";\nconst AD_EXTRACTION_PROMPT = `\nExtract all Airworthiness Directives from this page. For each AD, extract:\n- AD number\n- Title or subject\n- Effective date\n- Applicability (which aircraft models/serials affected)\n- Brief description of required action\n- Link to full AD document if available\n\nReturn as a structured list of airworthiness_directives.\n`;\nconst NTSB_EXTRACTION_PROMPT = `\nExtract all NTSB accident/incident reports from this page. For each report, extract:\n- Report ID (e.g., WPR21LA001)\n- Event Date\n- Location\n- Aircraft (Make/Model)\n- Severity (Fatal, Non-fatal, Incident)\n- Investigation Status\n- Brief Description\n\nReturn as a structured list of reports.\n`;\nconst AIRCRAFT_IMAGE_EXTRACTION_PROMPT = `\nFind the main aircraft photo on this page. Extract:\n- The direct URL to the highest quality image of the aircraft\n- Prefer photos that show the full aircraft from the side\n\nReturn as: { \"image_url\": \"...\" }\n`;\nconst PILOT_ACCIDENT_EXTRACTION_PROMPT = `\nExtract NTSB accident reports associated with this pilot name.\nFor each report, extract:\n- Event Date\n- Location\n- Aircraft Make/Model\n- Injury Severity\n- Brief Description\n\nReturn as a list of reports.\n`;\nasync function scrapeUrl(url, extractionPrompt) {\n    const apiKey = process.env.FIRECRAWL_API_KEY;\n    if (!apiKey) {\n        return {\n            success: false,\n            error: \"Firecrawl API key not configured\"\n        };\n    }\n    try {\n        const response = await fetch(`${FIRECRAWL_API_URL}/scrape`, {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${apiKey}`,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                url,\n                formats: [\n                    \"markdown\",\n                    \"extract\"\n                ],\n                extract: extractionPrompt ? {\n                    prompt: extractionPrompt\n                } : undefined\n            })\n        });\n        if (!response.ok) {\n            return {\n                success: false,\n                error: `Firecrawl API error: ${response.status}`\n            };\n        }\n        const result = await response.json();\n        return {\n            success: true,\n            data: result.data\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\n// Search for Airworthiness Directives\nasync function searchAirworthinessDirectives(manufacturer, model) {\n    if (!process.env.FIRECRAWL_API_KEY) {\n        return {\n            success: true,\n            directives: []\n        };\n    }\n    try {\n        const adSearchUrl = `https://www.faa.gov/regulations_policies/airworthiness_directives/search?aircraft_model=${encodeURIComponent(model)}&manufacturer=${encodeURIComponent(manufacturer)}`;\n        const result = await scrapeUrl(adSearchUrl, AD_EXTRACTION_PROMPT);\n        if (!result.success) {\n            return {\n                success: false,\n                directives: [],\n                error: result.error\n            };\n        }\n        const directives = [];\n        if (result.data?.extract?.airworthiness_directives) {\n            for (const ad of result.data.extract.airworthiness_directives){\n                directives.push({\n                    adNumber: ad.ad_number || ad.number || \"\",\n                    title: ad.title || ad.subject || \"\",\n                    effectiveDate: ad.effective_date || ad.date || \"\",\n                    applicability: ad.applicability || ad.applies_to || \"\",\n                    description: ad.description || ad.summary || \"\",\n                    url: ad.url || \"\"\n                });\n            }\n        }\n        return {\n            success: true,\n            directives\n        };\n    } catch (error) {\n        return {\n            success: false,\n            directives: [],\n            error: error.message\n        };\n    }\n}\n// Search for NTSB reports for a specific aircraft model\nasync function searchNTSBReports(manufacturer, model) {\n    try {\n        const query = `site:ntsb.gov ${manufacturer} ${model} accident report`;\n        const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`;\n        const result = await scrapeUrl(searchUrl, NTSB_EXTRACTION_PROMPT);\n        if (result.success && result.data?.extract?.reports) {\n            return {\n                success: true,\n                reports: result.data.extract.reports\n            };\n        }\n        return {\n            success: true,\n            reports: []\n        };\n    } catch (error) {\n        return {\n            success: false,\n            reports: [],\n            error: error.message\n        };\n    }\n}\n// Search for aircraft image by tail number\nasync function fetchAircraftImage(tailNumber) {\n    if (!process.env.FIRECRAWL_API_KEY) {\n        return {\n            success: false,\n            error: \"Firecrawl API key not configured\"\n        };\n    }\n    try {\n        const cleanTail = tailNumber.toUpperCase().replace(/[^A-Z0-9]/g, \"\");\n        const planespottersUrl = `https://www.planespotters.net/search?q=${cleanTail}`;\n        const result = await scrapeUrl(planespottersUrl, AIRCRAFT_IMAGE_EXTRACTION_PROMPT);\n        if (result.success && result.data?.extract?.image_url) {\n            return {\n                success: true,\n                imageUrl: result.data.extract.image_url\n            };\n        }\n        // Fallback: try JetPhotos\n        const jetphotosUrl = `https://www.jetphotos.com/registration/${cleanTail}`;\n        const jetResult = await scrapeUrl(jetphotosUrl, AIRCRAFT_IMAGE_EXTRACTION_PROMPT);\n        if (jetResult.success && jetResult.data?.extract?.image_url) {\n            return {\n                success: true,\n                imageUrl: jetResult.data.extract.image_url\n            };\n        }\n        return {\n            success: true,\n            imageUrl: undefined\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\n// Fetch aircraft details from FAA Registry\nasync function fetchAircraftDetails(tailNumber) {\n    if (!process.env.FIRECRAWL_API_KEY) {\n        return {\n            success: false,\n            error: \"Firecrawl API key not configured\"\n        };\n    }\n    try {\n        const cleanTail = tailNumber.toUpperCase().replace(/[^A-Z0-9]/g, \"\");\n        if (cleanTail.startsWith(\"N\")) {\n            const url = `https://registry.faa.gov/aircraftinquiry/Search/NNumberResult?nNumberTxt=${cleanTail}`;\n            const prompt = `Extract: Manufacturer Name, Model Name, Serial Number, Mfr Year. Return as JSON: { manufacturer, model, serial, year }`;\n            const result = await scrapeUrl(url, prompt);\n            if (result.success && result.data?.extract) {\n                const data = result.data.extract;\n                const pohAndLimits = getPOHAndLimits(data.model || \"\");\n                const imageResult = await fetchAircraftImage(tailNumber);\n                return {\n                    success: true,\n                    data: {\n                        manufacturer: data.manufacturer || \"\",\n                        model: data.model || \"\",\n                        serial: data.serial || \"\",\n                        year: parseInt(data.year) || new Date().getFullYear(),\n                        imageUrl: imageResult.imageUrl,\n                        ...pohAndLimits\n                    }\n                };\n            }\n        }\n        return {\n            success: false,\n            error: \"Could not fetch aircraft details\"\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\n// Get POH and Operating Limits for common aircraft\nfunction getPOHAndLimits(model) {\n    // Parsing logic for specific models could go here, but avoiding \"filler\" data\n    // Only return if we have a verified source (future implementation)\n    return {};\n}\n// Search for accidents associated with a pilot name\nasync function searchPilotAccidents(name) {\n    try {\n        const query = `site:ntsb.gov accident report pilot \"${name}\"`;\n        const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`;\n        const result = await scrapeUrl(searchUrl, PILOT_ACCIDENT_EXTRACTION_PROMPT);\n        if (result.success && result.data?.extract?.reports) {\n            return {\n                success: true,\n                reports: result.data.extract.reports\n            };\n        }\n        return {\n            success: true,\n            reports: []\n        };\n    } catch (error) {\n        return {\n            success: false,\n            reports: [],\n            error: error.message\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2VydmljZXMvZmlyZWNyYXdsU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxxQ0FBcUM7QUFpQnJDLE1BQU1BLG9CQUFvQjtBQUUxQixNQUFNQyx1QkFBdUIsQ0FBQzs7Ozs7Ozs7OztBQVU5QixDQUFDO0FBRUQsTUFBTUMseUJBQXlCLENBQUM7Ozs7Ozs7Ozs7O0FBV2hDLENBQUM7QUFFRCxNQUFNQyxtQ0FBbUMsQ0FBQzs7Ozs7O0FBTTFDLENBQUM7QUFFRCxNQUFNQyxtQ0FBbUMsQ0FBQzs7Ozs7Ozs7OztBQVUxQyxDQUFDO0FBRU0sZUFBZUMsVUFBVUMsR0FBVyxFQUFFQyxnQkFBeUI7SUFDcEUsTUFBTUMsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxpQkFBaUI7SUFFNUMsSUFBSSxDQUFDSCxRQUFRO1FBQ1gsT0FBTztZQUFFSSxTQUFTO1lBQU9DLE9BQU87UUFBbUM7SUFDckU7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsV0FBVyxNQUFNQyxNQUFNLENBQUMsRUFBRWYsa0JBQWtCLE9BQU8sQ0FBQyxFQUFFO1lBQzFEZ0IsUUFBUTtZQUNSQyxTQUFTO2dCQUNQLGlCQUFpQixDQUFDLE9BQU8sRUFBRVQsT0FBTyxDQUFDO2dCQUNuQyxnQkFBZ0I7WUFDbEI7WUFDQVUsTUFBTUMsS0FBS0MsU0FBUyxDQUFDO2dCQUNuQmQ7Z0JBQ0FlLFNBQVM7b0JBQUM7b0JBQVk7aUJBQVU7Z0JBQ2hDQyxTQUFTZixtQkFBbUI7b0JBQUVnQixRQUFRaEI7Z0JBQWlCLElBQUlpQjtZQUM3RDtRQUNGO1FBRUEsSUFBSSxDQUFDVixTQUFTVyxFQUFFLEVBQUU7WUFDaEIsT0FBTztnQkFBRWIsU0FBUztnQkFBT0MsT0FBTyxDQUFDLHFCQUFxQixFQUFFQyxTQUFTWSxNQUFNLENBQUMsQ0FBQztZQUFDO1FBQzVFO1FBRUEsTUFBTUMsU0FBUyxNQUFNYixTQUFTYyxJQUFJO1FBQ2xDLE9BQU87WUFBRWhCLFNBQVM7WUFBTWlCLE1BQU1GLE9BQU9F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QU0yQyxTQUFTNUIsT0FBT0UsSUFBSSxDQUFDUCxPQUFPLENBQUNpQyxPQUFPO1lBQUM7UUFDL0Q7UUFFQSxPQUFPO1lBQUUzQyxTQUFTO1lBQU0yQyxTQUFTLEVBQUU7UUFBQztJQUN0QyxFQUFFLE9BQU8xQyxPQUFPO1FBQ2QsT0FBTztZQUFFRCxTQUFTO1lBQU8yQyxTQUFTLEVBQUU7WUFBRTFDLE9BQU8sTUFBaUJpQixPQUFPO1FBQUM7SUFDeEU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2F2aWF0aW9uLWludGVsbGlnZW5jZS1icmFpbi8uL2xpYi9zZXJ2aWNlcy9maXJlY3Jhd2xTZXJ2aWNlLnRzPzg4YjkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRmlyZWNyYXdsIFdlYiBJbnRlbGxpZ2VuY2UgU2VydmljZVxuXG5pbnRlcmZhY2UgRmlyZWNyYXdsUmVzcG9uc2Uge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBkYXRhPzogYW55O1xuICBlcnJvcj86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIEFpcndvcnRoaW5lc3NEaXJlY3RpdmUge1xuICBhZE51bWJlcjogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBlZmZlY3RpdmVEYXRlOiBzdHJpbmc7XG4gIGFwcGxpY2FiaWxpdHk6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgdXJsOiBzdHJpbmc7XG59XG5cbmNvbnN0IEZJUkVDUkFXTF9BUElfVVJMID0gJ2h0dHBzOi8vYXBpLmZpcmVjcmF3bC5kZXYvdjEnO1xuXG5jb25zdCBBRF9FWFRSQUNUSU9OX1BST01QVCA9IGBcbkV4dHJhY3QgYWxsIEFpcndvcnRoaW5lc3MgRGlyZWN0aXZlcyBmcm9tIHRoaXMgcGFnZS4gRm9yIGVhY2ggQUQsIGV4dHJhY3Q6XG4tIEFEIG51bWJlclxuLSBUaXRsZSBvciBzdWJqZWN0XG4tIEVmZmVjdGl2ZSBkYXRlXG4tIEFwcGxpY2FiaWxpdHkgKHdoaWNoIGFpcmNyYWZ0IG1vZGVscy9zZXJpYWxzIGFmZmVjdGVkKVxuLSBCcmllZiBkZXNjcmlwdGlvbiBvZiByZXF1aXJlZCBhY3Rpb25cbi0gTGluayB0byBmdWxsIEFEIGRvY3VtZW50IGlmIGF2YWlsYWJsZVxuXG5SZXR1cm4gYXMgYSBzdHJ1Y3R1cmVkIGxpc3Qgb2YgYWlyd29ydGhpbmVzc19kaXJlY3RpdmVzLlxuYDtcblxuY29uc3QgTlRTQl9FWFRSQUNUSU9OX1BST01QVCA9IGBcbkV4dHJhY3QgYWxsIE5UU0IgYWNjaWRlbnQvaW5jaWRlbnQgcmVwb3J0cyBmcm9tIHRoaXMgcGFnZS4gRm9yIGVhY2ggcmVwb3J0LCBleHRyYWN0OlxuLSBSZXBvcnQgSUQgKGUuZy4sIFdQUjIxTEEwMDEpXG4tIEV2ZW50IERhdGVcbi0gTG9jYXRpb25cbi0gQWlyY3JhZnQgKE1ha2UvTW9kZWwpXG4tIFNldmVyaXR5IChGYXRhbCwgTm9uLWZhdGFsLCBJbmNpZGVudClcbi0gSW52ZXN0aWdhdGlvbiBTdGF0dXNcbi0gQnJpZWYgRGVzY3JpcHRpb25cblxuUmV0dXJuIGFzIGEgc3RydWN0dXJlZCBsaXN0IG9mIHJlcG9ydHMuXG5gO1xuXG5jb25zdCBBSVJDUkFGVF9JTUFHRV9FWFRSQUNUSU9OX1BST01QVCA9IGBcbkZpbmQgdGhlIG1haW4gYWlyY3JhZnQgcGhvdG8gb24gdGhpcyBwYWdlLiBFeHRyYWN0OlxuLSBUaGUgZGlyZWN0IFVSTCB0byB0aGUgaGlnaGVzdCBxdWFsaXR5IGltYWdlIG9mIHRoZSBhaXJjcmFmdFxuLSBQcmVmZXIgcGhvdG9zIHRoYXQgc2hvdyB0aGUgZnVsbCBhaXJjcmFmdCBmcm9tIHRoZSBzaWRlXG5cblJldHVybiBhczogeyBcImltYWdlX3VybFwiOiBcIi4uLlwiIH1cbmA7XG5cbmNvbnN0IFBJTE9UX0FDQ0lERU5UX0VYVFJBQ1RJT05fUFJPTVBUID0gYFxuRXh0cmFjdCBOVFNCIGFjY2lkZW50IHJlcG9ydHMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcGlsb3QgbmFtZS5cbkZvciBlYWNoIHJlcG9ydCwgZXh0cmFjdDpcbi0gRXZlbnQgRGF0ZVxuLSBMb2NhdGlvblxuLSBBaXJjcmFmdCBNYWtlL01vZGVsXG4tIEluanVyeSBTZXZlcml0eVxuLSBCcmllZiBEZXNjcmlwdGlvblxuXG5SZXR1cm4gYXMgYSBsaXN0IG9mIHJlcG9ydHMuXG5gO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2NyYXBlVXJsKHVybDogc3RyaW5nLCBleHRyYWN0aW9uUHJvbXB0Pzogc3RyaW5nKTogUHJvbWlzZTxGaXJlY3Jhd2xSZXNwb25zZT4ge1xuICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5GSVJFQ1JBV0xfQVBJX0tFWTtcblxuICBpZiAoIWFwaUtleSkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZpcmVjcmF3bCBBUEkga2V5IG5vdCBjb25maWd1cmVkJyB9O1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0ZJUkVDUkFXTF9BUElfVVJMfS9zY3JhcGVgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7YXBpS2V5fWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB1cmwsXG4gICAgICAgIGZvcm1hdHM6IFsnbWFya2Rvd24nLCAnZXh0cmFjdCddLFxuICAgICAgICBleHRyYWN0OiBleHRyYWN0aW9uUHJvbXB0ID8geyBwcm9tcHQ6IGV4dHJhY3Rpb25Qcm9tcHQgfSA6IHVuZGVmaW5lZCxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgRmlyZWNyYXdsIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCB9O1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQuZGF0YSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlIH07XG4gIH1cbn1cblxuLy8gU2VhcmNoIGZvciBBaXJ3b3J0aGluZXNzIERpcmVjdGl2ZXNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hBaXJ3b3J0aGluZXNzRGlyZWN0aXZlcyhcbiAgbWFudWZhY3R1cmVyOiBzdHJpbmcsXG4gIG1vZGVsOiBzdHJpbmdcbik6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBkaXJlY3RpdmVzOiBBaXJ3b3J0aGluZXNzRGlyZWN0aXZlW107IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgaWYgKCFwcm9jZXNzLmVudi5GSVJFQ1JBV0xfQVBJX0tFWSkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRpcmVjdGl2ZXM6IFtdIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGFkU2VhcmNoVXJsID0gYGh0dHBzOi8vd3d3LmZhYS5nb3YvcmVndWxhdGlvbnNfcG9saWNpZXMvYWlyd29ydGhpbmVzc19kaXJlY3RpdmVzL3NlYXJjaD9haXJjcmFmdF9tb2RlbD0ke2VuY29kZVVSSUNvbXBvbmVudChtb2RlbCl9Jm1hbnVmYWN0dXJlcj0ke2VuY29kZVVSSUNvbXBvbmVudChtYW51ZmFjdHVyZXIpfWA7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2NyYXBlVXJsKGFkU2VhcmNoVXJsLCBBRF9FWFRSQUNUSU9OX1BST01QVCk7XG5cbiAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZGlyZWN0aXZlczogW10sIGVycm9yOiByZXN1bHQuZXJyb3IgfTtcbiAgICB9XG5cbiAgICBjb25zdCBkaXJlY3RpdmVzOiBBaXJ3b3J0aGluZXNzRGlyZWN0aXZlW10gPSBbXTtcbiAgICBpZiAocmVzdWx0LmRhdGE/LmV4dHJhY3Q/LmFpcndvcnRoaW5lc3NfZGlyZWN0aXZlcykge1xuICAgICAgZm9yIChjb25zdCBhZCBvZiByZXN1bHQuZGF0YS5leHRyYWN0LmFpcndvcnRoaW5lc3NfZGlyZWN0aXZlcykge1xuICAgICAgICBkaXJlY3RpdmVzLnB1c2goe1xuICAgICAgICAgIGFkTnVtYmVyOiBhZC5hZF9udW1iZXIgfHwgYWQubnVtYmVyIHx8ICcnLFxuICAgICAgICAgIHRpdGxlOiBhZC50aXRsZSB8fCBhZC5zdWJqZWN0IHx8ICcnLFxuICAgICAgICAgIGVmZmVjdGl2ZURhdGU6IGFkLmVmZmVjdGl2ZV9kYXRlIHx8IGFkLmRhdGUgfHwgJycsXG4gICAgICAgICAgYXBwbGljYWJpbGl0eTogYWQuYXBwbGljYWJpbGl0eSB8fCBhZC5hcHBsaWVzX3RvIHx8ICcnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBhZC5kZXNjcmlwdGlvbiB8fCBhZC5zdW1tYXJ5IHx8ICcnLFxuICAgICAgICAgIHVybDogYWQudXJsIHx8ICcnLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkaXJlY3RpdmVzIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGRpcmVjdGl2ZXM6IFtdLCBlcnJvcjogKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlIH07XG4gIH1cbn1cblxuLy8gU2VhcmNoIGZvciBOVFNCIHJlcG9ydHMgZm9yIGEgc3BlY2lmaWMgYWlyY3JhZnQgbW9kZWxcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hOVFNCUmVwb3J0cyhcbiAgbWFudWZhY3R1cmVyOiBzdHJpbmcsXG4gIG1vZGVsOiBzdHJpbmdcbik6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyByZXBvcnRzOiBhbnlbXTsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHF1ZXJ5ID0gYHNpdGU6bnRzYi5nb3YgJHttYW51ZmFjdHVyZXJ9ICR7bW9kZWx9IGFjY2lkZW50IHJlcG9ydGA7XG4gICAgY29uc3Qgc2VhcmNoVXJsID0gYGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoP3E9JHtlbmNvZGVVUklDb21wb25lbnQocXVlcnkpfWA7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2NyYXBlVXJsKHNlYXJjaFVybCwgTlRTQl9FWFRSQUNUSU9OX1BST01QVCk7XG5cbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmRhdGE/LmV4dHJhY3Q/LnJlcG9ydHMpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHJlcG9ydHM6IHJlc3VsdC5kYXRhLmV4dHJhY3QucmVwb3J0cyB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHJlcG9ydHM6IFtdIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHJlcG9ydHM6IFtdLCBlcnJvcjogKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlIH07XG4gIH1cbn1cblxuLy8gU2VhcmNoIGZvciBhaXJjcmFmdCBpbWFnZSBieSB0YWlsIG51bWJlclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQWlyY3JhZnRJbWFnZSh0YWlsTnVtYmVyOiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgaW1hZ2VVcmw/OiBzdHJpbmc7IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgaWYgKCFwcm9jZXNzLmVudi5GSVJFQ1JBV0xfQVBJX0tFWSkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZpcmVjcmF3bCBBUEkga2V5IG5vdCBjb25maWd1cmVkJyB9O1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBjbGVhblRhaWwgPSB0YWlsTnVtYmVyLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvW15BLVowLTldL2csICcnKTtcbiAgICBjb25zdCBwbGFuZXNwb3R0ZXJzVXJsID0gYGh0dHBzOi8vd3d3LnBsYW5lc3BvdHRlcnMubmV0L3NlYXJjaD9xPSR7Y2xlYW5UYWlsfWA7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzY3JhcGVVcmwocGxhbmVzcG90dGVyc1VybCwgQUlSQ1JBRlRfSU1BR0VfRVhUUkFDVElPTl9QUk9NUFQpO1xuICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuZGF0YT8uZXh0cmFjdD8uaW1hZ2VfdXJsKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBpbWFnZVVybDogcmVzdWx0LmRhdGEuZXh0cmFjdC5pbWFnZV91cmwgfTtcbiAgICB9XG5cbiAgICAvLyBGYWxsYmFjazogdHJ5IEpldFBob3Rvc1xuICAgIGNvbnN0IGpldHBob3Rvc1VybCA9IGBodHRwczovL3d3dy5qZXRwaG90b3MuY29tL3JlZ2lzdHJhdGlvbi8ke2NsZWFuVGFpbH1gO1xuICAgIGNvbnN0IGpldFJlc3VsdCA9IGF3YWl0IHNjcmFwZVVybChqZXRwaG90b3NVcmwsIEFJUkNSQUZUX0lNQUdFX0VYVFJBQ1RJT05fUFJPTVBUKTtcbiAgICBpZiAoamV0UmVzdWx0LnN1Y2Nlc3MgJiYgamV0UmVzdWx0LmRhdGE/LmV4dHJhY3Q/LmltYWdlX3VybCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaW1hZ2VVcmw6IGpldFJlc3VsdC5kYXRhLmV4dHJhY3QuaW1hZ2VfdXJsIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaW1hZ2VVcmw6IHVuZGVmaW5lZCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlIH07XG4gIH1cbn1cblxuLy8gRmV0Y2ggYWlyY3JhZnQgZGV0YWlscyBmcm9tIEZBQSBSZWdpc3RyeVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQWlyY3JhZnREZXRhaWxzKHRhaWxOdW1iZXI6IHN0cmluZyk6IFByb21pc2U8e1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBkYXRhPzoge1xuICAgIG1hbnVmYWN0dXJlcjogc3RyaW5nO1xuICAgIG1vZGVsOiBzdHJpbmc7XG4gICAgc2VyaWFsOiBzdHJpbmc7XG4gICAgeWVhcjogbnVtYmVyO1xuICAgIGltYWdlVXJsPzogc3RyaW5nO1xuICAgIHBvaFVybD86IHN0cmluZztcbiAgICBvcGVyYXRpbmdMaW1pdHM/OiB7IHZTcGVlZHM6IGFueTsgd2VpZ2h0czogYW55IH07XG4gIH07XG4gIGVycm9yPzogc3RyaW5nO1xufT4ge1xuICBpZiAoIXByb2Nlc3MuZW52LkZJUkVDUkFXTF9BUElfS0VZKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmlyZWNyYXdsIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQnIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGNsZWFuVGFpbCA9IHRhaWxOdW1iZXIudG9VcHBlckNhc2UoKS5yZXBsYWNlKC9bXkEtWjAtOV0vZywgJycpO1xuXG4gICAgaWYgKGNsZWFuVGFpbC5zdGFydHNXaXRoKCdOJykpIHtcbiAgICAgIGNvbnN0IHVybCA9IGBodHRwczovL3JlZ2lzdHJ5LmZhYS5nb3YvYWlyY3JhZnRpbnF1aXJ5L1NlYXJjaC9OTnVtYmVyUmVzdWx0P25OdW1iZXJUeHQ9JHtjbGVhblRhaWx9YDtcbiAgICAgIGNvbnN0IHByb21wdCA9IGBFeHRyYWN0OiBNYW51ZmFjdHVyZXIgTmFtZSwgTW9kZWwgTmFtZSwgU2VyaWFsIE51bWJlciwgTWZyIFllYXIuIFJldHVybiBhcyBKU09OOiB7IG1hbnVmYWN0dXJlciwgbW9kZWwsIHNlcmlhbCwgeWVhciB9YDtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2NyYXBlVXJsKHVybCwgcHJvbXB0KTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuZGF0YT8uZXh0cmFjdCkge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzdWx0LmRhdGEuZXh0cmFjdDtcbiAgICAgICAgY29uc3QgcG9oQW5kTGltaXRzID0gZ2V0UE9IQW5kTGltaXRzKGRhdGEubW9kZWwgfHwgJycpO1xuICAgICAgICBjb25zdCBpbWFnZVJlc3VsdCA9IGF3YWl0IGZldGNoQWlyY3JhZnRJbWFnZSh0YWlsTnVtYmVyKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbWFudWZhY3R1cmVyOiBkYXRhLm1hbnVmYWN0dXJlciB8fCAnJyxcbiAgICAgICAgICAgIG1vZGVsOiBkYXRhLm1vZGVsIHx8ICcnLFxuICAgICAgICAgICAgc2VyaWFsOiBkYXRhLnNlcmlhbCB8fCAnJyxcbiAgICAgICAgICAgIHllYXI6IHBhcnNlSW50KGRhdGEueWVhcikgfHwgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLFxuICAgICAgICAgICAgaW1hZ2VVcmw6IGltYWdlUmVzdWx0LmltYWdlVXJsLFxuICAgICAgICAgICAgLi4ucG9oQW5kTGltaXRzLFxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdDb3VsZCBub3QgZmV0Y2ggYWlyY3JhZnQgZGV0YWlscycgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB9O1xuICB9XG59XG5cbi8vIEdldCBQT0ggYW5kIE9wZXJhdGluZyBMaW1pdHMgZm9yIGNvbW1vbiBhaXJjcmFmdFxuZnVuY3Rpb24gZ2V0UE9IQW5kTGltaXRzKG1vZGVsOiBzdHJpbmcpOiB7IHBvaFVybD86IHN0cmluZzsgb3BlcmF0aW5nTGltaXRzPzogeyB2U3BlZWRzOiBhbnk7IHdlaWdodHM6IGFueSB9IH0ge1xuICAvLyBQYXJzaW5nIGxvZ2ljIGZvciBzcGVjaWZpYyBtb2RlbHMgY291bGQgZ28gaGVyZSwgYnV0IGF2b2lkaW5nIFwiZmlsbGVyXCIgZGF0YVxuICAvLyBPbmx5IHJldHVybiBpZiB3ZSBoYXZlIGEgdmVyaWZpZWQgc291cmNlIChmdXR1cmUgaW1wbGVtZW50YXRpb24pXG4gIHJldHVybiB7fTtcbn1cblxuLy8gU2VhcmNoIGZvciBhY2NpZGVudHMgYXNzb2NpYXRlZCB3aXRoIGEgcGlsb3QgbmFtZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaFBpbG90QWNjaWRlbnRzKG5hbWU6IHN0cmluZyk6IFByb21pc2U8e1xuICBzdWNjZXNzOiBib29sZWFuO1xuICByZXBvcnRzOiBhbnlbXTtcbiAgZXJyb3I/OiBzdHJpbmc7XG59PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcXVlcnkgPSBgc2l0ZTpudHNiLmdvdiBhY2NpZGVudCByZXBvcnQgcGlsb3QgXCIke25hbWV9XCJgO1xuICAgIGNvbnN0IHNlYXJjaFVybCA9IGBodHRwczovL3d3dy5nb29nbGUuY29tL3NlYXJjaD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KX1gO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNjcmFwZVVybChzZWFyY2hVcmwsIFBJTE9UX0FDQ0lERU5UX0VYVFJBQ1RJT05fUFJPTVBUKTtcblxuICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuZGF0YT8uZXh0cmFjdD8ucmVwb3J0cykge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgcmVwb3J0czogcmVzdWx0LmRhdGEuZXh0cmFjdC5yZXBvcnRzIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgcmVwb3J0czogW10gfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgcmVwb3J0czogW10sIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgfTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSB7IEZpcmVjcmF3bFJlc3BvbnNlLCBBaXJ3b3J0aGluZXNzRGlyZWN0aXZlIH07XG4iXSwibmFtZXMiOlsiRklSRUNSQVdMX0FQSV9VUkwiLCJBRF9FWFRSQUNUSU9OX1BST01QVCIsIk5UU0JfRVhUUkFDVElPTl9QUk9NUFQiLCJBSVJDUkFGVF9JTUFHRV9FWFRSQUNUSU9OX1BST01QVCIsIlBJTE9UX0FDQ0lERU5UX0VYVFJBQ1RJT05fUFJPTVBUIiwic2NyYXBlVXJsIiwidXJsIiwiZXh0cmFjdGlvblByb21wdCIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJGSVJFQ1JBV0xfQVBJX0tFWSIsInN1Y2Nlc3MiLCJlcnJvciIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJmb3JtYXRzIiwiZXh0cmFjdCIsInByb21wdCIsInVuZGVmaW5lZCIsIm9rIiwic3RhdHVzIiwicmVzdWx0IiwianNvbiIsImRhdGEiLCJtZXNzYWdlIiwic2VhcmNoQWlyd29ydGhpbmVzc0RpcmVjdGl2ZXMiLCJtYW51ZmFjdHVyZXIiLCJtb2RlbCIsImRpcmVjdGl2ZXMiLCJhZFNlYXJjaFVybCIsImVuY29kZVVSSUNvbXBvbmVudCIsImFpcndvcnRoaW5lc3NfZGlyZWN0aXZlcyIsImFkIiwicHVzaCIsImFkTnVtYmVyIiwiYWRfbnVtYmVyIiwibnVtYmVyIiwidGl0bGUiLCJzdWJqZWN0IiwiZWZmZWN0aXZlRGF0ZSIsImVmZmVjdGl2ZV9kYXRlIiwiZGF0ZSIsImFwcGxpY2FiaWxpdHkiLCJhcHBsaWVzX3RvIiwiZGVzY3JpcHRpb24iLCJzdW1tYXJ5Iiwic2VhcmNoTlRTQlJlcG9ydHMiLCJxdWVyeSIsInNlYXJjaFVybCIsInJlcG9ydHMiLCJmZXRjaEFpcmNyYWZ0SW1hZ2UiLCJ0YWlsTnVtYmVyIiwiY2xlYW5UYWlsIiwidG9VcHBlckNhc2UiLCJyZXBsYWNlIiwicGxhbmVzcG90dGVyc1VybCIsImltYWdlX3VybCIsImltYWdlVXJsIiwiamV0cGhvdG9zVXJsIiwiamV0UmVzdWx0IiwiZmV0Y2hBaXJjcmFmdERldGFpbHMiLCJzdGFydHNXaXRoIiwicG9oQW5kTGltaXRzIiwiZ2V0UE9IQW5kTGltaXRzIiwiaW1hZ2VSZXN1bHQiLCJzZXJpYWwiLCJ5ZWFyIiwicGFyc2VJbnQiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJzZWFyY2hQaWxvdEFjY2lkZW50cyIsIm5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/firecrawlService.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/reductoService.ts":
/*!****************************************!*\
  !*** ./lib/services/reductoService.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   aggregateLogbookHours: () => (/* binding */ aggregateLogbookHours),\n/* harmony export */   parseDocument: () => (/* binding */ parseDocument),\n/* harmony export */   parsePOHFromUrl: () => (/* binding */ parsePOHFromUrl)\n/* harmony export */ });\n/* harmony import */ var reductoai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! reductoai */ \"(rsc)/./node_modules/reductoai/index.mjs\");\n/* harmony import */ var reductoai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! reductoai */ \"(rsc)/./node_modules/reductoai/uploads.mjs\");\n// Reducto Document Intelligence Service\n// For parsing handwritten pilot logbooks and maintenance PDFs\n\nasync function parseDocument(fileBase64, fileType, documentType) {\n    const apiKey = process.env.REDUCTO_API_KEY;\n    if (!apiKey) {\n        console.warn(\"Reducto API key not configured\");\n        return {\n            success: false,\n            error: \"Reducto API key not configured\"\n        };\n    }\n    try {\n        const client = new reductoai__WEBPACK_IMPORTED_MODULE_0__.Reducto({\n            apiKey\n        });\n        // 1. Upload File using helper\n        const fileBuffer = Buffer.from(fileBase64, \"base64\");\n        const upload = await client.upload({\n            file: await (0,reductoai__WEBPACK_IMPORTED_MODULE_1__.toFile)(fileBuffer, fileType === \"image\" ? \"document.png\" : \"document.pdf\"),\n            extension: fileType === \"image\" ? \"png\" : \"pdf\"\n        });\n        // 2. Prepare Prompt\n        const prompt = documentType === \"logbook\" ? LOGBOOK_EXTRACTION_PROMPT : MAINTENANCE_EXTRACTION_PROMPT;\n        // 3. Extract Structured Data\n        const extraction = await client.extract.run({\n            input: upload,\n            instructions: {\n                system_prompt: prompt\n            },\n            settings: {\n                optimize_for_latency: true\n            }\n        });\n        // 4. Adapt to internal format\n        if (\"job_id\" in extraction && !(\"result\" in extraction)) {\n            // Handle async response if it happens (though we didn't request async)\n            return {\n                success: false,\n                error: \"Received async job id but expected sync result\"\n            };\n        }\n        const items = extraction.result || [];\n        let extractedData = {};\n        if (documentType === \"logbook\") {\n            extractedData = {\n                entries: items\n            };\n        } else {\n            extractedData = {\n                entries: items\n            };\n        }\n        return {\n            success: true,\n            data: {\n                documentType: documentType,\n                extractedData,\n                confidence: 1.0,\n                rawText: \"\"\n            }\n        };\n    } catch (error) {\n        console.error(\"Reducto service error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\n// Process raw Reducto output into structured data\nfunction processExtractedData(rawResult, documentType) {\n    const extractedText = rawResult.text || rawResult.extracted_text || \"\";\n    const tables = rawResult.tables || [];\n    const structuredData = rawResult.structured_data || {};\n    let extractedData = {};\n    if (documentType === \"logbook\") {\n        extractedData = parseLogbookData(structuredData, tables, extractedText);\n    } else if (documentType === \"maintenance\") {\n        extractedData = parseMaintenanceData(structuredData, tables, extractedText);\n    }\n    return {\n        documentType: documentType,\n        extractedData,\n        confidence: rawResult.confidence || 0.8,\n        rawText: extractedText\n    };\n}\n// Parse pilot logbook entries\nfunction parseLogbookData(structured, tables, rawText) {\n    const entries = [];\n    // If structured data contains entries\n    if (structured.entries) {\n        for (const entry of structured.entries){\n            entries.push({\n                date: entry.date || \"\",\n                aircraft: entry.aircraft || entry.tail_number || \"\",\n                route: entry.route || entry.from_to || \"\",\n                duration: parseFloat(entry.duration || entry.total_time || \"0\"),\n                remarks: entry.remarks || entry.notes || \"\"\n            });\n        }\n    }\n    // Parse from tables if available\n    if (tables.length > 0) {\n        for (const table of tables){\n            const headers = table.headers || [];\n            const rows = table.rows || [];\n            for (const row of rows){\n                const entry = {\n                    date: \"\",\n                    aircraft: \"\",\n                    route: \"\",\n                    duration: 0\n                };\n                headers.forEach((header, idx)=>{\n                    const value = row[idx];\n                    const headerLower = header.toLowerCase();\n                    if (headerLower.includes(\"date\")) entry.date = value;\n                    if (headerLower.includes(\"aircraft\") || headerLower.includes(\"tail\")) entry.aircraft = value;\n                    if (headerLower.includes(\"route\") || headerLower.includes(\"from\")) entry.route = value;\n                    if (headerLower.includes(\"time\") || headerLower.includes(\"duration\")) entry.duration = parseFloat(value) || 0;\n                    if (headerLower.includes(\"remark\")) entry.remarks = value;\n                });\n                if (entry.date || entry.aircraft) {\n                    entries.push(entry);\n                }\n            }\n        }\n    }\n    return {\n        entries\n    };\n}\n// Parse maintenance log entries\nfunction parseMaintenanceData(structured, tables, rawText) {\n    const entries = [];\n    // If structured data contains entries\n    if (structured.entries || structured.maintenance_items) {\n        const items = structured.entries || structured.maintenance_items;\n        for (const entry of items){\n            entries.push({\n                date: entry.date || \"\",\n                description: entry.description || entry.work_performed || \"\",\n                hobbsTime: parseFloat(entry.hobbs || entry.hobbs_time || \"0\") || undefined,\n                tachTime: parseFloat(entry.tach || entry.tach_time || \"0\") || undefined,\n                mechanic: entry.mechanic || entry.technician || \"\",\n                signOff: entry.sign_off || entry.signed || false\n            });\n        }\n    }\n    // Parse annual/inspection data\n    if (structured.annual_date || structured.last_annual) {\n        entries.push({\n            date: structured.annual_date || structured.last_annual,\n            description: \"Annual Inspection\",\n            signOff: true\n        });\n    }\n    return {\n        entries\n    };\n}\n// Extraction prompts for different document types\nconst LOGBOOK_EXTRACTION_PROMPT = `\nYou are an expert at parsing pilot logbook pages. Extract EVERY flight entry from the table.\n\nIMPORTANT: Logbooks have many columns for different hour types. Look for ALL of these:\n\nREQUIRED FIELDS (extract if visible):\n- date: Flight date (YYYY-MM-DD format)\n- aircraftIdent: Tail number (e.g., N12345, N5392R)\n- aircraftType: Make/model (e.g., C172, PA-28, SR22)\n- from: Departure airport (4-letter ICAO preferred, e.g., KJFK)\n- to: Destination airport\n- route: Full route if multi-leg (e.g., \"KJFK-KBOS-KJFK\")\n\nHOUR COLUMNS (extract ALL that are visible, use decimal hours like 1.5):\n- totalTime: Total flight time (SEL, MEL, or total column)\n- sel: Single Engine Land time\n- mel: Multi Engine Land time\n- pic: Pilot In Command time\n- sic: Second In Command time\n- solo: Solo flight time\n- dualReceived: Instruction received time\n- dualGiven: Instruction given (CFI) time\n- crossCountry: Cross-country time (XC)\n- night: Night flying time\n- actualInstrument: Actual IMC time\n- simulatedInstrument: Simulated/hood instrument time\n- flightSim: Simulator/AATD/BATD time\n- groundTrainer: Ground trainer time\n\nLANDINGS (look for day/night columns):\n- landingsDay: Number of day landings\n- landingsNight: Number of night landings\n- landingsFullStop: Full stop landings if separate\n\nREMARKS (critical - capture everything):\n- remarks: ALL text from remarks column including:\n  - Instructor signatures/names\n  - Endorsements given/received\n  - Approach types (ILS, VOR, GPS, LOC)\n  - Number of approaches\n  - Holds\n  - Night currency note\n  - Checkride notes\n  - Any other comments\n\nOUTPUT FORMAT:\nReturn a JSON array where each flight is an object. Include ONLY fields that have values.\nParse EVERY row - do not skip any entries. If handwriting is unclear, make your best guess.\n\nExample:\n[\n  {\n    \"date\": \"2024-01-15\",\n    \"aircraftIdent\": \"N5392R\",\n    \"aircraftType\": \"C172\",\n    \"from\": \"KJFK\",\n    \"to\": \"KBOS\",\n    \"totalTime\": 2.5,\n    \"sel\": 2.5,\n    \"pic\": 2.5,\n    \"crossCountry\": 2.5,\n    \"landingsDay\": 1,\n    \"remarks\": \"XC to Boston. 1 ILS approach RWY 4R. J. Smith - CFI\"\n  },\n  {\n    \"date\": \"2024-01-16\",\n    \"aircraftIdent\": \"N5392R\",\n    \"aircraftType\": \"C172\",\n    \"from\": \"KBOS\",\n    \"to\": \"KJFK\",\n    \"totalTime\": 2.3,\n    \"sel\": 2.3,\n    \"pic\": 2.3,\n    \"night\": 1.5,\n    \"actualInstrument\": 0.5,\n    \"crossCountry\": 2.3,\n    \"landingsNight\": 1,\n    \"remarks\": \"Night XC return. 2 VOR approaches. IMC for 30 min\"\n  }\n]\n`;\nconst MAINTENANCE_EXTRACTION_PROMPT = `\nExtract aircraft maintenance log entries from this document. For each maintenance entry, identify:\n- Date of maintenance\n- Description of work performed\n- Hobbs time (if listed)\n- Tach time (if listed)\n- Mechanic name or signature\n- Sign-off/approval status\n\nAlso extract any inspection dates such as:\n- Annual inspection date\n- 100-hour inspection date\n- Transponder check date\n- Static system check date\n\nReturn structured data with all entries and dates found.\n`;\nconst POH_EXTRACTION_PROMPT = `\nExtract operating limits and specifications from this Pilot Operating Handbook (POH).\nSpecifically extract:\n1. V-Speeds (in Knots):\n   - Vso (Stall speed in landing configuration)\n   - Vs1 (Stall speed in clean configuration)\n   - Vr (Rotation speed)\n   - Vx (Best angle of climb)\n   - Vy (Best rate of climb)\n   - Vfe (Maximum flap extended speed)\n   - Va (Maneuvering speed)\n   - Vno (Max structural cruising speed)\n   - Vne (Never exceed speed)\n\n2. Weights (in lbs):\n   - Max Gross Weight\n   - Standard Empty Weight\n   - Useful Load\n   - Fuel Capacity (Total and Usable in gallons)\n\nReturn as a JSON object with keys: vSpeeds (object with keys above camelCase), weights (object with keys above camelCase).\n`;\n// Parse POH from URL\nasync function parsePOHFromUrl(pohUrl) {\n    try {\n        const apiKey = process.env.REDUCTO_API_KEY;\n        if (!apiKey) {\n            return {\n                success: false,\n                error: \"Reducto API key not configured\"\n            };\n        }\n        // 1. Fetch PDF manually to avoid Reducto download issues\n        const response = await fetch(pohUrl);\n        if (!response.ok) throw new Error(`Failed to fetch POH PDF: ${response.statusText}`);\n        const arrayBuffer = await response.arrayBuffer();\n        const buffer = Buffer.from(arrayBuffer);\n        const client = new reductoai__WEBPACK_IMPORTED_MODULE_0__.Reducto({\n            apiKey\n        });\n        // 2. Upload\n        const upload = await client.upload({\n            file: await (0,reductoai__WEBPACK_IMPORTED_MODULE_1__.toFile)(buffer, \"poh.pdf\"),\n            extension: \"pdf\"\n        });\n        // 3. Extract\n        const extraction = await client.extract.run({\n            input: upload,\n            instructions: {\n                system_prompt: POH_EXTRACTION_PROMPT\n            }\n        });\n        if (\"job_id\" in extraction && !(\"result\" in extraction)) {\n            return {\n                success: false,\n                error: \"Async job ID returned\"\n            };\n        }\n        const res = extraction.result;\n        const data = res && res.length > 0 ? res[0] : {};\n        return {\n            success: true,\n            data: {\n                documentType: \"unknown\",\n                extractedData: data,\n                confidence: 1.0,\n                rawText: \"\"\n            }\n        };\n    } catch (error) {\n        console.error(\"POH parsing error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\nfunction aggregateLogbookHours(entries) {\n    const now = new Date();\n    const ninetyDaysAgo = new Date(now.getTime() - 90 * 24 * 60 * 60 * 1000);\n    const thirtyDaysAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n    let totalHours = 0;\n    let picHours = 0;\n    let nightHours = 0;\n    let ifrHours = 0;\n    let last90DaysHours = 0;\n    let last30DaysHours = 0;\n    for (const entry of entries){\n        const duration = entry.duration || 0;\n        totalHours += duration;\n        // Simple heuristics since our basic prompt might not capture every column\n        // Assume if it's in the logbook, it contributes to total.\n        // We'll estimate PIC as 100% for now unless defined otherwise (often safe for private logbooks uploaded by owner)\n        // Real parsing would look for specific columns.\n        picHours += duration;\n        // Check remarks for \"Night\" or \"IFR\" keywords if explicit columns missing\n        const remarks = (entry.remarks || \"\").toLowerCase();\n        if (remarks.includes(\"night\")) {\n            nightHours += duration;\n        }\n        if (remarks.includes(\"ifr\") || remarks.includes(\"imc\") || remarks.includes(\"approach\")) {\n            ifrHours += duration;\n        }\n        // Date based calc\n        if (entry.date) {\n            const entryDate = new Date(entry.date);\n            if (!isNaN(entryDate.getTime())) {\n                if (entryDate >= ninetyDaysAgo) last90DaysHours += duration;\n                if (entryDate >= thirtyDaysAgo) last30DaysHours += duration;\n            }\n        }\n    }\n    return {\n        totalHours,\n        picHours,\n        nightHours,\n        ifrHours,\n        last90DaysHours,\n        last30DaysHours\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBR1ksV0FBVztRQUVqRCxJQUFJWixRQUFRYSxRQUFRLENBQUMsVUFBVTtZQUM3QnFDLGNBQWNyRDtRQUNoQjtRQUVBLElBQUlHLFFBQVFhLFFBQVEsQ0FBQyxVQUFVYixRQUFRYSxRQUFRLENBQUMsVUFBVWIsUUFBUWEsUUFBUSxDQUFDLGFBQWE7WUFDdEZzQyxZQUFZdEQ7UUFDZDtRQUVBLGtCQUFrQjtRQUNsQixJQUFJUCxNQUFNRSxJQUFJLEVBQUU7WUFDZCxNQUFNOEQsWUFBWSxJQUFJVixLQUFLdEQsTUFBTUUsSUFBSTtZQUNyQyxJQUFJLENBQUMrRCxNQUFNRCxVQUFVUixPQUFPLEtBQUs7Z0JBQy9CLElBQUlRLGFBQWFULGVBQWVPLG1CQUFtQnZEO2dCQUNuRCxJQUFJeUQsYUFBYVAsZUFBZU0sbUJBQW1CeEQ7WUFDckQ7UUFDRjtJQUNGO0lBRUEsT0FBTztRQUNMbUQ7UUFDQUM7UUFDQUM7UUFDQUM7UUFDQUM7UUFDQUM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXZpYXRpb24taW50ZWxsaWdlbmNlLWJyYWluLy4vbGliL3NlcnZpY2VzL3JlZHVjdG9TZXJ2aWNlLnRzPzdiZWMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUmVkdWN0byBEb2N1bWVudCBJbnRlbGxpZ2VuY2UgU2VydmljZVxuLy8gRm9yIHBhcnNpbmcgaGFuZHdyaXR0ZW4gcGlsb3QgbG9nYm9va3MgYW5kIG1haW50ZW5hbmNlIFBERnNcblxuaW50ZXJmYWNlIFJlZHVjdG9SZXNwb25zZSB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIGRhdGE/OiBQYXJzZWREb2N1bWVudDtcbiAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBQYXJzZWREb2N1bWVudCB7XG4gIGRvY3VtZW50VHlwZTogJ2xvZ2Jvb2snIHwgJ21haW50ZW5hbmNlJyB8ICd1bmtub3duJztcbiAgZXh0cmFjdGVkRGF0YTogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgY29uZmlkZW5jZTogbnVtYmVyO1xuICByYXdUZXh0OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBMb2dib29rRW50cnkge1xuICBkYXRlOiBzdHJpbmc7XG4gIGFpcmNyYWZ0OiBzdHJpbmc7XG4gIHJvdXRlOiBzdHJpbmc7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIHJlbWFya3M/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBNYWludGVuYW5jZUVudHJ5IHtcbiAgZGF0ZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBob2Jic1RpbWU/OiBudW1iZXI7XG4gIHRhY2hUaW1lPzogbnVtYmVyO1xuICBtZWNoYW5pYz86IHN0cmluZztcbiAgc2lnbk9mZj86IGJvb2xlYW47XG59XG5cbmltcG9ydCB7IFJlZHVjdG8sIHRvRmlsZSB9IGZyb20gJ3JlZHVjdG9haSc7XG5pbXBvcnQgeyBFeHRyYWN0UnVuUmVzcG9uc2UgfSBmcm9tICdyZWR1Y3RvYWkvcmVzb3VyY2VzL2V4dHJhY3QnO1xuXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXJzZURvY3VtZW50KFxuICBmaWxlQmFzZTY0OiBzdHJpbmcsXG4gIGZpbGVUeXBlOiAncGRmJyB8ICdpbWFnZScsXG4gIGRvY3VtZW50VHlwZTogJ2xvZ2Jvb2snIHwgJ21haW50ZW5hbmNlJ1xuKTogUHJvbWlzZTxSZWR1Y3RvUmVzcG9uc2U+IHtcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuUkVEVUNUT19BUElfS0VZO1xuXG4gIGlmICghYXBpS2V5KSB7XG4gICAgY29uc29sZS53YXJuKCdSZWR1Y3RvIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ1JlZHVjdG8gQVBJIGtleSBub3QgY29uZmlndXJlZCcsXG4gICAgfTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gbmV3IFJlZHVjdG8oeyBhcGlLZXkgfSk7XG5cbiAgICAvLyAxLiBVcGxvYWQgRmlsZSB1c2luZyBoZWxwZXJcbiAgICBjb25zdCBmaWxlQnVmZmVyID0gQnVmZmVyLmZyb20oZmlsZUJhc2U2NCwgJ2Jhc2U2NCcpO1xuICAgIGNvbnN0IHVwbG9hZCA9IGF3YWl0IGNsaWVudC51cGxvYWQoe1xuICAgICAgZmlsZTogYXdhaXQgdG9GaWxlKGZpbGVCdWZmZXIsIGZpbGVUeXBlID09PSAnaW1hZ2UnID8gJ2RvY3VtZW50LnBuZycgOiAnZG9jdW1lbnQucGRmJyksXG4gICAgICBleHRlbnNpb246IGZpbGVUeXBlID09PSAnaW1hZ2UnID8gJ3BuZycgOiAncGRmJyxcbiAgICB9KTtcblxuICAgIC8vIDIuIFByZXBhcmUgUHJvbXB0XG4gICAgY29uc3QgcHJvbXB0ID0gZG9jdW1lbnRUeXBlID09PSAnbG9nYm9vaydcbiAgICAgID8gTE9HQk9PS19FWFRSQUNUSU9OX1BST01QVFxuICAgICAgOiBNQUlOVEVOQU5DRV9FWFRSQUNUSU9OX1BST01QVDtcblxuICAgIC8vIDMuIEV4dHJhY3QgU3RydWN0dXJlZCBEYXRhXG4gICAgY29uc3QgZXh0cmFjdGlvbiA9IGF3YWl0IGNsaWVudC5leHRyYWN0LnJ1bih7XG4gICAgICBpbnB1dDogdXBsb2FkLFxuICAgICAgaW5zdHJ1Y3Rpb25zOiB7XG4gICAgICAgIHN5c3RlbV9wcm9tcHQ6IHByb21wdCxcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nczoge1xuICAgICAgICBvcHRpbWl6ZV9mb3JfbGF0ZW5jeTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gNC4gQWRhcHQgdG8gaW50ZXJuYWwgZm9ybWF0XG4gICAgaWYgKCdqb2JfaWQnIGluIGV4dHJhY3Rpb24gJiYgISgncmVzdWx0JyBpbiBleHRyYWN0aW9uKSkge1xuICAgICAgLy8gSGFuZGxlIGFzeW5jIHJlc3BvbnNlIGlmIGl0IGhhcHBlbnMgKHRob3VnaCB3ZSBkaWRuJ3QgcmVxdWVzdCBhc3luYylcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1JlY2VpdmVkIGFzeW5jIGpvYiBpZCBidXQgZXhwZWN0ZWQgc3luYyByZXN1bHQnIH07XG4gICAgfVxuXG4gICAgY29uc3QgaXRlbXMgPSAoZXh0cmFjdGlvbiBhcyBhbnkpLnJlc3VsdCB8fCBbXTtcbiAgICBsZXQgZXh0cmFjdGVkRGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gICAgaWYgKGRvY3VtZW50VHlwZSA9PT0gJ2xvZ2Jvb2snKSB7XG4gICAgICBleHRyYWN0ZWREYXRhID0geyBlbnRyaWVzOiBpdGVtcyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBleHRyYWN0ZWREYXRhID0geyBlbnRyaWVzOiBpdGVtcyB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YToge1xuICAgICAgICBkb2N1bWVudFR5cGU6IGRvY3VtZW50VHlwZSxcbiAgICAgICAgZXh0cmFjdGVkRGF0YSxcbiAgICAgICAgY29uZmlkZW5jZTogMS4wLFxuICAgICAgICByYXdUZXh0OiAnJyxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdSZWR1Y3RvIHNlcnZpY2UgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UsXG4gICAgfTtcbiAgfVxufVxuXG4vLyBQcm9jZXNzIHJhdyBSZWR1Y3RvIG91dHB1dCBpbnRvIHN0cnVjdHVyZWQgZGF0YVxuZnVuY3Rpb24gcHJvY2Vzc0V4dHJhY3RlZERhdGEocmF3UmVzdWx0OiBhbnksIGRvY3VtZW50VHlwZTogc3RyaW5nKTogUGFyc2VkRG9jdW1lbnQge1xuICBjb25zdCBleHRyYWN0ZWRUZXh0ID0gcmF3UmVzdWx0LnRleHQgfHwgcmF3UmVzdWx0LmV4dHJhY3RlZF90ZXh0IHx8ICcnO1xuICBjb25zdCB0YWJsZXMgPSByYXdSZXN1bHQudGFibGVzIHx8IFtdO1xuICBjb25zdCBzdHJ1Y3R1cmVkRGF0YSA9IHJhd1Jlc3VsdC5zdHJ1Y3R1cmVkX2RhdGEgfHwge307XG5cbiAgbGV0IGV4dHJhY3RlZERhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICBpZiAoZG9jdW1lbnRUeXBlID09PSAnbG9nYm9vaycpIHtcbiAgICBleHRyYWN0ZWREYXRhID0gcGFyc2VMb2dib29rRGF0YShzdHJ1Y3R1cmVkRGF0YSwgdGFibGVzLCBleHRyYWN0ZWRUZXh0KTtcbiAgfSBlbHNlIGlmIChkb2N1bWVudFR5cGUgPT09ICdtYWludGVuYW5jZScpIHtcbiAgICBleHRyYWN0ZWREYXRhID0gcGFyc2VNYWludGVuYW5jZURhdGEoc3RydWN0dXJlZERhdGEsIHRhYmxlcywgZXh0cmFjdGVkVGV4dCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGRvY3VtZW50VHlwZTogZG9jdW1lbnRUeXBlIGFzICdsb2dib29rJyB8ICdtYWludGVuYW5jZScsXG4gICAgZXh0cmFjdGVkRGF0YSxcbiAgICBjb25maWRlbmNlOiByYXdSZXN1bHQuY29uZmlkZW5jZSB8fCAwLjgsXG4gICAgcmF3VGV4dDogZXh0cmFjdGVkVGV4dCxcbiAgfTtcbn1cblxuLy8gUGFyc2UgcGlsb3QgbG9nYm9vayBlbnRyaWVzXG5mdW5jdGlvbiBwYXJzZUxvZ2Jvb2tEYXRhKFxuICBzdHJ1Y3R1cmVkOiBhbnksXG4gIHRhYmxlczogYW55W10sXG4gIHJhd1RleHQ6IHN0cmluZ1xuKTogeyBlbnRyaWVzOiBMb2dib29rRW50cnlbXSB9IHtcbiAgY29uc3QgZW50cmllczogTG9nYm9va0VudHJ5W10gPSBbXTtcblxuICAvLyBJZiBzdHJ1Y3R1cmVkIGRhdGEgY29udGFpbnMgZW50cmllc1xuICBpZiAoc3RydWN0dXJlZC5lbnRyaWVzKSB7XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBzdHJ1Y3R1cmVkLmVudHJpZXMpIHtcbiAgICAgIGVudHJpZXMucHVzaCh7XG4gICAgICAgIGRhdGU6IGVudHJ5LmRhdGUgfHwgJycsXG4gICAgICAgIGFpcmNyYWZ0OiBlbnRyeS5haXJjcmFmdCB8fCBlbnRyeS50YWlsX251bWJlciB8fCAnJyxcbiAgICAgICAgcm91dGU6IGVudHJ5LnJvdXRlIHx8IGVudHJ5LmZyb21fdG8gfHwgJycsXG4gICAgICAgIGR1cmF0aW9uOiBwYXJzZUZsb2F0KGVudHJ5LmR1cmF0aW9uIHx8IGVudHJ5LnRvdGFsX3RpbWUgfHwgJzAnKSxcbiAgICAgICAgcmVtYXJrczogZW50cnkucmVtYXJrcyB8fCBlbnRyeS5ub3RlcyB8fCAnJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFBhcnNlIGZyb20gdGFibGVzIGlmIGF2YWlsYWJsZVxuICBpZiAodGFibGVzLmxlbmd0aCA+IDApIHtcbiAgICBmb3IgKGNvbnN0IHRhYmxlIG9mIHRhYmxlcykge1xuICAgICAgY29uc3QgaGVhZGVycyA9IHRhYmxlLmhlYWRlcnMgfHwgW107XG4gICAgICBjb25zdCByb3dzID0gdGFibGUucm93cyB8fCBbXTtcblxuICAgICAgZm9yIChjb25zdCByb3cgb2Ygcm93cykge1xuICAgICAgICBjb25zdCBlbnRyeTogTG9nYm9va0VudHJ5ID0ge1xuICAgICAgICAgIGRhdGU6ICcnLFxuICAgICAgICAgIGFpcmNyYWZ0OiAnJyxcbiAgICAgICAgICByb3V0ZTogJycsXG4gICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgIH07XG5cbiAgICAgICAgaGVhZGVycy5mb3JFYWNoKChoZWFkZXI6IHN0cmluZywgaWR4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJvd1tpZHhdO1xuICAgICAgICAgIGNvbnN0IGhlYWRlckxvd2VyID0gaGVhZGVyLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICBpZiAoaGVhZGVyTG93ZXIuaW5jbHVkZXMoJ2RhdGUnKSkgZW50cnkuZGF0ZSA9IHZhbHVlO1xuICAgICAgICAgIGlmIChoZWFkZXJMb3dlci5pbmNsdWRlcygnYWlyY3JhZnQnKSB8fCBoZWFkZXJMb3dlci5pbmNsdWRlcygndGFpbCcpKVxuICAgICAgICAgICAgZW50cnkuYWlyY3JhZnQgPSB2YWx1ZTtcbiAgICAgICAgICBpZiAoaGVhZGVyTG93ZXIuaW5jbHVkZXMoJ3JvdXRlJykgfHwgaGVhZGVyTG93ZXIuaW5jbHVkZXMoJ2Zyb20nKSlcbiAgICAgICAgICAgIGVudHJ5LnJvdXRlID0gdmFsdWU7XG4gICAgICAgICAgaWYgKGhlYWRlckxvd2VyLmluY2x1ZGVzKCd0aW1lJykgfHwgaGVhZGVyTG93ZXIuaW5jbHVkZXMoJ2R1cmF0aW9uJykpXG4gICAgICAgICAgICBlbnRyeS5kdXJhdGlvbiA9IHBhcnNlRmxvYXQodmFsdWUpIHx8IDA7XG4gICAgICAgICAgaWYgKGhlYWRlckxvd2VyLmluY2x1ZGVzKCdyZW1hcmsnKSkgZW50cnkucmVtYXJrcyA9IHZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZW50cnkuZGF0ZSB8fCBlbnRyeS5haXJjcmFmdCkge1xuICAgICAgICAgIGVudHJpZXMucHVzaChlbnRyeSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4geyBlbnRyaWVzIH07XG59XG5cbi8vIFBhcnNlIG1haW50ZW5hbmNlIGxvZyBlbnRyaWVzXG5mdW5jdGlvbiBwYXJzZU1haW50ZW5hbmNlRGF0YShcbiAgc3RydWN0dXJlZDogYW55LFxuICB0YWJsZXM6IGFueVtdLFxuICByYXdUZXh0OiBzdHJpbmdcbik6IHsgZW50cmllczogTWFpbnRlbmFuY2VFbnRyeVtdIH0ge1xuICBjb25zdCBlbnRyaWVzOiBNYWludGVuYW5jZUVudHJ5W10gPSBbXTtcblxuICAvLyBJZiBzdHJ1Y3R1cmVkIGRhdGEgY29udGFpbnMgZW50cmllc1xuICBpZiAoc3RydWN0dXJlZC5lbnRyaWVzIHx8IHN0cnVjdHVyZWQubWFpbnRlbmFuY2VfaXRlbXMpIHtcbiAgICBjb25zdCBpdGVtcyA9IHN0cnVjdHVyZWQuZW50cmllcyB8fCBzdHJ1Y3R1cmVkLm1haW50ZW5hbmNlX2l0ZW1zO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgaXRlbXMpIHtcbiAgICAgIGVudHJpZXMucHVzaCh7XG4gICAgICAgIGRhdGU6IGVudHJ5LmRhdGUgfHwgJycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlbnRyeS5kZXNjcmlwdGlvbiB8fCBlbnRyeS53b3JrX3BlcmZvcm1lZCB8fCAnJyxcbiAgICAgICAgaG9iYnNUaW1lOiBwYXJzZUZsb2F0KGVudHJ5LmhvYmJzIHx8IGVudHJ5LmhvYmJzX3RpbWUgfHwgJzAnKSB8fCB1bmRlZmluZWQsXG4gICAgICAgIHRhY2hUaW1lOiBwYXJzZUZsb2F0KGVudHJ5LnRhY2ggfHwgZW50cnkudGFjaF90aW1lIHx8ICcwJykgfHwgdW5kZWZpbmVkLFxuICAgICAgICBtZWNoYW5pYzogZW50cnkubWVjaGFuaWMgfHwgZW50cnkudGVjaG5pY2lhbiB8fCAnJyxcbiAgICAgICAgc2lnbk9mZjogZW50cnkuc2lnbl9vZmYgfHwgZW50cnkuc2lnbmVkIHx8IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gUGFyc2UgYW5udWFsL2luc3BlY3Rpb24gZGF0YVxuICBpZiAoc3RydWN0dXJlZC5hbm51YWxfZGF0ZSB8fCBzdHJ1Y3R1cmVkLmxhc3RfYW5udWFsKSB7XG4gICAgZW50cmllcy5wdXNoKHtcbiAgICAgIGRhdGU6IHN0cnVjdHVyZWQuYW5udWFsX2RhdGUgfHwgc3RydWN0dXJlZC5sYXN0X2FubnVhbCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQW5udWFsIEluc3BlY3Rpb24nLFxuICAgICAgc2lnbk9mZjogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7IGVudHJpZXMgfTtcbn1cblxuLy8gRXh0cmFjdGlvbiBwcm9tcHRzIGZvciBkaWZmZXJlbnQgZG9jdW1lbnQgdHlwZXNcbmNvbnN0IExPR0JPT0tfRVhUUkFDVElPTl9QUk9NUFQgPSBgXG5Zb3UgYXJlIGFuIGV4cGVydCBhdCBwYXJzaW5nIHBpbG90IGxvZ2Jvb2sgcGFnZXMuIEV4dHJhY3QgRVZFUlkgZmxpZ2h0IGVudHJ5IGZyb20gdGhlIHRhYmxlLlxuXG5JTVBPUlRBTlQ6IExvZ2Jvb2tzIGhhdmUgbWFueSBjb2x1bW5zIGZvciBkaWZmZXJlbnQgaG91ciB0eXBlcy4gTG9vayBmb3IgQUxMIG9mIHRoZXNlOlxuXG5SRVFVSVJFRCBGSUVMRFMgKGV4dHJhY3QgaWYgdmlzaWJsZSk6XG4tIGRhdGU6IEZsaWdodCBkYXRlIChZWVlZLU1NLUREIGZvcm1hdClcbi0gYWlyY3JhZnRJZGVudDogVGFpbCBudW1iZXIgKGUuZy4sIE4xMjM0NSwgTjUzOTJSKVxuLSBhaXJjcmFmdFR5cGU6IE1ha2UvbW9kZWwgKGUuZy4sIEMxNzIsIFBBLTI4LCBTUjIyKVxuLSBmcm9tOiBEZXBhcnR1cmUgYWlycG9ydCAoNC1sZXR0ZXIgSUNBTyBwcmVmZXJyZWQsIGUuZy4sIEtKRkspXG4tIHRvOiBEZXN0aW5hdGlvbiBhaXJwb3J0XG4tIHJvdXRlOiBGdWxsIHJvdXRlIGlmIG11bHRpLWxlZyAoZS5nLiwgXCJLSkZLLUtCT1MtS0pGS1wiKVxuXG5IT1VSIENPTFVNTlMgKGV4dHJhY3QgQUxMIHRoYXQgYXJlIHZpc2libGUsIHVzZSBkZWNpbWFsIGhvdXJzIGxpa2UgMS41KTpcbi0gdG90YWxUaW1lOiBUb3RhbCBmbGlnaHQgdGltZSAoU0VMLCBNRUwsIG9yIHRvdGFsIGNvbHVtbilcbi0gc2VsOiBTaW5nbGUgRW5naW5lIExhbmQgdGltZVxuLSBtZWw6IE11bHRpIEVuZ2luZSBMYW5kIHRpbWVcbi0gcGljOiBQaWxvdCBJbiBDb21tYW5kIHRpbWVcbi0gc2ljOiBTZWNvbmQgSW4gQ29tbWFuZCB0aW1lXG4tIHNvbG86IFNvbG8gZmxpZ2h0IHRpbWVcbi0gZHVhbFJlY2VpdmVkOiBJbnN0cnVjdGlvbiByZWNlaXZlZCB0aW1lXG4tIGR1YWxHaXZlbjogSW5zdHJ1Y3Rpb24gZ2l2ZW4gKENGSSkgdGltZVxuLSBjcm9zc0NvdW50cnk6IENyb3NzLWNvdW50cnkgdGltZSAoWEMpXG4tIG5pZ2h0OiBOaWdodCBmbHlpbmcgdGltZVxuLSBhY3R1YWxJbnN0cnVtZW50OiBBY3R1YWwgSU1DIHRpbWVcbi0gc2ltdWxhdGVkSW5zdHJ1bWVudDogU2ltdWxhdGVkL2hvb2QgaW5zdHJ1bWVudCB0aW1lXG4tIGZsaWdodFNpbTogU2ltdWxhdG9yL0FBVEQvQkFURCB0aW1lXG4tIGdyb3VuZFRyYWluZXI6IEdyb3VuZCB0cmFpbmVyIHRpbWVcblxuTEFORElOR1MgKGxvb2sgZm9yIGRheS9uaWdodCBjb2x1bW5zKTpcbi0gbGFuZGluZ3NEYXk6IE51bWJlciBvZiBkYXkgbGFuZGluZ3Ncbi0gbGFuZGluZ3NOaWdodDogTnVtYmVyIG9mIG5pZ2h0IGxhbmRpbmdzXG4tIGxhbmRpbmdzRnVsbFN0b3A6IEZ1bGwgc3RvcCBsYW5kaW5ncyBpZiBzZXBhcmF0ZVxuXG5SRU1BUktTIChjcml0aWNhbCAtIGNhcHR1cmUgZXZlcnl0aGluZyk6XG4tIHJlbWFya3M6IEFMTCB0ZXh0IGZyb20gcmVtYXJrcyBjb2x1bW4gaW5jbHVkaW5nOlxuICAtIEluc3RydWN0b3Igc2lnbmF0dXJlcy9uYW1lc1xuICAtIEVuZG9yc2VtZW50cyBnaXZlbi9yZWNlaXZlZFxuICAtIEFwcHJvYWNoIHR5cGVzIChJTFMsIFZPUiwgR1BTLCBMT0MpXG4gIC0gTnVtYmVyIG9mIGFwcHJvYWNoZXNcbiAgLSBIb2xkc1xuICAtIE5pZ2h0IGN1cnJlbmN5IG5vdGVcbiAgLSBDaGVja3JpZGUgbm90ZXNcbiAgLSBBbnkgb3RoZXIgY29tbWVudHNcblxuT1VUUFVUIEZPUk1BVDpcblJldHVybiBhIEpTT04gYXJyYXkgd2hlcmUgZWFjaCBmbGlnaHQgaXMgYW4gb2JqZWN0LiBJbmNsdWRlIE9OTFkgZmllbGRzIHRoYXQgaGF2ZSB2YWx1ZXMuXG5QYXJzZSBFVkVSWSByb3cgLSBkbyBub3Qgc2tpcCBhbnkgZW50cmllcy4gSWYgaGFuZHdyaXRpbmcgaXMgdW5jbGVhciwgbWFrZSB5b3VyIGJlc3QgZ3Vlc3MuXG5cbkV4YW1wbGU6XG5bXG4gIHtcbiAgICBcImRhdGVcIjogXCIyMDI0LTAxLTE1XCIsXG4gICAgXCJhaXJjcmFmdElkZW50XCI6IFwiTjUzOTJSXCIsXG4gICAgXCJhaXJjcmFmdFR5cGVcIjogXCJDMTcyXCIsXG4gICAgXCJmcm9tXCI6IFwiS0pGS1wiLFxuICAgIFwidG9cIjogXCJLQk9TXCIsXG4gICAgXCJ0b3RhbFRpbWVcIjogMi41LFxuICAgIFwic2VsXCI6IDIuNSxcbiAgICBcInBpY1wiOiAyLjUsXG4gICAgXCJjcm9zc0NvdW50cnlcIjogMi41LFxuICAgIFwibGFuZGluZ3NEYXlcIjogMSxcbiAgICBcInJlbWFya3NcIjogXCJYQyB0byBCb3N0b24uIDEgSUxTIGFwcHJvYWNoIFJXWSA0Ui4gSi4gU21pdGggLSBDRklcIlxuICB9LFxuICB7XG4gICAgXCJkYXRlXCI6IFwiMjAyNC0wMS0xNlwiLFxuICAgIFwiYWlyY3JhZnRJZGVudFwiOiBcIk41MzkyUlwiLFxuICAgIFwiYWlyY3JhZnRUeXBlXCI6IFwiQzE3MlwiLFxuICAgIFwiZnJvbVwiOiBcIktCT1NcIixcbiAgICBcInRvXCI6IFwiS0pGS1wiLFxuICAgIFwidG90YWxUaW1lXCI6IDIuMyxcbiAgICBcInNlbFwiOiAyLjMsXG4gICAgXCJwaWNcIjogMi4zLFxuICAgIFwibmlnaHRcIjogMS41LFxuICAgIFwiYWN0dWFsSW5zdHJ1bWVudFwiOiAwLjUsXG4gICAgXCJjcm9zc0NvdW50cnlcIjogMi4zLFxuICAgIFwibGFuZGluZ3NOaWdodFwiOiAxLFxuICAgIFwicmVtYXJrc1wiOiBcIk5pZ2h0IFhDIHJldHVybi4gMiBWT1IgYXBwcm9hY2hlcy4gSU1DIGZvciAzMCBtaW5cIlxuICB9XG5dXG5gO1xuXG5jb25zdCBNQUlOVEVOQU5DRV9FWFRSQUNUSU9OX1BST01QVCA9IGBcbkV4dHJhY3QgYWlyY3JhZnQgbWFpbnRlbmFuY2UgbG9nIGVudHJpZXMgZnJvbSB0aGlzIGRvY3VtZW50LiBGb3IgZWFjaCBtYWludGVuYW5jZSBlbnRyeSwgaWRlbnRpZnk6XG4tIERhdGUgb2YgbWFpbnRlbmFuY2Vcbi0gRGVzY3JpcHRpb24gb2Ygd29yayBwZXJmb3JtZWRcbi0gSG9iYnMgdGltZSAoaWYgbGlzdGVkKVxuLSBUYWNoIHRpbWUgKGlmIGxpc3RlZClcbi0gTWVjaGFuaWMgbmFtZSBvciBzaWduYXR1cmVcbi0gU2lnbi1vZmYvYXBwcm92YWwgc3RhdHVzXG5cbkFsc28gZXh0cmFjdCBhbnkgaW5zcGVjdGlvbiBkYXRlcyBzdWNoIGFzOlxuLSBBbm51YWwgaW5zcGVjdGlvbiBkYXRlXG4tIDEwMC1ob3VyIGluc3BlY3Rpb24gZGF0ZVxuLSBUcmFuc3BvbmRlciBjaGVjayBkYXRlXG4tIFN0YXRpYyBzeXN0ZW0gY2hlY2sgZGF0ZVxuXG5SZXR1cm4gc3RydWN0dXJlZCBkYXRhIHdpdGggYWxsIGVudHJpZXMgYW5kIGRhdGVzIGZvdW5kLlxuYDtcblxuY29uc3QgUE9IX0VYVFJBQ1RJT05fUFJPTVBUID0gYFxuRXh0cmFjdCBvcGVyYXRpbmcgbGltaXRzIGFuZCBzcGVjaWZpY2F0aW9ucyBmcm9tIHRoaXMgUGlsb3QgT3BlcmF0aW5nIEhhbmRib29rIChQT0gpLlxuU3BlY2lmaWNhbGx5IGV4dHJhY3Q6XG4xLiBWLVNwZWVkcyAoaW4gS25vdHMpOlxuICAgLSBWc28gKFN0YWxsIHNwZWVkIGluIGxhbmRpbmcgY29uZmlndXJhdGlvbilcbiAgIC0gVnMxIChTdGFsbCBzcGVlZCBpbiBjbGVhbiBjb25maWd1cmF0aW9uKVxuICAgLSBWciAoUm90YXRpb24gc3BlZWQpXG4gICAtIFZ4IChCZXN0IGFuZ2xlIG9mIGNsaW1iKVxuICAgLSBWeSAoQmVzdCByYXRlIG9mIGNsaW1iKVxuICAgLSBWZmUgKE1heGltdW0gZmxhcCBleHRlbmRlZCBzcGVlZClcbiAgIC0gVmEgKE1hbmV1dmVyaW5nIHNwZWVkKVxuICAgLSBWbm8gKE1heCBzdHJ1Y3R1cmFsIGNydWlzaW5nIHNwZWVkKVxuICAgLSBWbmUgKE5ldmVyIGV4Y2VlZCBzcGVlZClcblxuMi4gV2VpZ2h0cyAoaW4gbGJzKTpcbiAgIC0gTWF4IEdyb3NzIFdlaWdodFxuICAgLSBTdGFuZGFyZCBFbXB0eSBXZWlnaHRcbiAgIC0gVXNlZnVsIExvYWRcbiAgIC0gRnVlbCBDYXBhY2l0eSAoVG90YWwgYW5kIFVzYWJsZSBpbiBnYWxsb25zKVxuXG5SZXR1cm4gYXMgYSBKU09OIG9iamVjdCB3aXRoIGtleXM6IHZTcGVlZHMgKG9iamVjdCB3aXRoIGtleXMgYWJvdmUgY2FtZWxDYXNlKSwgd2VpZ2h0cyAob2JqZWN0IHdpdGgga2V5cyBhYm92ZSBjYW1lbENhc2UpLlxuYDtcblxuLy8gUGFyc2UgUE9IIGZyb20gVVJMXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGFyc2VQT0hGcm9tVXJsKHBvaFVybDogc3RyaW5nKTogUHJvbWlzZTxSZWR1Y3RvUmVzcG9uc2U+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5SRURVQ1RPX0FQSV9LRVk7XG5cbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnUmVkdWN0byBBUEkga2V5IG5vdCBjb25maWd1cmVkJyB9O1xuICAgIH1cblxuICAgIC8vIDEuIEZldGNoIFBERiBtYW51YWxseSB0byBhdm9pZCBSZWR1Y3RvIGRvd25sb2FkIGlzc3Vlc1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocG9oVXJsKTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBQT0ggUERGOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xuICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyKTtcblxuICAgIGNvbnN0IGNsaWVudCA9IG5ldyBSZWR1Y3RvKHsgYXBpS2V5IH0pO1xuXG4gICAgLy8gMi4gVXBsb2FkXG4gICAgY29uc3QgdXBsb2FkID0gYXdhaXQgY2xpZW50LnVwbG9hZCh7XG4gICAgICBmaWxlOiBhd2FpdCB0b0ZpbGUoYnVmZmVyLCAncG9oLnBkZicpLFxuICAgICAgZXh0ZW5zaW9uOiAncGRmJ1xuICAgIH0pO1xuXG4gICAgLy8gMy4gRXh0cmFjdFxuICAgIGNvbnN0IGV4dHJhY3Rpb24gPSBhd2FpdCBjbGllbnQuZXh0cmFjdC5ydW4oe1xuICAgICAgaW5wdXQ6IHVwbG9hZCxcbiAgICAgIGluc3RydWN0aW9uczoge1xuICAgICAgICBzeXN0ZW1fcHJvbXB0OiBQT0hfRVhUUkFDVElPTl9QUk9NUFRcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICgnam9iX2lkJyBpbiBleHRyYWN0aW9uICYmICEoJ3Jlc3VsdCcgaW4gZXh0cmFjdGlvbikpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FzeW5jIGpvYiBJRCByZXR1cm5lZCcgfTtcbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSAoZXh0cmFjdGlvbiBhcyBhbnkpLnJlc3VsdDtcbiAgICBjb25zdCBkYXRhID0gcmVzICYmIHJlcy5sZW5ndGggPiAwID8gcmVzWzBdIDoge307XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZG9jdW1lbnRUeXBlOiAndW5rbm93bicsXG4gICAgICAgIGV4dHJhY3RlZERhdGE6IGRhdGEgYXMgUmVjb3JkPHN0cmluZywgYW55PixcbiAgICAgICAgY29uZmlkZW5jZTogMS4wLFxuICAgICAgICByYXdUZXh0OiAnJyxcbiAgICAgIH1cbiAgICB9O1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUE9IIHBhcnNpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlIH07XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgeyBSZWR1Y3RvUmVzcG9uc2UsIFBhcnNlZERvY3VtZW50IH07XG5cbmV4cG9ydCBmdW5jdGlvbiBhZ2dyZWdhdGVMb2dib29rSG91cnMoZW50cmllczogTG9nYm9va0VudHJ5W10pOiB7XG4gIHRvdGFsSG91cnM6IG51bWJlcjtcbiAgcGljSG91cnM6IG51bWJlcjtcbiAgbmlnaHRIb3VyczogbnVtYmVyO1xuICBpZnJIb3VyczogbnVtYmVyO1xuICBsYXN0OTBEYXlzSG91cnM6IG51bWJlcjtcbiAgbGFzdDMwRGF5c0hvdXJzOiBudW1iZXI7XG59IHtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgbmluZXR5RGF5c0FnbyA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSA5MCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICBjb25zdCB0aGlydHlEYXlzQWdvID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG5cbiAgbGV0IHRvdGFsSG91cnMgPSAwO1xuICBsZXQgcGljSG91cnMgPSAwO1xuICBsZXQgbmlnaHRIb3VycyA9IDA7XG4gIGxldCBpZnJIb3VycyA9IDA7XG4gIGxldCBsYXN0OTBEYXlzSG91cnMgPSAwO1xuICBsZXQgbGFzdDMwRGF5c0hvdXJzID0gMDtcblxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGVudHJ5LmR1cmF0aW9uIHx8IDA7XG4gICAgdG90YWxIb3VycyArPSBkdXJhdGlvbjtcblxuICAgIC8vIFNpbXBsZSBoZXVyaXN0aWNzIHNpbmNlIG91ciBiYXNpYyBwcm9tcHQgbWlnaHQgbm90IGNhcHR1cmUgZXZlcnkgY29sdW1uXG4gICAgLy8gQXNzdW1lIGlmIGl0J3MgaW4gdGhlIGxvZ2Jvb2ssIGl0IGNvbnRyaWJ1dGVzIHRvIHRvdGFsLlxuICAgIC8vIFdlJ2xsIGVzdGltYXRlIFBJQyBhcyAxMDAlIGZvciBub3cgdW5sZXNzIGRlZmluZWQgb3RoZXJ3aXNlIChvZnRlbiBzYWZlIGZvciBwcml2YXRlIGxvZ2Jvb2tzIHVwbG9hZGVkIGJ5IG93bmVyKVxuICAgIC8vIFJlYWwgcGFyc2luZyB3b3VsZCBsb29rIGZvciBzcGVjaWZpYyBjb2x1bW5zLlxuICAgIHBpY0hvdXJzICs9IGR1cmF0aW9uO1xuXG4gICAgLy8gQ2hlY2sgcmVtYXJrcyBmb3IgXCJOaWdodFwiIG9yIFwiSUZSXCIga2V5d29yZHMgaWYgZXhwbGljaXQgY29sdW1ucyBtaXNzaW5nXG4gICAgY29uc3QgcmVtYXJrcyA9IChlbnRyeS5yZW1hcmtzIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKHJlbWFya3MuaW5jbHVkZXMoJ25pZ2h0JykpIHtcbiAgICAgIG5pZ2h0SG91cnMgKz0gZHVyYXRpb247XG4gICAgfVxuXG4gICAgaWYgKHJlbWFya3MuaW5jbHVkZXMoJ2lmcicpIHx8IHJlbWFya3MuaW5jbHVkZXMoJ2ltYycpIHx8IHJlbWFya3MuaW5jbHVkZXMoJ2FwcHJvYWNoJykpIHtcbiAgICAgIGlmckhvdXJzICs9IGR1cmF0aW9uO1xuICAgIH1cblxuICAgIC8vIERhdGUgYmFzZWQgY2FsY1xuICAgIGlmIChlbnRyeS5kYXRlKSB7XG4gICAgICBjb25zdCBlbnRyeURhdGUgPSBuZXcgRGF0ZShlbnRyeS5kYXRlKTtcbiAgICAgIGlmICghaXNOYU4oZW50cnlEYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgICAgaWYgKGVudHJ5RGF0ZSA+PSBuaW5ldHlEYXlzQWdvKSBsYXN0OTBEYXlzSG91cnMgKz0gZHVyYXRpb247XG4gICAgICAgIGlmIChlbnRyeURhdGUgPj0gdGhpcnR5RGF5c0FnbykgbGFzdDMwRGF5c0hvdXJzICs9IGR1cmF0aW9uO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdG90YWxIb3VycyxcbiAgICBwaWNIb3VycyxcbiAgICBuaWdodEhvdXJzLFxuICAgIGlmckhvdXJzLFxuICAgIGxhc3Q5MERheXNIb3VycyxcbiAgICBsYXN0MzBEYXlzSG91cnNcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJSZWR1Y3RvIiwidG9GaWxlIiwicGFyc2VEb2N1bWVudCIsImZpbGVCYXNlNjQiLCJmaWxlVHlwZSIsImRvY3VtZW50VHlwZSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJSRURVQ1RPX0FQSV9LRVkiLCJjb25zb2xlIiwid2FybiIsInN1Y2Nlc3MiLCJlcnJvciIsImNsaWVudCIsImZpbGVCdWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwidXBsb2FkIiwiZmlsZSIsImV4dGVuc2lvbiIsInByb21wdCIsIkxPR0JPT0tfRVhUUkFDVElPTl9QUk9NUFQiLCJNQUlOVEVOQU5DRV9FWFRSQUNUSU9OX1BST01QVCIsImV4dHJhY3Rpb24iLCJleHRyYWN0IiwicnVuIiwiaW5wdXQiLCJpbnN0cnVjdGlvbnMiLCJzeXN0ZW1fcHJvbXB0Iiwic2V0dGluZ3MiLCJvcHRpbWl6ZV9mb3JfbGF0ZW5jeSIsIml0ZW1zIiwicmVzdWx0IiwiZXh0cmFjdGVkRGF0YSIsImVudHJpZXMiLCJkYXRhIiwiY29uZmlkZW5jZSIsInJhd1RleHQiLCJtZXNzYWdlIiwicHJvY2Vzc0V4dHJhY3RlZERhdGEiLCJyYXdSZXN1bHQiLCJleHRyYWN0ZWRUZXh0IiwidGV4dCIsImV4dHJhY3RlZF90ZXh0IiwidGFibGVzIiwic3RydWN0dXJlZERhdGEiLCJzdHJ1Y3R1cmVkX2RhdGEiLCJwYXJzZUxvZ2Jvb2tEYXRhIiwicGFyc2VNYWludGVuYW5jZURhdGEiLCJzdHJ1Y3R1cmVkIiwiZW50cnkiLCJwdXNoIiwiZGF0ZSIsImFpcmNyYWZ0IiwidGFpbF9udW1iZXIiLCJyb3V0ZSIsImZyb21fdG8iLCJkdXJhdGlvbiIsInBhcnNlRmxvYXQiLCJ0b3RhbF90aW1lIiwicmVtYXJrcyIsIm5vdGVzIiwibGVuZ3RoIiwidGFibGUiLCJoZWFkZXJzIiwicm93cyIsInJvdyIsImZvckVhY2giLCJoZWFkZXIiLCJpZHgiLCJ2YWx1ZSIsImhlYWRlckxvd2VyIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsIm1haW50ZW5hbmNlX2l0ZW1zIiwiZGVzY3JpcHRpb24iLCJ3b3JrX3BlcmZvcm1lZCIsImhvYmJzVGltZSIsImhvYmJzIiwiaG9iYnNfdGltZSIsInVuZGVmaW5lZCIsInRhY2hUaW1lIiwidGFjaCIsInRhY2hfdGltZSIsIm1lY2hhbmljIiwidGVjaG5pY2lhbiIsInNpZ25PZmYiLCJzaWduX29mZiIsInNpZ25lZCIsImFubnVhbF9kYXRlIiwibGFzdF9hbm51YWwiLCJQT0hfRVhUUkFDVElPTl9QUk9NUFQiLCJwYXJzZVBPSEZyb21VcmwiLCJwb2hVcmwiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsInJlcyIsImFnZ3JlZ2F0ZUxvZ2Jvb2tIb3VycyIsIm5vdyIsIkRhdGUiLCJuaW5ldHlEYXlzQWdvIiwiZ2V0VGltZSIsInRoaXJ0eURheXNBZ28iLCJ0b3RhbEhvdXJzIiwicGljSG91cnMiLCJuaWdodEhvdXJzIiwiaWZySG91cnMiLCJsYXN0OTBEYXlzSG91cnMiLCJsYXN0MzBEYXlzSG91cnMiLCJlbnRyeURhdGUiLCJpc05hTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/reductoService.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/node-fetch","vendor-chunks/reductoai","vendor-chunks/web-streams-polyfill","vendor-chunks/event-target-shim","vendor-chunks/agentkeepalive","vendor-chunks/form-data-encoder","vendor-chunks/abort-controller","vendor-chunks/ms","vendor-chunks/humanize-ms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faircraft%2Froute&page=%2Fapi%2Faircraft%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faircraft%2Froute.ts&appDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();