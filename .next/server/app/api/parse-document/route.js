"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/parse-document/route";
exports.ids = ["app/api/parse-document/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fparse-document%2Froute&page=%2Fapi%2Fparse-document%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fparse-document%2Froute.ts&appDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fparse-document%2Froute&page=%2Fapi%2Fparse-document%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fparse-document%2Froute.ts&appDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_ahmed_Documents_GitHub_LogHacker_app_api_parse_document_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/parse-document/route.ts */ \"(rsc)/./app/api/parse-document/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/parse-document/route\",\n        pathname: \"/api/parse-document\",\n        filename: \"route\",\n        bundlePath: \"app/api/parse-document/route\"\n    },\n    resolvedPagePath: \"/Users/ahmed/Documents/GitHub/LogHacker/app/api/parse-document/route.ts\",\n    nextConfigOutput,\n    userland: _Users_ahmed_Documents_GitHub_LogHacker_app_api_parse_document_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/parse-document/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwYXJzZS1kb2N1bWVudCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcGFyc2UtZG9jdW1lbnQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwYXJzZS1kb2N1bWVudCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFobWVkJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGTG9nSGFja2VyJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmFobWVkJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGTG9nSGFja2VyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN1QjtBQUNwRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2F2aWF0aW9uLWludGVsbGlnZW5jZS1icmFpbi8/NjE0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvYWhtZWQvRG9jdW1lbnRzL0dpdEh1Yi9Mb2dIYWNrZXIvYXBwL2FwaS9wYXJzZS1kb2N1bWVudC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcGFyc2UtZG9jdW1lbnQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wYXJzZS1kb2N1bWVudFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcGFyc2UtZG9jdW1lbnQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvYWhtZWQvRG9jdW1lbnRzL0dpdEh1Yi9Mb2dIYWNrZXIvYXBwL2FwaS9wYXJzZS1kb2N1bWVudC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcGFyc2UtZG9jdW1lbnQvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fparse-document%2Froute&page=%2Fapi%2Fparse-document%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fparse-document%2Froute.ts&appDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/parse-document/route.ts":
/*!*****************************************!*\
  !*** ./app/api/parse-document/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_services_reductoService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/services/reductoService */ \"(rsc)/./lib/services/reductoService.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_models_Aircraft__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/models/Aircraft */ \"(rsc)/./lib/models/Aircraft.ts\");\n/* harmony import */ var _lib_models_Pilot__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/models/Pilot */ \"(rsc)/./lib/models/Pilot.ts\");\n/* harmony import */ var _lib_models_ParsedDocument__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/models/ParsedDocument */ \"(rsc)/./lib/models/ParsedDocument.ts\");\n\n\n\n\n\n\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { fileBase64, fileType, documentType, aircraftId, pilotId, filename, background } = body;\n        if (!fileBase64 || !fileType || !documentType) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Missing required fields: fileBase64, fileType, documentType\"\n            }, {\n                status: 400\n            });\n        }\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        // Create a pending document record\n        const doc = await _lib_models_ParsedDocument__WEBPACK_IMPORTED_MODULE_5__[\"default\"].create({\n            filename: filename || `${documentType}_${Date.now()}.${fileType}`,\n            documentType,\n            fileType,\n            status: \"pending\",\n            aircraft: aircraftId || undefined,\n            pilot: pilotId || undefined,\n            fileBase64: background ? fileBase64 : undefined\n        });\n        // If background mode, return immediately with doc ID\n        if (background) {\n            // Fire off parsing in background (not awaited)\n            processDocumentInBackground(doc._id.toString(), fileBase64, fileType, documentType, aircraftId, pilotId);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: {\n                    documentId: doc._id,\n                    status: \"pending\",\n                    message: \"Parsing started in background\"\n                }\n            });\n        }\n        // Synchronous parsing\n        doc.status = \"parsing\";\n        await doc.save();\n        const result = await (0,_lib_services_reductoService__WEBPACK_IMPORTED_MODULE_1__.parseDocument)(fileBase64, fileType, documentType);\n        if (!result.success) {\n            doc.status = \"failed\";\n            doc.error = result.error;\n            await doc.save();\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: result.error,\n                documentId: doc._id\n            }, {\n                status: 500\n            });\n        }\n        // Save parsed results\n        const entries = result.data?.extractedData?.entries || (Array.isArray(result.data?.extractedData) ? result.data?.extractedData : []);\n        doc.status = \"completed\";\n        doc.parsedAt = new Date();\n        doc.rawOutput = result.data?.extractedData;\n        doc.entries = entries;\n        doc.summary = calculateSummary(entries);\n        await doc.save();\n        // If aircraft linked and maintenance type, update aircraft\n        if (aircraftId && documentType === \"maintenance\" && entries.length > 0) {\n            await updateAircraftFromParsedData(aircraftId, entries, result.data?.extractedData);\n        }\n        // If pilot linked and logbook type, update pilot\n        if (pilotId && documentType === \"logbook\") {\n            await updatePilotFromParsedData(pilotId, entries);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                documentId: doc._id,\n                entries,\n                summary: doc.summary,\n                rawOutput: doc.rawOutput\n            }\n        });\n    } catch (error) {\n        console.error(\"Document parsing error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// GET: List all parsed documents\nasync function GET(request) {\n    try {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        const { searchParams } = new URL(request.url);\n        const aircraftId = searchParams.get(\"aircraftId\");\n        const documentType = searchParams.get(\"documentType\");\n        const status = searchParams.get(\"status\");\n        const query = {};\n        if (aircraftId) query.aircraft = aircraftId;\n        if (documentType) query.documentType = documentType;\n        if (status) query.status = status;\n        const documents = await _lib_models_ParsedDocument__WEBPACK_IMPORTED_MODULE_5__[\"default\"].find(query).select(\"-fileBase64 -rawOutput\") // Don't send large fields in list\n        .sort({\n            uploadedAt: -1\n        }).limit(100).lean();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: documents\n        });\n    } catch (error) {\n        console.error(\"Error fetching parsed documents:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// Background processing function\nasync function processDocumentInBackground(docId, fileBase64, fileType, documentType, aircraftId, pilotId) {\n    try {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        const doc = await _lib_models_ParsedDocument__WEBPACK_IMPORTED_MODULE_5__[\"default\"].findById(docId);\n        if (!doc) return;\n        doc.status = \"parsing\";\n        await doc.save();\n        const result = await (0,_lib_services_reductoService__WEBPACK_IMPORTED_MODULE_1__.parseDocument)(fileBase64, fileType, documentType);\n        if (!result.success) {\n            doc.status = \"failed\";\n            doc.error = result.error;\n            await doc.save();\n            return;\n        }\n        const entries = result.data?.extractedData?.entries || (Array.isArray(result.data?.extractedData) ? result.data?.extractedData : []);\n        doc.status = \"completed\";\n        doc.parsedAt = new Date();\n        doc.rawOutput = result.data?.extractedData;\n        doc.entries = entries;\n        doc.summary = calculateSummary(entries);\n        doc.fileBase64 = undefined; // Clear stored file after successful parse\n        await doc.save();\n        // Update aircraft if linked\n        if (aircraftId && documentType === \"maintenance\" && entries.length > 0) {\n            await updateAircraftFromParsedData(aircraftId, entries, result.data?.extractedData);\n        }\n        // Update pilot if linked\n        if (pilotId && documentType === \"logbook\") {\n            await updatePilotFromParsedData(pilotId, entries);\n        }\n    } catch (error) {\n        console.error(\"Background parsing error:\", error);\n        try {\n            await _lib_models_ParsedDocument__WEBPACK_IMPORTED_MODULE_5__[\"default\"].findByIdAndUpdate(docId, {\n                status: \"failed\",\n                error: error.message\n            });\n        } catch  {}\n    }\n}\nfunction calculateSummary(entries) {\n    if (!entries || entries.length === 0) {\n        return {\n            totalEntries: 0\n        };\n    }\n    const totalHours = entries.reduce((sum, e)=>sum + (e.totalTime || e.duration || 0), 0);\n    const dates = entries.map((e)=>e.date).filter(Boolean).sort();\n    return {\n        totalEntries: entries.length,\n        totalHours: Math.round(totalHours * 10) / 10,\n        dateRange: dates.length > 0 ? {\n            from: dates[0],\n            to: dates[dates.length - 1]\n        } : undefined\n    };\n}\nasync function updateAircraftFromParsedData(aircraftId, entries, extractedData) {\n    const aircraft = await _lib_models_Aircraft__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findById(aircraftId);\n    if (!aircraft) return;\n    // Add maintenance entries to logs\n    const newLogs = entries.map((entry)=>({\n            date: entry.date ? new Date(entry.date) : new Date(),\n            description: entry.description || entry.workPerformed || \"Maintenance entry\",\n            hobbsTime: entry.hobbsTime || entry.hobbs,\n            tachTime: entry.tachTime || entry.tach,\n            mechanic: entry.mechanic || entry.signedBy\n        })).filter((log)=>log.description);\n    if (newLogs.length > 0) {\n        aircraft.logs.push(...newLogs);\n    }\n    // Update maintenance dates from extracted data\n    if (extractedData?.annualDate) {\n        aircraft.maintenanceDates.annual = new Date(extractedData.annualDate);\n    }\n    if (extractedData?.transponderDate) {\n        aircraft.maintenanceDates.transponder = new Date(extractedData.transponderDate);\n    }\n    if (extractedData?.staticSystemDate) {\n        aircraft.maintenanceDates.staticSystem = new Date(extractedData.staticSystemDate);\n    }\n    // Update hobbs/tach if found\n    const latestEntry = entries[entries.length - 1];\n    if (latestEntry?.hobbsTime && latestEntry.hobbsTime > aircraft.currentHours.hobbs) {\n        aircraft.currentHours.hobbs = latestEntry.hobbsTime;\n    }\n    if (latestEntry?.tachTime && latestEntry.tachTime > aircraft.currentHours.tach) {\n        aircraft.currentHours.tach = latestEntry.tachTime;\n    }\n    await aircraft.save();\n}\nasync function updatePilotFromParsedData(pilotId, entries) {\n    const pilot = await _lib_models_Pilot__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findById(pilotId);\n    if (!pilot) return;\n    // Handle nested flights structure from Reducto\n    let flatEntries = entries;\n    if (entries.length === 1 && entries[0].flights) {\n        flatEntries = entries[0].flights;\n    }\n    // Convert parsed entries to flight format\n    const flightEntries = flatEntries.map((e)=>({\n            date: e.date || \"\",\n            aircraftIdent: e.aircraftIdent || e.aircraft || \"\",\n            aircraftType: e.aircraftType || \"\",\n            from: e.from || \"\",\n            to: e.to || \"\",\n            route: e.route || \"\",\n            totalTime: e.totalTime || e.duration || 0,\n            pic: e.pic || 0,\n            sic: e.sic || 0,\n            solo: e.solo || 0,\n            dualReceived: e.dualReceived || 0,\n            dualGiven: e.dualGiven || 0,\n            crossCountry: e.crossCountry || 0,\n            night: e.night || 0,\n            actualInstrument: e.actualInstrument || 0,\n            simulatedInstrument: e.simulatedInstrument || 0,\n            sel: e.sel || 0,\n            mel: e.mel || 0,\n            landingsDay: e.landingsFullStopDay || e.landingsDay || 0,\n            landingsNight: e.landingsFullStopNight || e.landingsNight || 0,\n            landingsTotal: e.landingsTotal || 0,\n            remarks: e.remarks || \"\"\n        })).filter((e)=>e.date && e.aircraftIdent);\n    // Replace all entries (full logbook upload replaces existing)\n    pilot.flightEntries = flightEntries;\n    // Calculate experience totals from all entries\n    const now = new Date();\n    const ninetyDaysAgo = new Date(now.getTime() - 90 * 24 * 60 * 60 * 1000);\n    const thirtyDaysAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n    let totalHours = 0, picHours = 0, nightHours = 0, ifrHours = 0, crossCountryHours = 0;\n    let last90DaysHours = 0, last30DaysHours = 0;\n    for (const entry of flightEntries){\n        totalHours += entry.totalTime;\n        picHours += entry.pic || 0;\n        nightHours += entry.night || 0;\n        ifrHours += (entry.actualInstrument || 0) + (entry.simulatedInstrument || 0);\n        crossCountryHours += entry.crossCountry || 0;\n        if (entry.date) {\n            const entryDate = new Date(entry.date);\n            if (!isNaN(entryDate.getTime())) {\n                if (entryDate >= ninetyDaysAgo) last90DaysHours += entry.totalTime;\n                if (entryDate >= thirtyDaysAgo) last30DaysHours += entry.totalTime;\n            }\n        }\n    }\n    pilot.experience = {\n        totalHours: Math.round(totalHours * 10) / 10,\n        picHours: Math.round(picHours * 10) / 10,\n        nightHours: Math.round(nightHours * 10) / 10,\n        ifrHours: Math.round(ifrHours * 10) / 10,\n        crossCountryHours: Math.round(crossCountryHours * 10) / 10,\n        last90DaysHours: Math.round(last90DaysHours * 10) / 10,\n        last30DaysHours: Math.round(last30DaysHours * 10) / 10\n    };\n    await pilot.save();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MkIsR0FBRyxJQUFJO1FBQ3pCcUIsY0FBY2hELE1BQU1pQyxLQUFLLElBQUk7UUFDN0JnQixZQUFZLENBQUNqRCxNQUFNa0MsZ0JBQWdCLElBQUksS0FBTWxDLENBQUFBLE1BQU1tQyxtQkFBbUIsSUFBSTtRQUMxRWUscUJBQXFCbEQsTUFBTWdDLFlBQVksSUFBSTtRQUUzQyxJQUFJaEMsTUFBTVQsSUFBSSxFQUFFO1lBQ2QsTUFBTThELFlBQVksSUFBSWhILEtBQUsyRCxNQUFNVCxJQUFJO1lBQ3JDLElBQUksQ0FBQytELE1BQU1ELFVBQVVSLE9BQU8sS0FBSztnQkFDL0IsSUFBSVEsYUFBYVQsZUFBZU8sbUJBQW1CbkQsTUFBTWIsU0FBUztnQkFDbEUsSUFBSWtFLGFBQWFQLGVBQWVNLG1CQUFtQnBELE1BQU1iLFNBQVM7WUFDcEU7UUFDRjtJQUNGO0lBRUExQyxNQUFNOEcsVUFBVSxHQUFHO1FBQ2pCeEUsWUFBWVcsS0FBS0MsS0FBSyxDQUFDWixhQUFhLE1BQU07UUFDMUNnRSxVQUFVckQsS0FBS0MsS0FBSyxDQUFDb0QsV0FBVyxNQUFNO1FBQ3RDQyxZQUFZdEQsS0FBS0MsS0FBSyxDQUFDcUQsYUFBYSxNQUFNO1FBQzFDQyxVQUFVdkQsS0FBS0MsS0FBSyxDQUFDc0QsV0FBVyxNQUFNO1FBQ3RDQyxtQkFBbUJ4RCxLQUFLQyxLQUFLLENBQUN1RCxvQkFBb0IsTUFBTTtRQUN4REMsaUJBQWlCekQsS0FBS0MsS0FBSyxDQUFDd0Qsa0JBQWtCLE1BQU07UUFDcERDLGlCQUFpQjFELEtBQUtDLEtBQUssQ0FBQ3lELGtCQUFrQixNQUFNO0lBQ3REO0lBRUEsTUFBTTNHLE1BQU1PLElBQUk7QUFDbEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdmlhdGlvbi1pbnRlbGxpZ2VuY2UtYnJhaW4vLi9hcHAvYXBpL3BhcnNlLWRvY3VtZW50L3JvdXRlLnRzP2EzYjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHBhcnNlRG9jdW1lbnQgfSBmcm9tICdAL2xpYi9zZXJ2aWNlcy9yZWR1Y3RvU2VydmljZSc7XG5pbXBvcnQgZGJDb25uZWN0IGZyb20gJ0AvbGliL2RiJztcbmltcG9ydCBBaXJjcmFmdCBmcm9tICdAL2xpYi9tb2RlbHMvQWlyY3JhZnQnO1xuaW1wb3J0IFBpbG90IGZyb20gJ0AvbGliL21vZGVscy9QaWxvdCc7XG5pbXBvcnQgUGFyc2VkRG9jdW1lbnQgZnJvbSAnQC9saWIvbW9kZWxzL1BhcnNlZERvY3VtZW50JztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBmaWxlQmFzZTY0LCBmaWxlVHlwZSwgZG9jdW1lbnRUeXBlLCBhaXJjcmFmdElkLCBwaWxvdElkLCBmaWxlbmFtZSwgYmFja2dyb3VuZCB9ID0gYm9keTtcblxuICAgIGlmICghZmlsZUJhc2U2NCB8fCAhZmlsZVR5cGUgfHwgIWRvY3VtZW50VHlwZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiBmaWxlQmFzZTY0LCBmaWxlVHlwZSwgZG9jdW1lbnRUeXBlJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgYXdhaXQgZGJDb25uZWN0KCk7XG5cbiAgICAvLyBDcmVhdGUgYSBwZW5kaW5nIGRvY3VtZW50IHJlY29yZFxuICAgIGNvbnN0IGRvYyA9IGF3YWl0IFBhcnNlZERvY3VtZW50LmNyZWF0ZSh7XG4gICAgICBmaWxlbmFtZTogZmlsZW5hbWUgfHwgYCR7ZG9jdW1lbnRUeXBlfV8ke0RhdGUubm93KCl9LiR7ZmlsZVR5cGV9YCxcbiAgICAgIGRvY3VtZW50VHlwZSxcbiAgICAgIGZpbGVUeXBlLFxuICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICBhaXJjcmFmdDogYWlyY3JhZnRJZCB8fCB1bmRlZmluZWQsXG4gICAgICBwaWxvdDogcGlsb3RJZCB8fCB1bmRlZmluZWQsXG4gICAgICBmaWxlQmFzZTY0OiBiYWNrZ3JvdW5kID8gZmlsZUJhc2U2NCA6IHVuZGVmaW5lZCwgLy8gU3RvcmUgZm9yIGJhY2tncm91bmQgcmUtcGFyc2luZyBpZiBuZWVkZWRcbiAgICB9KTtcblxuICAgIC8vIElmIGJhY2tncm91bmQgbW9kZSwgcmV0dXJuIGltbWVkaWF0ZWx5IHdpdGggZG9jIElEXG4gICAgaWYgKGJhY2tncm91bmQpIHtcbiAgICAgIC8vIEZpcmUgb2ZmIHBhcnNpbmcgaW4gYmFja2dyb3VuZCAobm90IGF3YWl0ZWQpXG4gICAgICBwcm9jZXNzRG9jdW1lbnRJbkJhY2tncm91bmQoZG9jLl9pZC50b1N0cmluZygpLCBmaWxlQmFzZTY0LCBmaWxlVHlwZSwgZG9jdW1lbnRUeXBlLCBhaXJjcmFmdElkLCBwaWxvdElkKTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogeyBkb2N1bWVudElkOiBkb2MuX2lkLCBzdGF0dXM6ICdwZW5kaW5nJywgbWVzc2FnZTogJ1BhcnNpbmcgc3RhcnRlZCBpbiBiYWNrZ3JvdW5kJyB9LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU3luY2hyb25vdXMgcGFyc2luZ1xuICAgIGRvYy5zdGF0dXMgPSAncGFyc2luZyc7XG4gICAgYXdhaXQgZG9jLnNhdmUoKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBhcnNlRG9jdW1lbnQoZmlsZUJhc2U2NCwgZmlsZVR5cGUsIGRvY3VtZW50VHlwZSk7XG5cbiAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICBkb2Muc3RhdHVzID0gJ2ZhaWxlZCc7XG4gICAgICBkb2MuZXJyb3IgPSByZXN1bHQuZXJyb3I7XG4gICAgICBhd2FpdCBkb2Muc2F2ZSgpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzdWx0LmVycm9yLCBkb2N1bWVudElkOiBkb2MuX2lkIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBTYXZlIHBhcnNlZCByZXN1bHRzXG4gICAgY29uc3QgZW50cmllcyA9IHJlc3VsdC5kYXRhPy5leHRyYWN0ZWREYXRhPy5lbnRyaWVzIHx8XG4gICAgICAoQXJyYXkuaXNBcnJheShyZXN1bHQuZGF0YT8uZXh0cmFjdGVkRGF0YSkgPyByZXN1bHQuZGF0YT8uZXh0cmFjdGVkRGF0YSA6IFtdKTtcblxuICAgIGRvYy5zdGF0dXMgPSAnY29tcGxldGVkJztcbiAgICBkb2MucGFyc2VkQXQgPSBuZXcgRGF0ZSgpO1xuICAgIGRvYy5yYXdPdXRwdXQgPSByZXN1bHQuZGF0YT8uZXh0cmFjdGVkRGF0YTtcbiAgICBkb2MuZW50cmllcyA9IGVudHJpZXM7XG4gICAgZG9jLnN1bW1hcnkgPSBjYWxjdWxhdGVTdW1tYXJ5KGVudHJpZXMpO1xuICAgIGF3YWl0IGRvYy5zYXZlKCk7XG5cbiAgICAvLyBJZiBhaXJjcmFmdCBsaW5rZWQgYW5kIG1haW50ZW5hbmNlIHR5cGUsIHVwZGF0ZSBhaXJjcmFmdFxuICAgIGlmIChhaXJjcmFmdElkICYmIGRvY3VtZW50VHlwZSA9PT0gJ21haW50ZW5hbmNlJyAmJiBlbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGF3YWl0IHVwZGF0ZUFpcmNyYWZ0RnJvbVBhcnNlZERhdGEoYWlyY3JhZnRJZCwgZW50cmllcywgcmVzdWx0LmRhdGE/LmV4dHJhY3RlZERhdGEpO1xuICAgIH1cblxuICAgIC8vIElmIHBpbG90IGxpbmtlZCBhbmQgbG9nYm9vayB0eXBlLCB1cGRhdGUgcGlsb3RcbiAgICBpZiAocGlsb3RJZCAmJiBkb2N1bWVudFR5cGUgPT09ICdsb2dib29rJykge1xuICAgICAgYXdhaXQgdXBkYXRlUGlsb3RGcm9tUGFyc2VkRGF0YShwaWxvdElkLCBlbnRyaWVzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZG9jdW1lbnRJZDogZG9jLl9pZCxcbiAgICAgICAgZW50cmllcyxcbiAgICAgICAgc3VtbWFyeTogZG9jLnN1bW1hcnksXG4gICAgICAgIHJhd091dHB1dDogZG9jLnJhd091dHB1dCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRG9jdW1lbnQgcGFyc2luZyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBHRVQ6IExpc3QgYWxsIHBhcnNlZCBkb2N1bWVudHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBkYkNvbm5lY3QoKTtcblxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBhaXJjcmFmdElkID0gc2VhcmNoUGFyYW1zLmdldCgnYWlyY3JhZnRJZCcpO1xuICAgIGNvbnN0IGRvY3VtZW50VHlwZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ2RvY3VtZW50VHlwZScpO1xuICAgIGNvbnN0IHN0YXR1cyA9IHNlYXJjaFBhcmFtcy5nZXQoJ3N0YXR1cycpO1xuXG4gICAgY29uc3QgcXVlcnk6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICBpZiAoYWlyY3JhZnRJZCkgcXVlcnkuYWlyY3JhZnQgPSBhaXJjcmFmdElkO1xuICAgIGlmIChkb2N1bWVudFR5cGUpIHF1ZXJ5LmRvY3VtZW50VHlwZSA9IGRvY3VtZW50VHlwZTtcbiAgICBpZiAoc3RhdHVzKSBxdWVyeS5zdGF0dXMgPSBzdGF0dXM7XG5cbiAgICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBQYXJzZWREb2N1bWVudC5maW5kKHF1ZXJ5KVxuICAgICAgLnNlbGVjdCgnLWZpbGVCYXNlNjQgLXJhd091dHB1dCcpIC8vIERvbid0IHNlbmQgbGFyZ2UgZmllbGRzIGluIGxpc3RcbiAgICAgIC5zb3J0KHsgdXBsb2FkZWRBdDogLTEgfSlcbiAgICAgIC5saW1pdCgxMDApXG4gICAgICAubGVhbigpO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogZG9jdW1lbnRzIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBhcnNlZCBkb2N1bWVudHM6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gQmFja2dyb3VuZCBwcm9jZXNzaW5nIGZ1bmN0aW9uXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzRG9jdW1lbnRJbkJhY2tncm91bmQoXG4gIGRvY0lkOiBzdHJpbmcsXG4gIGZpbGVCYXNlNjQ6IHN0cmluZyxcbiAgZmlsZVR5cGU6ICdwZGYnIHwgJ2ltYWdlJyxcbiAgZG9jdW1lbnRUeXBlOiAnbG9nYm9vaycgfCAnbWFpbnRlbmFuY2UnIHwgJ3BvaCcsXG4gIGFpcmNyYWZ0SWQ/OiBzdHJpbmcsXG4gIHBpbG90SWQ/OiBzdHJpbmdcbikge1xuICB0cnkge1xuICAgIGF3YWl0IGRiQ29ubmVjdCgpO1xuICAgIGNvbnN0IGRvYyA9IGF3YWl0IFBhcnNlZERvY3VtZW50LmZpbmRCeUlkKGRvY0lkKTtcbiAgICBpZiAoIWRvYykgcmV0dXJuO1xuXG4gICAgZG9jLnN0YXR1cyA9ICdwYXJzaW5nJztcbiAgICBhd2FpdCBkb2Muc2F2ZSgpO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGFyc2VEb2N1bWVudChmaWxlQmFzZTY0LCBmaWxlVHlwZSwgZG9jdW1lbnRUeXBlIGFzICdsb2dib29rJyB8ICdtYWludGVuYW5jZScpO1xuXG4gICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgZG9jLnN0YXR1cyA9ICdmYWlsZWQnO1xuICAgICAgZG9jLmVycm9yID0gcmVzdWx0LmVycm9yO1xuICAgICAgYXdhaXQgZG9jLnNhdmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBlbnRyaWVzID0gcmVzdWx0LmRhdGE/LmV4dHJhY3RlZERhdGE/LmVudHJpZXMgfHxcbiAgICAgIChBcnJheS5pc0FycmF5KHJlc3VsdC5kYXRhPy5leHRyYWN0ZWREYXRhKSA/IHJlc3VsdC5kYXRhPy5leHRyYWN0ZWREYXRhIDogW10pO1xuXG4gICAgZG9jLnN0YXR1cyA9ICdjb21wbGV0ZWQnO1xuICAgIGRvYy5wYXJzZWRBdCA9IG5ldyBEYXRlKCk7XG4gICAgZG9jLnJhd091dHB1dCA9IHJlc3VsdC5kYXRhPy5leHRyYWN0ZWREYXRhO1xuICAgIGRvYy5lbnRyaWVzID0gZW50cmllcztcbiAgICBkb2Muc3VtbWFyeSA9IGNhbGN1bGF0ZVN1bW1hcnkoZW50cmllcyk7XG4gICAgZG9jLmZpbGVCYXNlNjQgPSB1bmRlZmluZWQ7IC8vIENsZWFyIHN0b3JlZCBmaWxlIGFmdGVyIHN1Y2Nlc3NmdWwgcGFyc2VcbiAgICBhd2FpdCBkb2Muc2F2ZSgpO1xuXG4gICAgLy8gVXBkYXRlIGFpcmNyYWZ0IGlmIGxpbmtlZFxuICAgIGlmIChhaXJjcmFmdElkICYmIGRvY3VtZW50VHlwZSA9PT0gJ21haW50ZW5hbmNlJyAmJiBlbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGF3YWl0IHVwZGF0ZUFpcmNyYWZ0RnJvbVBhcnNlZERhdGEoYWlyY3JhZnRJZCwgZW50cmllcywgcmVzdWx0LmRhdGE/LmV4dHJhY3RlZERhdGEpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBwaWxvdCBpZiBsaW5rZWRcbiAgICBpZiAocGlsb3RJZCAmJiBkb2N1bWVudFR5cGUgPT09ICdsb2dib29rJykge1xuICAgICAgYXdhaXQgdXBkYXRlUGlsb3RGcm9tUGFyc2VkRGF0YShwaWxvdElkLCBlbnRyaWVzKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQmFja2dyb3VuZCBwYXJzaW5nIGVycm9yOicsIGVycm9yKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgUGFyc2VkRG9jdW1lbnQuZmluZEJ5SWRBbmRVcGRhdGUoZG9jSWQsIHtcbiAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcbiAgICAgICAgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCB7IH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVTdW1tYXJ5KGVudHJpZXM6IGFueVtdKSB7XG4gIGlmICghZW50cmllcyB8fCBlbnRyaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB7IHRvdGFsRW50cmllczogMCB9O1xuICB9XG5cbiAgY29uc3QgdG90YWxIb3VycyA9IGVudHJpZXMucmVkdWNlKChzdW0sIGUpID0+IHN1bSArIChlLnRvdGFsVGltZSB8fCBlLmR1cmF0aW9uIHx8IDApLCAwKTtcbiAgY29uc3QgZGF0ZXMgPSBlbnRyaWVzXG4gICAgLm1hcChlID0+IGUuZGF0ZSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgLnNvcnQoKTtcblxuICByZXR1cm4ge1xuICAgIHRvdGFsRW50cmllczogZW50cmllcy5sZW5ndGgsXG4gICAgdG90YWxIb3VyczogTWF0aC5yb3VuZCh0b3RhbEhvdXJzICogMTApIC8gMTAsXG4gICAgZGF0ZVJhbmdlOiBkYXRlcy5sZW5ndGggPiAwID8geyBmcm9tOiBkYXRlc1swXSwgdG86IGRhdGVzW2RhdGVzLmxlbmd0aCAtIDFdIH0gOiB1bmRlZmluZWQsXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFpcmNyYWZ0RnJvbVBhcnNlZERhdGEoXG4gIGFpcmNyYWZ0SWQ6IHN0cmluZyxcbiAgZW50cmllczogYW55W10sXG4gIGV4dHJhY3RlZERhdGE6IGFueVxuKSB7XG4gIGNvbnN0IGFpcmNyYWZ0ID0gYXdhaXQgQWlyY3JhZnQuZmluZEJ5SWQoYWlyY3JhZnRJZCk7XG4gIGlmICghYWlyY3JhZnQpIHJldHVybjtcblxuICAvLyBBZGQgbWFpbnRlbmFuY2UgZW50cmllcyB0byBsb2dzXG4gIGNvbnN0IG5ld0xvZ3MgPSBlbnRyaWVzLm1hcCgoZW50cnk6IGFueSkgPT4gKHtcbiAgICBkYXRlOiBlbnRyeS5kYXRlID8gbmV3IERhdGUoZW50cnkuZGF0ZSkgOiBuZXcgRGF0ZSgpLFxuICAgIGRlc2NyaXB0aW9uOiBlbnRyeS5kZXNjcmlwdGlvbiB8fCBlbnRyeS53b3JrUGVyZm9ybWVkIHx8ICdNYWludGVuYW5jZSBlbnRyeScsXG4gICAgaG9iYnNUaW1lOiBlbnRyeS5ob2Jic1RpbWUgfHwgZW50cnkuaG9iYnMsXG4gICAgdGFjaFRpbWU6IGVudHJ5LnRhY2hUaW1lIHx8IGVudHJ5LnRhY2gsXG4gICAgbWVjaGFuaWM6IGVudHJ5Lm1lY2hhbmljIHx8IGVudHJ5LnNpZ25lZEJ5LFxuICB9KSkuZmlsdGVyKGxvZyA9PiBsb2cuZGVzY3JpcHRpb24pO1xuXG4gIGlmIChuZXdMb2dzLmxlbmd0aCA+IDApIHtcbiAgICBhaXJjcmFmdC5sb2dzLnB1c2goLi4ubmV3TG9ncyk7XG4gIH1cblxuICAvLyBVcGRhdGUgbWFpbnRlbmFuY2UgZGF0ZXMgZnJvbSBleHRyYWN0ZWQgZGF0YVxuICBpZiAoZXh0cmFjdGVkRGF0YT8uYW5udWFsRGF0ZSkge1xuICAgIGFpcmNyYWZ0Lm1haW50ZW5hbmNlRGF0ZXMuYW5udWFsID0gbmV3IERhdGUoZXh0cmFjdGVkRGF0YS5hbm51YWxEYXRlKTtcbiAgfVxuICBpZiAoZXh0cmFjdGVkRGF0YT8udHJhbnNwb25kZXJEYXRlKSB7XG4gICAgYWlyY3JhZnQubWFpbnRlbmFuY2VEYXRlcy50cmFuc3BvbmRlciA9IG5ldyBEYXRlKGV4dHJhY3RlZERhdGEudHJhbnNwb25kZXJEYXRlKTtcbiAgfVxuICBpZiAoZXh0cmFjdGVkRGF0YT8uc3RhdGljU3lzdGVtRGF0ZSkge1xuICAgIGFpcmNyYWZ0Lm1haW50ZW5hbmNlRGF0ZXMuc3RhdGljU3lzdGVtID0gbmV3IERhdGUoZXh0cmFjdGVkRGF0YS5zdGF0aWNTeXN0ZW1EYXRlKTtcbiAgfVxuXG4gIC8vIFVwZGF0ZSBob2Jicy90YWNoIGlmIGZvdW5kXG4gIGNvbnN0IGxhdGVzdEVudHJ5ID0gZW50cmllc1tlbnRyaWVzLmxlbmd0aCAtIDFdO1xuICBpZiAobGF0ZXN0RW50cnk/LmhvYmJzVGltZSAmJiBsYXRlc3RFbnRyeS5ob2Jic1RpbWUgPiBhaXJjcmFmdC5jdXJyZW50SG91cnMuaG9iYnMpIHtcbiAgICBhaXJjcmFmdC5jdXJyZW50SG91cnMuaG9iYnMgPSBsYXRlc3RFbnRyeS5ob2Jic1RpbWU7XG4gIH1cbiAgaWYgKGxhdGVzdEVudHJ5Py50YWNoVGltZSAmJiBsYXRlc3RFbnRyeS50YWNoVGltZSA+IGFpcmNyYWZ0LmN1cnJlbnRIb3Vycy50YWNoKSB7XG4gICAgYWlyY3JhZnQuY3VycmVudEhvdXJzLnRhY2ggPSBsYXRlc3RFbnRyeS50YWNoVGltZTtcbiAgfVxuXG4gIGF3YWl0IGFpcmNyYWZ0LnNhdmUoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUGlsb3RGcm9tUGFyc2VkRGF0YShwaWxvdElkOiBzdHJpbmcsIGVudHJpZXM6IGFueVtdKSB7XG4gIGNvbnN0IHBpbG90ID0gYXdhaXQgUGlsb3QuZmluZEJ5SWQocGlsb3RJZCk7XG4gIGlmICghcGlsb3QpIHJldHVybjtcblxuICAvLyBIYW5kbGUgbmVzdGVkIGZsaWdodHMgc3RydWN0dXJlIGZyb20gUmVkdWN0b1xuICBsZXQgZmxhdEVudHJpZXMgPSBlbnRyaWVzO1xuICBpZiAoZW50cmllcy5sZW5ndGggPT09IDEgJiYgZW50cmllc1swXS5mbGlnaHRzKSB7XG4gICAgZmxhdEVudHJpZXMgPSBlbnRyaWVzWzBdLmZsaWdodHM7XG4gIH1cblxuICAvLyBDb252ZXJ0IHBhcnNlZCBlbnRyaWVzIHRvIGZsaWdodCBmb3JtYXRcbiAgY29uc3QgZmxpZ2h0RW50cmllcyA9IGZsYXRFbnRyaWVzLm1hcCgoZTogYW55KSA9PiAoe1xuICAgIGRhdGU6IGUuZGF0ZSB8fCAnJyxcbiAgICBhaXJjcmFmdElkZW50OiBlLmFpcmNyYWZ0SWRlbnQgfHwgZS5haXJjcmFmdCB8fCAnJyxcbiAgICBhaXJjcmFmdFR5cGU6IGUuYWlyY3JhZnRUeXBlIHx8ICcnLFxuICAgIGZyb206IGUuZnJvbSB8fCAnJyxcbiAgICB0bzogZS50byB8fCAnJyxcbiAgICByb3V0ZTogZS5yb3V0ZSB8fCAnJyxcbiAgICB0b3RhbFRpbWU6IGUudG90YWxUaW1lIHx8IGUuZHVyYXRpb24gfHwgMCxcbiAgICBwaWM6IGUucGljIHx8IDAsXG4gICAgc2ljOiBlLnNpYyB8fCAwLFxuICAgIHNvbG86IGUuc29sbyB8fCAwLFxuICAgIGR1YWxSZWNlaXZlZDogZS5kdWFsUmVjZWl2ZWQgfHwgMCxcbiAgICBkdWFsR2l2ZW46IGUuZHVhbEdpdmVuIHx8IDAsXG4gICAgY3Jvc3NDb3VudHJ5OiBlLmNyb3NzQ291bnRyeSB8fCAwLFxuICAgIG5pZ2h0OiBlLm5pZ2h0IHx8IDAsXG4gICAgYWN0dWFsSW5zdHJ1bWVudDogZS5hY3R1YWxJbnN0cnVtZW50IHx8IDAsXG4gICAgc2ltdWxhdGVkSW5zdHJ1bWVudDogZS5zaW11bGF0ZWRJbnN0cnVtZW50IHx8IDAsXG4gICAgc2VsOiBlLnNlbCB8fCAwLFxuICAgIG1lbDogZS5tZWwgfHwgMCxcbiAgICBsYW5kaW5nc0RheTogZS5sYW5kaW5nc0Z1bGxTdG9wRGF5IHx8IGUubGFuZGluZ3NEYXkgfHwgMCxcbiAgICBsYW5kaW5nc05pZ2h0OiBlLmxhbmRpbmdzRnVsbFN0b3BOaWdodCB8fCBlLmxhbmRpbmdzTmlnaHQgfHwgMCxcbiAgICBsYW5kaW5nc1RvdGFsOiBlLmxhbmRpbmdzVG90YWwgfHwgMCxcbiAgICByZW1hcmtzOiBlLnJlbWFya3MgfHwgJycsXG4gIH0pKS5maWx0ZXIoKGU6IGFueSkgPT4gZS5kYXRlICYmIGUuYWlyY3JhZnRJZGVudCk7XG5cbiAgLy8gUmVwbGFjZSBhbGwgZW50cmllcyAoZnVsbCBsb2dib29rIHVwbG9hZCByZXBsYWNlcyBleGlzdGluZylcbiAgcGlsb3QuZmxpZ2h0RW50cmllcyA9IGZsaWdodEVudHJpZXM7XG5cbiAgLy8gQ2FsY3VsYXRlIGV4cGVyaWVuY2UgdG90YWxzIGZyb20gYWxsIGVudHJpZXNcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgbmluZXR5RGF5c0FnbyA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSA5MCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICBjb25zdCB0aGlydHlEYXlzQWdvID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG5cbiAgbGV0IHRvdGFsSG91cnMgPSAwLCBwaWNIb3VycyA9IDAsIG5pZ2h0SG91cnMgPSAwLCBpZnJIb3VycyA9IDAsIGNyb3NzQ291bnRyeUhvdXJzID0gMDtcbiAgbGV0IGxhc3Q5MERheXNIb3VycyA9IDAsIGxhc3QzMERheXNIb3VycyA9IDA7XG5cbiAgZm9yIChjb25zdCBlbnRyeSBvZiBmbGlnaHRFbnRyaWVzKSB7XG4gICAgdG90YWxIb3VycyArPSBlbnRyeS50b3RhbFRpbWU7XG4gICAgcGljSG91cnMgKz0gZW50cnkucGljIHx8IDA7XG4gICAgbmlnaHRIb3VycyArPSBlbnRyeS5uaWdodCB8fCAwO1xuICAgIGlmckhvdXJzICs9IChlbnRyeS5hY3R1YWxJbnN0cnVtZW50IHx8IDApICsgKGVudHJ5LnNpbXVsYXRlZEluc3RydW1lbnQgfHwgMCk7XG4gICAgY3Jvc3NDb3VudHJ5SG91cnMgKz0gZW50cnkuY3Jvc3NDb3VudHJ5IHx8IDA7XG5cbiAgICBpZiAoZW50cnkuZGF0ZSkge1xuICAgICAgY29uc3QgZW50cnlEYXRlID0gbmV3IERhdGUoZW50cnkuZGF0ZSk7XG4gICAgICBpZiAoIWlzTmFOKGVudHJ5RGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICAgIGlmIChlbnRyeURhdGUgPj0gbmluZXR5RGF5c0FnbykgbGFzdDkwRGF5c0hvdXJzICs9IGVudHJ5LnRvdGFsVGltZTtcbiAgICAgICAgaWYgKGVudHJ5RGF0ZSA+PSB0aGlydHlEYXlzQWdvKSBsYXN0MzBEYXlzSG91cnMgKz0gZW50cnkudG90YWxUaW1lO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHBpbG90LmV4cGVyaWVuY2UgPSB7XG4gICAgdG90YWxIb3VyczogTWF0aC5yb3VuZCh0b3RhbEhvdXJzICogMTApIC8gMTAsXG4gICAgcGljSG91cnM6IE1hdGgucm91bmQocGljSG91cnMgKiAxMCkgLyAxMCxcbiAgICBuaWdodEhvdXJzOiBNYXRoLnJvdW5kKG5pZ2h0SG91cnMgKiAxMCkgLyAxMCxcbiAgICBpZnJIb3VyczogTWF0aC5yb3VuZChpZnJIb3VycyAqIDEwKSAvIDEwLFxuICAgIGNyb3NzQ291bnRyeUhvdXJzOiBNYXRoLnJvdW5kKGNyb3NzQ291bnRyeUhvdXJzICogMTApIC8gMTAsXG4gICAgbGFzdDkwRGF5c0hvdXJzOiBNYXRoLnJvdW5kKGxhc3Q5MERheXNIb3VycyAqIDEwKSAvIDEwLFxuICAgIGxhc3QzMERheXNIb3VyczogTWF0aC5yb3VuZChsYXN0MzBEYXlzSG91cnMgKiAxMCkgLyAxMCxcbiAgfTtcblxuICBhd2FpdCBwaWxvdC5zYXZlKCk7XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicGFyc2VEb2N1bWVudCIsImRiQ29ubmVjdCIsIkFpcmNyYWZ0IiwiUGlsb3QiLCJQYXJzZWREb2N1bWVudCIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJmaWxlQmFzZTY0IiwiZmlsZVR5cGUiLCJkb2N1bWVudFR5cGUiLCJhaXJjcmFmdElkIiwicGlsb3RJZCIsImZpbGVuYW1lIiwiYmFja2dyb3VuZCIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsImRvYyIsImNyZWF0ZSIsIkRhdGUiLCJub3ciLCJhaXJjcmFmdCIsInVuZGVmaW5lZCIsInBpbG90IiwicHJvY2Vzc0RvY3VtZW50SW5CYWNrZ3JvdW5kIiwiX2lkIiwidG9TdHJpbmciLCJkYXRhIiwiZG9jdW1lbnRJZCIsIm1lc3NhZ2UiLCJzYXZlIiwicmVzdWx0IiwiZW50cmllcyIsImV4dHJhY3RlZERhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJwYXJzZWRBdCIsInJhd091dHB1dCIsInN1bW1hcnkiLCJjYWxjdWxhdGVTdW1tYXJ5IiwibGVuZ3RoIiwidXBkYXRlQWlyY3JhZnRGcm9tUGFyc2VkRGF0YSIsInVwZGF0ZVBpbG90RnJvbVBhcnNlZERhdGEiLCJjb25zb2xlIiwiR0VUIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZ2V0IiwicXVlcnkiLCJkb2N1bWVudHMiLCJmaW5kIiwic2VsZWN0Iiwic29ydCIsInVwbG9hZGVkQXQiLCJsaW1pdCIsImxlYW4iLCJkb2NJZCIsImZpbmRCeUlkIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJ0b3RhbEVudHJpZXMiLCJ0b3RhbEhvdXJzIiwicmVkdWNlIiwic3VtIiwiZSIsInRvdGFsVGltZSIsImR1cmF0aW9uIiwiZGF0ZXMiLCJtYXAiLCJkYXRlIiwiZmlsdGVyIiwiQm9vbGVhbiIsIk1hdGgiLCJyb3VuZCIsImRhdGVSYW5nZSIsImZyb20iLCJ0byIsIm5ld0xvZ3MiLCJlbnRyeSIsImRlc2NyaXB0aW9uIiwid29ya1BlcmZvcm1lZCIsImhvYmJzVGltZSIsImhvYmJzIiwidGFjaFRpbWUiLCJ0YWNoIiwibWVjaGFuaWMiLCJzaWduZWRCeSIsImxvZyIsImxvZ3MiLCJwdXNoIiwiYW5udWFsRGF0ZSIsIm1haW50ZW5hbmNlRGF0ZXMiLCJhbm51YWwiLCJ0cmFuc3BvbmRlckRhdGUiLCJ0cmFuc3BvbmRlciIsInN0YXRpY1N5c3RlbURhdGUiLCJzdGF0aWNTeXN0ZW0iLCJsYXRlc3RFbnRyeSIsImN1cnJlbnRIb3VycyIsImZsYXRFbnRyaWVzIiwiZmxpZ2h0cyIsImZsaWdodEVudHJpZXMiLCJhaXJjcmFmdElkZW50IiwiYWlyY3JhZnRUeXBlIiwicm91dGUiLCJwaWMiLCJzaWMiLCJzb2xvIiwiZHVhbFJlY2VpdmVkIiwiZHVhbEdpdmVuIiwiY3Jvc3NDb3VudHJ5IiwibmlnaHQiLCJhY3R1YWxJbnN0cnVtZW50Iiwic2ltdWxhdGVkSW5zdHJ1bWVudCIsInNlbCIsIm1lbCIsImxhbmRpbmdzRGF5IiwibGFuZGluZ3NGdWxsU3RvcERheSIsImxhbmRpbmdzTmlnaHQiLCJsYW5kaW5nc0Z1bGxTdG9wTmlnaHQiLCJsYW5kaW5nc1RvdGFsIiwicmVtYXJrcyIsIm5pbmV0eURheXNBZ28iLCJnZXRUaW1lIiwidGhpcnR5RGF5c0FnbyIsInBpY0hvdXJzIiwibmlnaHRIb3VycyIsImlmckhvdXJzIiwiY3Jvc3NDb3VudHJ5SG91cnMiLCJsYXN0OTBEYXlzSG91cnMiLCJsYXN0MzBEYXlzSG91cnMiLCJlbnRyeURhdGUiLCJpc05hTiIsImV4cGVyaWVuY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/parse-document/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://localhost:27017/aviation-intelligence\";\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable\");\n}\nlet cached = global.mongoose || {\n    conn: null,\n    promise: null\n};\nif (!global.mongoose) {\n    global.mongoose = cached;\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false,\n            serverSelectionTimeoutMS: 5000,\n            connectTimeoutMS: 5000\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            console.log(\"MongoDB connected successfully\");\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        console.error(\"MongoDB connection error:\", e);\n        throw new Error(\"Failed to connect to MongoDB. Please ensure MongoDB is running.\");\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVyxJQUFJO0FBRS9DLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFXQSxJQUFJQyxTQUF3QkMsT0FBT04sUUFBUSxJQUFJO0lBQUVPLE1BQU07SUFBTUMsU0FBUztBQUFLO0FBRTNFLElBQUksQ0FBQ0YsT0FBT04sUUFBUSxFQUFFO0lBQ3BCTSxPQUFPTixRQUFRLEdBQUdLO0FBQ3BCO0FBRUEsZUFBZUk7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7WUFDaEJDLDBCQUEwQjtZQUMxQkMsa0JBQWtCO1FBQ3BCO1FBRUFSLE9BQU9HLE9BQU8sR0FBR1IsdURBQWdCLENBQUNDLGFBQWFTLE1BQU1LLElBQUksQ0FBQyxDQUFDZjtZQUN6RGdCLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9qQjtRQUNUO0lBQ0Y7SUFFQSxJQUFJO1FBQ0ZLLE9BQU9FLElBQUksR0FBRyxNQUFNRixPQUFPRyxPQUFPO0lBQ3BDLEVBQUUsT0FBT1UsR0FBRztRQUNWYixPQUFPRyxPQUFPLEdBQUc7UUFDakJRLFFBQVFHLEtBQUssQ0FBQyw2QkFBNkJEO1FBQzNDLE1BQU0sSUFBSWQsTUFBTTtJQUNsQjtJQUVBLE9BQU9DLE9BQU9FLElBQUk7QUFDcEI7QUFFQSxpRUFBZUUsU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2F2aWF0aW9uLWludGVsbGlnZW5jZS1icmFpbi8uL2xpYi9kYi50cz8xZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkgfHwgJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvYXZpYXRpb24taW50ZWxsaWdlbmNlJztcblxuaWYgKCFNT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlJyk7XG59XG5cbmludGVyZmFjZSBNb25nb29zZUNhY2hlIHtcbiAgY29ubjogdHlwZW9mIG1vbmdvb3NlIHwgbnVsbDtcbiAgcHJvbWlzZTogUHJvbWlzZTx0eXBlb2YgbW9uZ29vc2U+IHwgbnVsbDtcbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICB2YXIgbW9uZ29vc2U6IE1vbmdvb3NlQ2FjaGUgfCB1bmRlZmluZWQ7XG59XG5cbmxldCBjYWNoZWQ6IE1vbmdvb3NlQ2FjaGUgPSBnbG9iYWwubW9uZ29vc2UgfHwgeyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XG5cbmlmICghZ2xvYmFsLm1vbmdvb3NlKSB7XG4gIGdsb2JhbC5tb25nb29zZSA9IGNhY2hlZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZGJDb25uZWN0KCk6IFByb21pc2U8dHlwZW9mIG1vbmdvb3NlPiB7XG4gIGlmIChjYWNoZWQuY29ubikge1xuICAgIHJldHVybiBjYWNoZWQuY29ubjtcbiAgfVxuXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLFxuICAgICAgc2VydmVyU2VsZWN0aW9uVGltZW91dE1TOiA1MDAwLFxuICAgICAgY29ubmVjdFRpbWVvdXRNUzogNTAwMCxcbiAgICB9O1xuXG4gICAgY2FjaGVkLnByb21pc2UgPSBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJLCBvcHRzKS50aGVuKChtb25nb29zZSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ01vbmdvREIgY29ubmVjdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgcmV0dXJuIG1vbmdvb3NlO1xuICAgIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjYWNoZWQuY29ubiA9IGF3YWl0IGNhY2hlZC5wcm9taXNlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xuICAgIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIgY29ubmVjdGlvbiBlcnJvcjonLCBlKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjb25uZWN0IHRvIE1vbmdvREIuIFBsZWFzZSBlbnN1cmUgTW9uZ29EQiBpcyBydW5uaW5nLicpO1xuICB9XG5cbiAgcmV0dXJuIGNhY2hlZC5jb25uO1xufVxuXG5leHBvcnQgZGVmYXVsdCBkYkNvbm5lY3Q7XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiZGJDb25uZWN0Iiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwic2VydmVyU2VsZWN0aW9uVGltZW91dE1TIiwiY29ubmVjdFRpbWVvdXRNUyIsImNvbm5lY3QiLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsImUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/models/Aircraft.ts":
/*!********************************!*\
  !*** ./lib/models/Aircraft.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst LogEntrySchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    date: {\n        type: Date,\n        required: true\n    },\n    description: {\n        type: String,\n        required: true\n    },\n    hobbsTime: {\n        type: Number,\n        required: true\n    },\n    tachTime: {\n        type: Number,\n        required: true\n    },\n    mechanic: {\n        type: String\n    },\n    rawText: {\n        type: String\n    }\n});\nconst AircraftSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    tailNumber: {\n        type: String,\n        required: true,\n        unique: true,\n        uppercase: true,\n        trim: true\n    },\n    model: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    serial: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    manufacturer: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    year: {\n        type: Number,\n        required: true\n    },\n    imageUrl: {\n        type: String\n    },\n    pohUrl: {\n        type: String\n    },\n    operatingLimits: {\n        vSpeeds: {\n            vso: {\n                type: Number\n            },\n            vs1: {\n                type: Number\n            },\n            vr: {\n                type: Number\n            },\n            vx: {\n                type: Number\n            },\n            vy: {\n                type: Number\n            },\n            vfe: {\n                type: Number\n            },\n            va: {\n                type: Number\n            },\n            vno: {\n                type: Number\n            },\n            vne: {\n                type: Number\n            }\n        },\n        weights: {\n            maxGross: {\n                type: Number\n            },\n            empty: {\n                type: Number\n            },\n            usefulLoad: {\n                type: Number\n            },\n            fuelCapacity: {\n                type: Number\n            }\n        }\n    },\n    maintenanceDates: {\n        annual: {\n            type: Date,\n            required: true\n        },\n        transponder: {\n            type: Date,\n            required: true\n        },\n        staticSystem: {\n            type: Date,\n            required: true\n        },\n        hundredHour: {\n            type: Date\n        }\n    },\n    currentHours: {\n        hobbs: {\n            type: Number,\n            required: true,\n            default: 0\n        },\n        tach: {\n            type: Number,\n            required: true,\n            default: 0\n        }\n    },\n    safetyAnalysis: {\n        lastAnalyzed: {\n            type: Date\n        },\n        score: {\n            type: Number\n        },\n        findings: [\n            {\n                component: {\n                    type: String\n                },\n                status: {\n                    type: String,\n                    enum: [\n                        \"ok\",\n                        \"warning\",\n                        \"critical\"\n                    ]\n                },\n                message: {\n                    type: String\n                },\n                lastMentioned: {\n                    type: Date\n                }\n            }\n        ]\n    },\n    linkedDocuments: [\n        {\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n            ref: \"ParsedDocument\"\n        }\n    ],\n    logs: [\n        LogEntrySchema\n    ],\n    owner: {\n        name: {\n            type: String\n        },\n        email: {\n            type: String\n        }\n    }\n}, {\n    timestamps: true\n});\n// Prevent model recompilation in Next.js dev mode\n// FORCE RECOMPILE in dev to ensure schema updates (like operatingLimits) are picked up\nif ( true && (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Aircraft) {\n    delete (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Aircraft;\n}\nconst Aircraft = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Aircraft || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Aircraft\", AircraftSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Aircraft);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRO1lBQUVDLEtBQUs7UUFBaUI7S0FBRTtJQUN6RUMsTUFBTTtRQUFDN0Q7S0FBZTtJQUN0QjhELE9BQU87UUFDTEMsTUFBTTtZQUFFN0QsTUFBTUk7UUFBTztRQUNyQjBELE9BQU87WUFBRTlELE1BQU1JO1FBQU87SUFDeEI7QUFDRixHQUNBO0lBQ0UyRCxZQUFZO0FBQ2Q7QUFHRixrREFBa0Q7QUFDbEQsdUZBQXVGO0FBQ3ZGLElBQUlDLEtBQXlCLElBQWlCcEUsd0RBQWUsQ0FBQ3NFLFFBQVEsRUFBRTtJQUN0RSxPQUFPdEUsd0RBQWUsQ0FBQ3NFLFFBQVE7QUFDakM7QUFDQSxNQUFNQSxXQUE2QnRFLHdEQUFlLENBQUNzRSxRQUFRLElBQUl0RSxxREFBYyxDQUFZLFlBQVljO0FBRXJHLGlFQUFld0QsUUFBUUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2F2aWF0aW9uLWludGVsbGlnZW5jZS1icmFpbi8uL2xpYi9tb2RlbHMvQWlyY3JhZnQudHM/YTE1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UsIHsgU2NoZW1hLCBNb2RlbCB9IGZyb20gJ21vbmdvb3NlJztcblxuZXhwb3J0IGludGVyZmFjZSBJTG9nRW50cnkge1xuICBkYXRlOiBEYXRlO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBob2Jic1RpbWU6IG51bWJlcjtcbiAgdGFjaFRpbWU6IG51bWJlcjtcbiAgbWVjaGFuaWM/OiBzdHJpbmc7XG4gIHJhd1RleHQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUFpcmNyYWZ0IHtcbiAgX2lkOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZDtcbiAgdGFpbE51bWJlcjogc3RyaW5nO1xuICBtb2RlbDogc3RyaW5nO1xuICBzZXJpYWw6IHN0cmluZztcbiAgbWFudWZhY3R1cmVyOiBzdHJpbmc7XG4gIHllYXI6IG51bWJlcjtcbiAgaW1hZ2VVcmw/OiBzdHJpbmc7XG4gIHBvaFVybD86IHN0cmluZztcbiAgb3BlcmF0aW5nTGltaXRzPzoge1xuICAgIHZTcGVlZHM6IHtcbiAgICAgIHZzbzogbnVtYmVyO1xuICAgICAgdnMxOiBudW1iZXI7XG4gICAgICB2cjogbnVtYmVyO1xuICAgICAgdng6IG51bWJlcjtcbiAgICAgIHZ5OiBudW1iZXI7XG4gICAgICB2ZmU6IG51bWJlcjtcbiAgICAgIHZhOiBudW1iZXI7XG4gICAgICB2bm86IG51bWJlcjtcbiAgICAgIHZuZTogbnVtYmVyO1xuICAgIH07XG4gICAgd2VpZ2h0czoge1xuICAgICAgbWF4R3Jvc3M6IG51bWJlcjtcbiAgICAgIGVtcHR5OiBudW1iZXI7XG4gICAgICB1c2VmdWxMb2FkOiBudW1iZXI7XG4gICAgICBmdWVsQ2FwYWNpdHk6IG51bWJlcjtcbiAgICB9O1xuICB9O1xuICBtYWludGVuYW5jZURhdGVzOiB7XG4gICAgYW5udWFsOiBEYXRlO1xuICAgIHRyYW5zcG9uZGVyOiBEYXRlO1xuICAgIHN0YXRpY1N5c3RlbTogRGF0ZTtcbiAgICBodW5kcmVkSG91cj86IERhdGU7XG4gIH07XG4gIGN1cnJlbnRIb3Vyczoge1xuICAgIGhvYmJzOiBudW1iZXI7XG4gICAgdGFjaDogbnVtYmVyO1xuICB9O1xuICBzYWZldHlBbmFseXNpcz86IHtcbiAgICBsYXN0QW5hbHl6ZWQ6IERhdGU7XG4gICAgc2NvcmU6IG51bWJlcjtcbiAgICBmaW5kaW5nczoge1xuICAgICAgY29tcG9uZW50OiBzdHJpbmc7XG4gICAgICBzdGF0dXM6ICdvaycgfCAnd2FybmluZycgfCAnY3JpdGljYWwnO1xuICAgICAgbWVzc2FnZTogc3RyaW5nO1xuICAgICAgbGFzdE1lbnRpb25lZD86IERhdGU7XG4gICAgfVtdO1xuICB9O1xuICBsaW5rZWREb2N1bWVudHM/OiBtb25nb29zZS5UeXBlcy5PYmplY3RJZFtdO1xuICBsb2dzOiBJTG9nRW50cnlbXTtcbiAgb3duZXI/OiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gIH07XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xufVxuXG5jb25zdCBMb2dFbnRyeVNjaGVtYSA9IG5ldyBTY2hlbWE8SUxvZ0VudHJ5Pih7XG4gIGRhdGU6IHsgdHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgZGVzY3JpcHRpb246IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBob2Jic1RpbWU6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxuICB0YWNoVGltZTogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIG1lY2hhbmljOiB7IHR5cGU6IFN0cmluZyB9LFxuICByYXdUZXh0OiB7IHR5cGU6IFN0cmluZyB9LFxufSk7XG5cbmNvbnN0IEFpcmNyYWZ0U2NoZW1hID0gbmV3IFNjaGVtYTxJQWlyY3JhZnQ+KFxuICB7XG4gICAgdGFpbE51bWJlcjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB1bmlxdWU6IHRydWUsXG4gICAgICB1cHBlcmNhc2U6IHRydWUsXG4gICAgICB0cmltOiB0cnVlLFxuICAgIH0sXG4gICAgbW9kZWw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICB9LFxuICAgIHNlcmlhbDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB0cmltOiB0cnVlLFxuICAgIH0sXG4gICAgbWFudWZhY3R1cmVyOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIHRyaW06IHRydWUsXG4gICAgfSxcbiAgICB5ZWFyOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIGltYWdlVXJsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgfSxcbiAgICBwb2hVcmw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICB9LFxuICAgIG9wZXJhdGluZ0xpbWl0czoge1xuICAgICAgdlNwZWVkczoge1xuICAgICAgICB2c286IHsgdHlwZTogTnVtYmVyIH0sXG4gICAgICAgIHZzMTogeyB0eXBlOiBOdW1iZXIgfSxcbiAgICAgICAgdnI6IHsgdHlwZTogTnVtYmVyIH0sXG4gICAgICAgIHZ4OiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgICB2eTogeyB0eXBlOiBOdW1iZXIgfSxcbiAgICAgICAgdmZlOiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgICB2YTogeyB0eXBlOiBOdW1iZXIgfSxcbiAgICAgICAgdm5vOiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgICB2bmU6IHsgdHlwZTogTnVtYmVyIH0sXG4gICAgICB9LFxuICAgICAgd2VpZ2h0czoge1xuICAgICAgICBtYXhHcm9zczogeyB0eXBlOiBOdW1iZXIgfSxcbiAgICAgICAgZW1wdHk6IHsgdHlwZTogTnVtYmVyIH0sXG4gICAgICAgIHVzZWZ1bExvYWQ6IHsgdHlwZTogTnVtYmVyIH0sXG4gICAgICAgIGZ1ZWxDYXBhY2l0eTogeyB0eXBlOiBOdW1iZXIgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBtYWludGVuYW5jZURhdGVzOiB7XG4gICAgICBhbm51YWw6IHsgdHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIHRyYW5zcG9uZGVyOiB7IHR5cGU6IERhdGUsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICBzdGF0aWNTeXN0ZW06IHsgdHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIGh1bmRyZWRIb3VyOiB7IHR5cGU6IERhdGUgfSxcbiAgICB9LFxuICAgIGN1cnJlbnRIb3Vyczoge1xuICAgICAgaG9iYnM6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogMCB9LFxuICAgICAgdGFjaDogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiAwIH0sXG4gICAgfSxcbiAgICBzYWZldHlBbmFseXNpczoge1xuICAgICAgbGFzdEFuYWx5emVkOiB7IHR5cGU6IERhdGUgfSxcbiAgICAgIHNjb3JlOiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgZmluZGluZ3M6IFt7XG4gICAgICAgIGNvbXBvbmVudDogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICAgICAgc3RhdHVzOiB7IHR5cGU6IFN0cmluZywgZW51bTogWydvaycsICd3YXJuaW5nJywgJ2NyaXRpY2FsJ10gfSxcbiAgICAgICAgbWVzc2FnZTogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICAgICAgbGFzdE1lbnRpb25lZDogeyB0eXBlOiBEYXRlIH1cbiAgICAgIH1dXG4gICAgfSxcbiAgICBsaW5rZWREb2N1bWVudHM6IFt7IHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnUGFyc2VkRG9jdW1lbnQnIH1dLFxuICAgIGxvZ3M6IFtMb2dFbnRyeVNjaGVtYV0sXG4gICAgb3duZXI6IHtcbiAgICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nIH0sXG4gICAgICBlbWFpbDogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGltZXN0YW1wczogdHJ1ZSxcbiAgfVxuKTtcblxuLy8gUHJldmVudCBtb2RlbCByZWNvbXBpbGF0aW9uIGluIE5leHQuanMgZGV2IG1vZGVcbi8vIEZPUkNFIFJFQ09NUElMRSBpbiBkZXYgdG8gZW5zdXJlIHNjaGVtYSB1cGRhdGVzIChsaWtlIG9wZXJhdGluZ0xpbWl0cykgYXJlIHBpY2tlZCB1cFxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIG1vbmdvb3NlLm1vZGVscy5BaXJjcmFmdCkge1xuICBkZWxldGUgbW9uZ29vc2UubW9kZWxzLkFpcmNyYWZ0O1xufVxuY29uc3QgQWlyY3JhZnQ6IE1vZGVsPElBaXJjcmFmdD4gPSBtb25nb29zZS5tb2RlbHMuQWlyY3JhZnQgfHwgbW9uZ29vc2UubW9kZWw8SUFpcmNyYWZ0PignQWlyY3JhZnQnLCBBaXJjcmFmdFNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFpcmNyYWZ0O1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiTG9nRW50cnlTY2hlbWEiLCJkYXRlIiwidHlwZSIsIkRhdGUiLCJyZXF1aXJlZCIsImRlc2NyaXB0aW9uIiwiU3RyaW5nIiwiaG9iYnNUaW1lIiwiTnVtYmVyIiwidGFjaFRpbWUiLCJtZWNoYW5pYyIsInJhd1RleHQiLCJBaXJjcmFmdFNjaGVtYSIsInRhaWxOdW1iZXIiLCJ1bmlxdWUiLCJ1cHBlcmNhc2UiLCJ0cmltIiwibW9kZWwiLCJzZXJpYWwiLCJtYW51ZmFjdHVyZXIiLCJ5ZWFyIiwiaW1hZ2VVcmwiLCJwb2hVcmwiLCJvcGVyYXRpbmdMaW1pdHMiLCJ2U3BlZWRzIiwidnNvIiwidnMxIiwidnIiLCJ2eCIsInZ5IiwidmZlIiwidmEiLCJ2bm8iLCJ2bmUiLCJ3ZWlnaHRzIiwibWF4R3Jvc3MiLCJlbXB0eSIsInVzZWZ1bExvYWQiLCJmdWVsQ2FwYWNpdHkiLCJtYWludGVuYW5jZURhdGVzIiwiYW5udWFsIiwidHJhbnNwb25kZXIiLCJzdGF0aWNTeXN0ZW0iLCJodW5kcmVkSG91ciIsImN1cnJlbnRIb3VycyIsImhvYmJzIiwiZGVmYXVsdCIsInRhY2giLCJzYWZldHlBbmFseXNpcyIsImxhc3RBbmFseXplZCIsInNjb3JlIiwiZmluZGluZ3MiLCJjb21wb25lbnQiLCJzdGF0dXMiLCJlbnVtIiwibWVzc2FnZSIsImxhc3RNZW50aW9uZWQiLCJsaW5rZWREb2N1bWVudHMiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwibG9ncyIsIm93bmVyIiwibmFtZSIsImVtYWlsIiwidGltZXN0YW1wcyIsInByb2Nlc3MiLCJtb2RlbHMiLCJBaXJjcmFmdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/models/Aircraft.ts\n");

/***/ }),

/***/ "(rsc)/./lib/models/ParsedDocument.ts":
/*!**************************************!*\
  !*** ./lib/models/ParsedDocument.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst ParsedDocumentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    filename: {\n        type: String,\n        required: true\n    },\n    documentType: {\n        type: String,\n        enum: [\n            \"logbook\",\n            \"maintenance\",\n            \"poh\",\n            \"other\"\n        ],\n        required: true\n    },\n    fileType: {\n        type: String,\n        enum: [\n            \"pdf\",\n            \"image\"\n        ],\n        required: true\n    },\n    uploadedAt: {\n        type: Date,\n        default: Date.now\n    },\n    parsedAt: {\n        type: Date\n    },\n    status: {\n        type: String,\n        enum: [\n            \"pending\",\n            \"parsing\",\n            \"completed\",\n            \"failed\"\n        ],\n        default: \"pending\"\n    },\n    rawOutput: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed\n    },\n    entries: [\n        {\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed\n        }\n    ],\n    summary: {\n        totalEntries: {\n            type: Number\n        },\n        totalHours: {\n            type: Number\n        },\n        dateRange: {\n            from: {\n                type: String\n            },\n            to: {\n                type: String\n            }\n        }\n    },\n    aircraft: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: \"Aircraft\"\n    },\n    pilot: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: \"Pilot\"\n    },\n    error: {\n        type: String\n    },\n    fileBase64: {\n        type: String\n    }\n}, {\n    timestamps: true\n});\n// Index for quick lookups\nParsedDocumentSchema.index({\n    aircraft: 1,\n    documentType: 1\n});\nParsedDocumentSchema.index({\n    pilot: 1,\n    documentType: 1\n});\nParsedDocumentSchema.index({\n    status: 1\n});\nconst ParsedDocument = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).ParsedDocument || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"ParsedDocument\", ParsedDocumentSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ParsedDocument);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9kZWxzL1BhcnNlZERvY3VtZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2RDtBQW9DN0QsTUFBTUUsdUJBQXVCLElBQUlELDRDQUFNQSxDQUFrQjtJQUNyREUsVUFBVTtRQUFFQyxNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDekNDLGNBQWM7UUFDVkgsTUFBTUM7UUFDTkcsTUFBTTtZQUFDO1lBQVc7WUFBZTtZQUFPO1NBQVE7UUFDaERGLFVBQVU7SUFDZDtJQUNBRyxVQUFVO1FBQUVMLE1BQU1DO1FBQVFHLE1BQU07WUFBQztZQUFPO1NBQVE7UUFBRUYsVUFBVTtJQUFLO0lBQ2pFSSxZQUFZO1FBQUVOLE1BQU1PO1FBQU1DLFNBQVNELEtBQUtFLEdBQUc7SUFBQztJQUM1Q0MsVUFBVTtRQUFFVixNQUFNTztJQUFLO0lBQ3ZCSSxRQUFRO1FBQ0pYLE1BQU1DO1FBQ05HLE1BQU07WUFBQztZQUFXO1lBQVc7WUFBYTtTQUFTO1FBQ25ESSxTQUFTO0lBQ2I7SUFDQUksV0FBVztRQUFFWixNQUFNSCw0Q0FBTUEsQ0FBQ2dCLEtBQUssQ0FBQ0MsS0FBSztJQUFDO0lBQ3RDQyxTQUFTO1FBQUM7WUFBRWYsTUFBTUgsNENBQU1BLENBQUNnQixLQUFLLENBQUNDLEtBQUs7UUFBQztLQUFFO0lBQ3ZDRSxTQUFTO1FBQ0xDLGNBQWM7WUFBRWpCLE1BQU1rQjtRQUFPO1FBQzdCQyxZQUFZO1lBQUVuQixNQUFNa0I7UUFBTztRQUMzQkUsV0FBVztZQUNQQyxNQUFNO2dCQUFFckIsTUFBTUM7WUFBTztZQUNyQnFCLElBQUk7Z0JBQUV0QixNQUFNQztZQUFPO1FBQ3ZCO0lBQ0o7SUFDQXNCLFVBQVU7UUFBRXZCLE1BQU1ILDRDQUFNQSxDQUFDZ0IsS0FBSyxDQUFDVyxRQUFRO1FBQUVDLEtBQUs7SUFBVztJQUN6REMsT0FBTztRQUFFMUIsTUFBTUgsNENBQU1BLENBQUNnQixLQUFLLENBQUNXLFFBQVE7UUFBRUMsS0FBSztJQUFRO0lBQ25ERSxPQUFPO1FBQUUzQixNQUFNQztJQUFPO0lBQ3RCMkIsWUFBWTtRQUFFNUIsTUFBTUM7SUFBTztBQUMvQixHQUFHO0lBQ0M0QixZQUFZO0FBQ2hCO0FBRUEsMEJBQTBCO0FBQzFCL0IscUJBQXFCZ0MsS0FBSyxDQUFDO0lBQUVQLFVBQVU7SUFBR3BCLGNBQWM7QUFBRTtBQUMxREwscUJBQXFCZ0MsS0FBSyxDQUFDO0lBQUVKLE9BQU87SUFBR3ZCLGNBQWM7QUFBRTtBQUN2REwscUJBQXFCZ0MsS0FBSyxDQUFDO0lBQUVuQixRQUFRO0FBQUU7QUFFdkMsTUFBTW9CLGlCQUNGbkMsd0RBQWUsQ0FBQ21DLGNBQWMsSUFBSW5DLHFEQUFjLENBQWtCLGtCQUFrQkU7QUFFeEYsaUVBQWVpQyxjQUFjQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXZpYXRpb24taW50ZWxsaWdlbmNlLWJyYWluLy4vbGliL21vZGVscy9QYXJzZWREb2N1bWVudC50cz9jY2I3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEsIERvY3VtZW50LCBNb2RlbCB9IGZyb20gJ21vbmdvb3NlJztcblxuZXhwb3J0IGludGVyZmFjZSBJUGFyc2VkRG9jdW1lbnQgZXh0ZW5kcyBEb2N1bWVudCB7XG4gICAgZmlsZW5hbWU6IHN0cmluZztcbiAgICBkb2N1bWVudFR5cGU6ICdsb2dib29rJyB8ICdtYWludGVuYW5jZScgfCAncG9oJyB8ICdvdGhlcic7XG4gICAgZmlsZVR5cGU6ICdwZGYnIHwgJ2ltYWdlJztcbiAgICB1cGxvYWRlZEF0OiBEYXRlO1xuICAgIHBhcnNlZEF0PzogRGF0ZTtcbiAgICBzdGF0dXM6ICdwZW5kaW5nJyB8ICdwYXJzaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2ZhaWxlZCc7XG5cbiAgICAvLyBUaGUgcmF3IFJlZHVjdG8gb3V0cHV0XG4gICAgcmF3T3V0cHV0PzogUmVjb3JkPHN0cmluZywgYW55PjtcblxuICAgIC8vIEV4dHJhY3RlZCBlbnRyaWVzXG4gICAgZW50cmllcz86IEFycmF5PFJlY29yZDxzdHJpbmcsIGFueT4+O1xuXG4gICAgLy8gU3VtbWFyeSBzdGF0c1xuICAgIHN1bW1hcnk/OiB7XG4gICAgICAgIHRvdGFsRW50cmllczogbnVtYmVyO1xuICAgICAgICB0b3RhbEhvdXJzPzogbnVtYmVyO1xuICAgICAgICBkYXRlUmFuZ2U/OiB7IGZyb206IHN0cmluZzsgdG86IHN0cmluZyB9O1xuICAgIH07XG5cbiAgICAvLyBMaW5rIHRvIGFpcmNyYWZ0IChvcHRpb25hbClcbiAgICBhaXJjcmFmdD86IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkO1xuXG4gICAgLy8gTGluayB0byBwaWxvdCAob3B0aW9uYWwpXG4gICAgcGlsb3Q/OiBtb25nb29zZS5UeXBlcy5PYmplY3RJZDtcblxuICAgIC8vIEVycm9yIG1lc3NhZ2UgaWYgZmFpbGVkXG4gICAgZXJyb3I/OiBzdHJpbmc7XG5cbiAgICAvLyBPcmlnaW5hbCBmaWxlIHN0b3JlZCBhcyBiYXNlNjQgKGZvciByZS1wYXJzaW5nIGlmIG5lZWRlZClcbiAgICBmaWxlQmFzZTY0Pzogc3RyaW5nO1xufVxuXG5jb25zdCBQYXJzZWREb2N1bWVudFNjaGVtYSA9IG5ldyBTY2hlbWE8SVBhcnNlZERvY3VtZW50Pih7XG4gICAgZmlsZW5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGRvY3VtZW50VHlwZToge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGVudW06IFsnbG9nYm9vaycsICdtYWludGVuYW5jZScsICdwb2gnLCAnb3RoZXInXSxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGZpbGVUeXBlOiB7IHR5cGU6IFN0cmluZywgZW51bTogWydwZGYnLCAnaW1hZ2UnXSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICB1cGxvYWRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH0sXG4gICAgcGFyc2VkQXQ6IHsgdHlwZTogRGF0ZSB9LFxuICAgIHN0YXR1czoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGVudW06IFsncGVuZGluZycsICdwYXJzaW5nJywgJ2NvbXBsZXRlZCcsICdmYWlsZWQnXSxcbiAgICAgICAgZGVmYXVsdDogJ3BlbmRpbmcnXG4gICAgfSxcbiAgICByYXdPdXRwdXQ6IHsgdHlwZTogU2NoZW1hLlR5cGVzLk1peGVkIH0sXG4gICAgZW50cmllczogW3sgdHlwZTogU2NoZW1hLlR5cGVzLk1peGVkIH1dLFxuICAgIHN1bW1hcnk6IHtcbiAgICAgICAgdG90YWxFbnRyaWVzOiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgICB0b3RhbEhvdXJzOiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgICBkYXRlUmFuZ2U6IHtcbiAgICAgICAgICAgIGZyb206IHsgdHlwZTogU3RyaW5nIH0sXG4gICAgICAgICAgICB0bzogeyB0eXBlOiBTdHJpbmcgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBhaXJjcmFmdDogeyB0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ0FpcmNyYWZ0JyB9LFxuICAgIHBpbG90OiB7IHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnUGlsb3QnIH0sXG4gICAgZXJyb3I6IHsgdHlwZTogU3RyaW5nIH0sXG4gICAgZmlsZUJhc2U2NDogeyB0eXBlOiBTdHJpbmcgfVxufSwge1xuICAgIHRpbWVzdGFtcHM6IHRydWVcbn0pO1xuXG4vLyBJbmRleCBmb3IgcXVpY2sgbG9va3Vwc1xuUGFyc2VkRG9jdW1lbnRTY2hlbWEuaW5kZXgoeyBhaXJjcmFmdDogMSwgZG9jdW1lbnRUeXBlOiAxIH0pO1xuUGFyc2VkRG9jdW1lbnRTY2hlbWEuaW5kZXgoeyBwaWxvdDogMSwgZG9jdW1lbnRUeXBlOiAxIH0pO1xuUGFyc2VkRG9jdW1lbnRTY2hlbWEuaW5kZXgoeyBzdGF0dXM6IDEgfSk7XG5cbmNvbnN0IFBhcnNlZERvY3VtZW50OiBNb2RlbDxJUGFyc2VkRG9jdW1lbnQ+ID1cbiAgICBtb25nb29zZS5tb2RlbHMuUGFyc2VkRG9jdW1lbnQgfHwgbW9uZ29vc2UubW9kZWw8SVBhcnNlZERvY3VtZW50PignUGFyc2VkRG9jdW1lbnQnLCBQYXJzZWREb2N1bWVudFNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBhcnNlZERvY3VtZW50O1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiUGFyc2VkRG9jdW1lbnRTY2hlbWEiLCJmaWxlbmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsImRvY3VtZW50VHlwZSIsImVudW0iLCJmaWxlVHlwZSIsInVwbG9hZGVkQXQiLCJEYXRlIiwiZGVmYXVsdCIsIm5vdyIsInBhcnNlZEF0Iiwic3RhdHVzIiwicmF3T3V0cHV0IiwiVHlwZXMiLCJNaXhlZCIsImVudHJpZXMiLCJzdW1tYXJ5IiwidG90YWxFbnRyaWVzIiwiTnVtYmVyIiwidG90YWxIb3VycyIsImRhdGVSYW5nZSIsImZyb20iLCJ0byIsImFpcmNyYWZ0IiwiT2JqZWN0SWQiLCJyZWYiLCJwaWxvdCIsImVycm9yIiwiZmlsZUJhc2U2NCIsInRpbWVzdGFtcHMiLCJpbmRleCIsIlBhcnNlZERvY3VtZW50IiwibW9kZWxzIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/models/ParsedDocument.ts\n");

/***/ }),

/***/ "(rsc)/./lib/models/Pilot.ts":
/*!*****************************!*\
  !*** ./lib/models/Pilot.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst CertificateSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    type: {\n        type: String,\n        enum: [\n            \"Student\",\n            \"PPL\",\n            \"CPL\",\n            \"ATP\",\n            \"Sport\"\n        ],\n        required: true\n    },\n    instrumentRated: {\n        type: Boolean,\n        default: false\n    },\n    multiEngineRated: {\n        type: Boolean,\n        default: false\n    }\n});\nconst EndorsementSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    type: {\n        type: String,\n        enum: [\n            \"High Performance\",\n            \"Complex\",\n            \"Tailwheel\",\n            \"High Altitude\"\n        ],\n        required: true\n    },\n    date: {\n        type: Date,\n        required: true\n    },\n    instructor: {\n        type: String,\n        required: true\n    }\n});\nconst ExperienceSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    totalHours: {\n        type: Number,\n        required: true,\n        default: 0\n    },\n    picHours: {\n        type: Number,\n        required: true,\n        default: 0\n    },\n    nightHours: {\n        type: Number,\n        default: 0\n    },\n    ifrHours: {\n        type: Number,\n        default: 0\n    },\n    crossCountryHours: {\n        type: Number,\n        default: 0\n    },\n    last90DaysHours: {\n        type: Number,\n        default: 0\n    },\n    last30DaysHours: {\n        type: Number,\n        default: 0\n    }\n});\nconst FlightEntrySchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    date: {\n        type: String,\n        required: true\n    },\n    aircraftIdent: {\n        type: String,\n        required: true\n    },\n    aircraftType: String,\n    from: {\n        type: String,\n        required: true\n    },\n    to: {\n        type: String,\n        required: true\n    },\n    route: String,\n    totalTime: {\n        type: Number,\n        required: true\n    },\n    pic: Number,\n    sic: Number,\n    solo: Number,\n    dualReceived: Number,\n    dualGiven: Number,\n    crossCountry: Number,\n    night: Number,\n    actualInstrument: Number,\n    simulatedInstrument: Number,\n    sel: Number,\n    mel: Number,\n    landingsDay: Number,\n    landingsNight: Number,\n    landingsTotal: Number,\n    remarks: String\n}, {\n    _id: false\n});\nconst PilotSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    name: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true,\n        lowercase: true,\n        trim: true\n    },\n    certificates: {\n        type: CertificateSchema,\n        required: true\n    },\n    endorsements: [\n        EndorsementSchema\n    ],\n    experience: {\n        type: ExperienceSchema,\n        required: true\n    },\n    flightEntries: {\n        type: [\n            FlightEntrySchema\n        ],\n        default: []\n    },\n    linkedDocuments: [\n        {\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n            ref: \"ParsedDocument\"\n        }\n    ],\n    medicalExpiration: {\n        type: Date,\n        required: true\n    },\n    flightReviewExpiration: {\n        type: Date,\n        required: true\n    },\n    safetyAnalysis: {\n        lastAnalyzed: {\n            type: Date\n        },\n        score: {\n            type: Number\n        },\n        findings: [\n            {\n                category: {\n                    type: String\n                },\n                riskLevel: {\n                    type: String,\n                    enum: [\n                        \"low\",\n                        \"medium\",\n                        \"high\"\n                    ]\n                },\n                message: {\n                    type: String\n                }\n            }\n        ]\n    }\n}, {\n    timestamps: true\n});\nconst Pilot = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Pilot || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Pilot\", PilotSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Pilot);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUFBVTtJQUNaO0lBQ0F3RCx3QkFBd0I7UUFDdEIzRCxNQUFNVTtRQUNOUCxVQUFVO0lBQ1o7SUFDQXlELGdCQUFnQjtRQUNkQyxjQUFjO1lBQUU3RCxNQUFNVTtRQUFLO1FBQzNCb0QsT0FBTztZQUFFOUQsTUFBTWM7UUFBTztRQUN0QmlELFVBQVU7WUFBQztnQkFDVEMsVUFBVTtvQkFBRWhFLE1BQU1DO2dCQUFPO2dCQUN6QmdFLFdBQVc7b0JBQUVqRSxNQUFNQztvQkFBUUMsTUFBTTt3QkFBQzt3QkFBTzt3QkFBVTtxQkFBTztnQkFBQztnQkFDM0RnRSxTQUFTO29CQUFFbEUsTUFBTUM7Z0JBQU87WUFDMUI7U0FBRTtJQUNKO0FBQ0YsR0FDQTtJQUNFa0UsWUFBWTtBQUNkO0FBR0YsTUFBTUMsUUFBdUJ2RSx3REFBZSxDQUFDdUUsS0FBSyxJQUFJdkUscURBQWMsQ0FBUyxTQUFTK0M7QUFFdEYsaUVBQWV3QixLQUFLQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXZpYXRpb24taW50ZWxsaWdlbmNlLWJyYWluLy4vbGliL21vZGVscy9QaWxvdC50cz80MThjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEsIE1vZGVsIH0gZnJvbSAnbW9uZ29vc2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElDZXJ0aWZpY2F0ZSB7XG4gIHR5cGU6ICdTdHVkZW50JyB8ICdQUEwnIHwgJ0NQTCcgfCAnQVRQJyB8ICdTcG9ydCc7XG4gIGluc3RydW1lbnRSYXRlZDogYm9vbGVhbjtcbiAgbXVsdGlFbmdpbmVSYXRlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRW5kb3JzZW1lbnQge1xuICB0eXBlOiAnSGlnaCBQZXJmb3JtYW5jZScgfCAnQ29tcGxleCcgfCAnVGFpbHdoZWVsJyB8ICdIaWdoIEFsdGl0dWRlJztcbiAgZGF0ZTogRGF0ZTtcbiAgaW5zdHJ1Y3Rvcjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElFeHBlcmllbmNlIHtcbiAgdG90YWxIb3VyczogbnVtYmVyO1xuICBwaWNIb3VyczogbnVtYmVyO1xuICBuaWdodEhvdXJzOiBudW1iZXI7XG4gIGlmckhvdXJzOiBudW1iZXI7XG4gIGNyb3NzQ291bnRyeUhvdXJzOiBudW1iZXI7XG4gIGxhc3Q5MERheXNIb3VyczogbnVtYmVyO1xuICBsYXN0MzBEYXlzSG91cnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRmxpZ2h0RW50cnkge1xuICBkYXRlOiBzdHJpbmc7XG4gIGFpcmNyYWZ0SWRlbnQ6IHN0cmluZztcbiAgYWlyY3JhZnRUeXBlPzogc3RyaW5nO1xuICBmcm9tOiBzdHJpbmc7XG4gIHRvOiBzdHJpbmc7XG4gIHJvdXRlPzogc3RyaW5nO1xuICB0b3RhbFRpbWU6IG51bWJlcjtcbiAgcGljPzogbnVtYmVyO1xuICBzaWM/OiBudW1iZXI7XG4gIHNvbG8/OiBudW1iZXI7XG4gIGR1YWxSZWNlaXZlZD86IG51bWJlcjtcbiAgZHVhbEdpdmVuPzogbnVtYmVyO1xuICBjcm9zc0NvdW50cnk/OiBudW1iZXI7XG4gIG5pZ2h0PzogbnVtYmVyO1xuICBhY3R1YWxJbnN0cnVtZW50PzogbnVtYmVyO1xuICBzaW11bGF0ZWRJbnN0cnVtZW50PzogbnVtYmVyO1xuICBzZWw/OiBudW1iZXI7XG4gIG1lbD86IG51bWJlcjtcbiAgbGFuZGluZ3NEYXk/OiBudW1iZXI7XG4gIGxhbmRpbmdzTmlnaHQ/OiBudW1iZXI7XG4gIGxhbmRpbmdzVG90YWw/OiBudW1iZXI7XG4gIHJlbWFya3M/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVBpbG90IHtcbiAgX2lkOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZDtcbiAgbmFtZTogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICBjZXJ0aWZpY2F0ZXM6IElDZXJ0aWZpY2F0ZTtcbiAgZW5kb3JzZW1lbnRzOiBJRW5kb3JzZW1lbnRbXTtcbiAgZXhwZXJpZW5jZTogSUV4cGVyaWVuY2U7XG4gIGZsaWdodEVudHJpZXM6IElGbGlnaHRFbnRyeVtdO1xuICBsaW5rZWREb2N1bWVudHM6IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkW107XG4gIG1lZGljYWxFeHBpcmF0aW9uOiBEYXRlO1xuICBmbGlnaHRSZXZpZXdFeHBpcmF0aW9uOiBEYXRlO1xuICBzYWZldHlBbmFseXNpcz86IHtcbiAgICBsYXN0QW5hbHl6ZWQ6IERhdGU7XG4gICAgc2NvcmU6IG51bWJlcjtcbiAgICBmaW5kaW5nczoge1xuICAgICAgY2F0ZWdvcnk6IHN0cmluZztcbiAgICAgIHJpc2tMZXZlbDogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJztcbiAgICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICB9W107XG4gIH07XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xufVxuXG5jb25zdCBDZXJ0aWZpY2F0ZVNjaGVtYSA9IG5ldyBTY2hlbWE8SUNlcnRpZmljYXRlPih7XG4gIHR5cGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWydTdHVkZW50JywgJ1BQTCcsICdDUEwnLCAnQVRQJywgJ1Nwb3J0J10sXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIGluc3RydW1lbnRSYXRlZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICBtdWx0aUVuZ2luZVJhdGVkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG59KTtcblxuY29uc3QgRW5kb3JzZW1lbnRTY2hlbWEgPSBuZXcgU2NoZW1hPElFbmRvcnNlbWVudD4oe1xuICB0eXBlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGVudW06IFsnSGlnaCBQZXJmb3JtYW5jZScsICdDb21wbGV4JywgJ1RhaWx3aGVlbCcsICdIaWdoIEFsdGl0dWRlJ10sXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIGRhdGU6IHsgdHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgaW5zdHJ1Y3RvcjogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG59KTtcblxuY29uc3QgRXhwZXJpZW5jZVNjaGVtYSA9IG5ldyBTY2hlbWE8SUV4cGVyaWVuY2U+KHtcbiAgdG90YWxIb3VyczogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiAwIH0sXG4gIHBpY0hvdXJzOiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IDAgfSxcbiAgbmlnaHRIb3VyczogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgaWZySG91cnM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIGNyb3NzQ291bnRyeUhvdXJzOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICBsYXN0OTBEYXlzSG91cnM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIGxhc3QzMERheXNIb3VyczogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbn0pO1xuXG5jb25zdCBGbGlnaHRFbnRyeVNjaGVtYSA9IG5ldyBTY2hlbWE8SUZsaWdodEVudHJ5Pih7XG4gIGRhdGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBhaXJjcmFmdElkZW50OiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgYWlyY3JhZnRUeXBlOiBTdHJpbmcsXG4gIGZyb206IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICB0bzogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHJvdXRlOiBTdHJpbmcsXG4gIHRvdGFsVGltZTogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHBpYzogTnVtYmVyLFxuICBzaWM6IE51bWJlcixcbiAgc29sbzogTnVtYmVyLFxuICBkdWFsUmVjZWl2ZWQ6IE51bWJlcixcbiAgZHVhbEdpdmVuOiBOdW1iZXIsXG4gIGNyb3NzQ291bnRyeTogTnVtYmVyLFxuICBuaWdodDogTnVtYmVyLFxuICBhY3R1YWxJbnN0cnVtZW50OiBOdW1iZXIsXG4gIHNpbXVsYXRlZEluc3RydW1lbnQ6IE51bWJlcixcbiAgc2VsOiBOdW1iZXIsXG4gIG1lbDogTnVtYmVyLFxuICBsYW5kaW5nc0RheTogTnVtYmVyLFxuICBsYW5kaW5nc05pZ2h0OiBOdW1iZXIsXG4gIGxhbmRpbmdzVG90YWw6IE51bWJlcixcbiAgcmVtYXJrczogU3RyaW5nLFxufSwgeyBfaWQ6IGZhbHNlIH0pO1xuXG5jb25zdCBQaWxvdFNjaGVtYSA9IG5ldyBTY2hlbWE8SVBpbG90PihcbiAge1xuICAgIG5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICB9LFxuICAgIGVtYWlsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgIGxvd2VyY2FzZTogdHJ1ZSxcbiAgICAgIHRyaW06IHRydWUsXG4gICAgfSxcbiAgICBjZXJ0aWZpY2F0ZXM6IHtcbiAgICAgIHR5cGU6IENlcnRpZmljYXRlU2NoZW1hLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICBlbmRvcnNlbWVudHM6IFtFbmRvcnNlbWVudFNjaGVtYV0sXG4gICAgZXhwZXJpZW5jZToge1xuICAgICAgdHlwZTogRXhwZXJpZW5jZVNjaGVtYSxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAgZmxpZ2h0RW50cmllczoge1xuICAgICAgdHlwZTogW0ZsaWdodEVudHJ5U2NoZW1hXSxcbiAgICAgIGRlZmF1bHQ6IFtdLFxuICAgIH0sXG4gICAgbGlua2VkRG9jdW1lbnRzOiBbe1xuICAgICAgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuICAgICAgcmVmOiAnUGFyc2VkRG9jdW1lbnQnLFxuICAgIH1dLFxuICAgIG1lZGljYWxFeHBpcmF0aW9uOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICBmbGlnaHRSZXZpZXdFeHBpcmF0aW9uOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICBzYWZldHlBbmFseXNpczoge1xuICAgICAgbGFzdEFuYWx5emVkOiB7IHR5cGU6IERhdGUgfSxcbiAgICAgIHNjb3JlOiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgZmluZGluZ3M6IFt7XG4gICAgICAgIGNhdGVnb3J5OiB7IHR5cGU6IFN0cmluZyB9LFxuICAgICAgICByaXNrTGV2ZWw6IHsgdHlwZTogU3RyaW5nLCBlbnVtOiBbJ2xvdycsICdtZWRpdW0nLCAnaGlnaCddIH0sXG4gICAgICAgIG1lc3NhZ2U6IHsgdHlwZTogU3RyaW5nIH1cbiAgICAgIH1dXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gIH1cbik7XG5cbmNvbnN0IFBpbG90OiBNb2RlbDxJUGlsb3Q+ID0gbW9uZ29vc2UubW9kZWxzLlBpbG90IHx8IG1vbmdvb3NlLm1vZGVsPElQaWxvdD4oJ1BpbG90JywgUGlsb3RTY2hlbWEpO1xuXG5leHBvcnQgZGVmYXVsdCBQaWxvdDtcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNjaGVtYSIsIkNlcnRpZmljYXRlU2NoZW1hIiwidHlwZSIsIlN0cmluZyIsImVudW0iLCJyZXF1aXJlZCIsImluc3RydW1lbnRSYXRlZCIsIkJvb2xlYW4iLCJkZWZhdWx0IiwibXVsdGlFbmdpbmVSYXRlZCIsIkVuZG9yc2VtZW50U2NoZW1hIiwiZGF0ZSIsIkRhdGUiLCJpbnN0cnVjdG9yIiwiRXhwZXJpZW5jZVNjaGVtYSIsInRvdGFsSG91cnMiLCJOdW1iZXIiLCJwaWNIb3VycyIsIm5pZ2h0SG91cnMiLCJpZnJIb3VycyIsImNyb3NzQ291bnRyeUhvdXJzIiwibGFzdDkwRGF5c0hvdXJzIiwibGFzdDMwRGF5c0hvdXJzIiwiRmxpZ2h0RW50cnlTY2hlbWEiLCJhaXJjcmFmdElkZW50IiwiYWlyY3JhZnRUeXBlIiwiZnJvbSIsInRvIiwicm91dGUiLCJ0b3RhbFRpbWUiLCJwaWMiLCJzaWMiLCJzb2xvIiwiZHVhbFJlY2VpdmVkIiwiZHVhbEdpdmVuIiwiY3Jvc3NDb3VudHJ5IiwibmlnaHQiLCJhY3R1YWxJbnN0cnVtZW50Iiwic2ltdWxhdGVkSW5zdHJ1bWVudCIsInNlbCIsIm1lbCIsImxhbmRpbmdzRGF5IiwibGFuZGluZ3NOaWdodCIsImxhbmRpbmdzVG90YWwiLCJyZW1hcmtzIiwiX2lkIiwiUGlsb3RTY2hlbWEiLCJuYW1lIiwidHJpbSIsImVtYWlsIiwidW5pcXVlIiwibG93ZXJjYXNlIiwiY2VydGlmaWNhdGVzIiwiZW5kb3JzZW1lbnRzIiwiZXhwZXJpZW5jZSIsImZsaWdodEVudHJpZXMiLCJsaW5rZWREb2N1bWVudHMiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwibWVkaWNhbEV4cGlyYXRpb24iLCJmbGlnaHRSZXZpZXdFeHBpcmF0aW9uIiwic2FmZXR5QW5hbHlzaXMiLCJsYXN0QW5hbHl6ZWQiLCJzY29yZSIsImZpbmRpbmdzIiwiY2F0ZWdvcnkiLCJyaXNrTGV2ZWwiLCJtZXNzYWdlIiwidGltZXN0YW1wcyIsIlBpbG90IiwibW9kZWxzIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/models/Pilot.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/reductoService.ts":
/*!****************************************!*\
  !*** ./lib/services/reductoService.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   aggregateLogbookHours: () => (/* binding */ aggregateLogbookHours),\n/* harmony export */   parseDocument: () => (/* binding */ parseDocument),\n/* harmony export */   parsePOHFromUrl: () => (/* binding */ parsePOHFromUrl)\n/* harmony export */ });\n/* harmony import */ var reductoai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! reductoai */ \"(rsc)/./node_modules/reductoai/index.mjs\");\n/* harmony import */ var reductoai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! reductoai */ \"(rsc)/./node_modules/reductoai/uploads.mjs\");\n// Reducto Document Intelligence Service\n// For parsing handwritten pilot logbooks and maintenance PDFs\n\nasync function parseDocument(fileBase64, fileType, documentType) {\n    const apiKey = process.env.REDUCTO_API_KEY;\n    if (!apiKey) {\n        console.warn(\"Reducto API key not configured\");\n        return {\n            success: false,\n            error: \"Reducto API key not configured\"\n        };\n    }\n    try {\n        const client = new reductoai__WEBPACK_IMPORTED_MODULE_0__.Reducto({\n            apiKey\n        });\n        // 1. Upload File using helper\n        const fileBuffer = Buffer.from(fileBase64, \"base64\");\n        const upload = await client.upload({\n            file: await (0,reductoai__WEBPACK_IMPORTED_MODULE_1__.toFile)(fileBuffer, fileType === \"image\" ? \"document.png\" : \"document.pdf\"),\n            extension: fileType === \"image\" ? \"png\" : \"pdf\"\n        });\n        // 2. Prepare Prompt\n        const prompt = documentType === \"logbook\" ? LOGBOOK_EXTRACTION_PROMPT : MAINTENANCE_EXTRACTION_PROMPT;\n        // 3. Extract Structured Data\n        const extraction = await client.extract.run({\n            input: upload,\n            instructions: {\n                system_prompt: prompt\n            },\n            settings: {\n                optimize_for_latency: true\n            }\n        });\n        // 4. Adapt to internal format\n        if (\"job_id\" in extraction && !(\"result\" in extraction)) {\n            // Handle async response if it happens (though we didn't request async)\n            return {\n                success: false,\n                error: \"Received async job id but expected sync result\"\n            };\n        }\n        const items = extraction.result || [];\n        let extractedData = {};\n        if (documentType === \"logbook\") {\n            extractedData = {\n                entries: items\n            };\n        } else {\n            extractedData = {\n                entries: items\n            };\n        }\n        return {\n            success: true,\n            data: {\n                documentType: documentType,\n                extractedData,\n                confidence: 1.0,\n                rawText: \"\"\n            }\n        };\n    } catch (error) {\n        console.error(\"Reducto service error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\n// Process raw Reducto output into structured data\nfunction processExtractedData(rawResult, documentType) {\n    const extractedText = rawResult.text || rawResult.extracted_text || \"\";\n    const tables = rawResult.tables || [];\n    const structuredData = rawResult.structured_data || {};\n    let extractedData = {};\n    if (documentType === \"logbook\") {\n        extractedData = parseLogbookData(structuredData, tables, extractedText);\n    } else if (documentType === \"maintenance\") {\n        extractedData = parseMaintenanceData(structuredData, tables, extractedText);\n    }\n    return {\n        documentType: documentType,\n        extractedData,\n        confidence: rawResult.confidence || 0.8,\n        rawText: extractedText\n    };\n}\n// Parse pilot logbook entries\nfunction parseLogbookData(structured, tables, rawText) {\n    const entries = [];\n    // If structured data contains entries\n    if (structured.entries) {\n        for (const entry of structured.entries){\n            entries.push({\n                date: entry.date || \"\",\n                aircraft: entry.aircraft || entry.tail_number || \"\",\n                route: entry.route || entry.from_to || \"\",\n                duration: parseFloat(entry.duration || entry.total_time || \"0\"),\n                remarks: entry.remarks || entry.notes || \"\"\n            });\n        }\n    }\n    // Parse from tables if available\n    if (tables.length > 0) {\n        for (const table of tables){\n            const headers = table.headers || [];\n            const rows = table.rows || [];\n            for (const row of rows){\n                const entry = {\n                    date: \"\",\n                    aircraft: \"\",\n                    route: \"\",\n                    duration: 0\n                };\n                headers.forEach((header, idx)=>{\n                    const value = row[idx];\n                    const headerLower = header.toLowerCase();\n                    if (headerLower.includes(\"date\")) entry.date = value;\n                    if (headerLower.includes(\"aircraft\") || headerLower.includes(\"tail\")) entry.aircraft = value;\n                    if (headerLower.includes(\"route\") || headerLower.includes(\"from\")) entry.route = value;\n                    if (headerLower.includes(\"time\") || headerLower.includes(\"duration\")) entry.duration = parseFloat(value) || 0;\n                    if (headerLower.includes(\"remark\")) entry.remarks = value;\n                });\n                if (entry.date || entry.aircraft) {\n                    entries.push(entry);\n                }\n            }\n        }\n    }\n    return {\n        entries\n    };\n}\n// Parse maintenance log entries\nfunction parseMaintenanceData(structured, tables, rawText) {\n    const entries = [];\n    // If structured data contains entries\n    if (structured.entries || structured.maintenance_items) {\n        const items = structured.entries || structured.maintenance_items;\n        for (const entry of items){\n            entries.push({\n                date: entry.date || \"\",\n                description: entry.description || entry.work_performed || \"\",\n                hobbsTime: parseFloat(entry.hobbs || entry.hobbs_time || \"0\") || undefined,\n                tachTime: parseFloat(entry.tach || entry.tach_time || \"0\") || undefined,\n                mechanic: entry.mechanic || entry.technician || \"\",\n                signOff: entry.sign_off || entry.signed || false\n            });\n        }\n    }\n    // Parse annual/inspection data\n    if (structured.annual_date || structured.last_annual) {\n        entries.push({\n            date: structured.annual_date || structured.last_annual,\n            description: \"Annual Inspection\",\n            signOff: true\n        });\n    }\n    return {\n        entries\n    };\n}\n// Extraction prompts for different document types\nconst LOGBOOK_EXTRACTION_PROMPT = `\nYou are an expert at parsing pilot logbook pages. Extract EVERY flight entry from the table.\n\nIMPORTANT: Logbooks have many columns for different hour types. Look for ALL of these:\n\nREQUIRED FIELDS (extract if visible):\n- date: Flight date (YYYY-MM-DD format)\n- aircraftIdent: Tail number (e.g., N12345, N5392R)\n- aircraftType: Make/model (e.g., C172, PA-28, SR22)\n- from: Departure airport (4-letter ICAO preferred, e.g., KJFK)\n- to: Destination airport\n- route: Full route if multi-leg (e.g., \"KJFK-KBOS-KJFK\")\n\nHOUR COLUMNS (extract ALL that are visible, use decimal hours like 1.5):\n- totalTime: Total flight time (SEL, MEL, or total column)\n- sel: Single Engine Land time\n- mel: Multi Engine Land time\n- pic: Pilot In Command time\n- sic: Second In Command time\n- solo: Solo flight time\n- dualReceived: Instruction received time\n- dualGiven: Instruction given (CFI) time\n- crossCountry: Cross-country time (XC)\n- night: Night flying time\n- actualInstrument: Actual IMC time\n- simulatedInstrument: Simulated/hood instrument time\n- flightSim: Simulator/AATD/BATD time\n- groundTrainer: Ground trainer time\n\nLANDINGS (look for day/night columns):\n- landingsDay: Number of day landings\n- landingsNight: Number of night landings\n- landingsFullStop: Full stop landings if separate\n\nREMARKS (critical - capture everything):\n- remarks: ALL text from remarks column including:\n  - Instructor signatures/names\n  - Endorsements given/received\n  - Approach types (ILS, VOR, GPS, LOC)\n  - Number of approaches\n  - Holds\n  - Night currency note\n  - Checkride notes\n  - Any other comments\n\nOUTPUT FORMAT:\nReturn a JSON array where each flight is an object. Include ONLY fields that have values.\nParse EVERY row - do not skip any entries. If handwriting is unclear, make your best guess.\n\nExample:\n[\n  {\n    \"date\": \"2024-01-15\",\n    \"aircraftIdent\": \"N5392R\",\n    \"aircraftType\": \"C172\",\n    \"from\": \"KJFK\",\n    \"to\": \"KBOS\",\n    \"totalTime\": 2.5,\n    \"sel\": 2.5,\n    \"pic\": 2.5,\n    \"crossCountry\": 2.5,\n    \"landingsDay\": 1,\n    \"remarks\": \"XC to Boston. 1 ILS approach RWY 4R. J. Smith - CFI\"\n  },\n  {\n    \"date\": \"2024-01-16\",\n    \"aircraftIdent\": \"N5392R\",\n    \"aircraftType\": \"C172\",\n    \"from\": \"KBOS\",\n    \"to\": \"KJFK\",\n    \"totalTime\": 2.3,\n    \"sel\": 2.3,\n    \"pic\": 2.3,\n    \"night\": 1.5,\n    \"actualInstrument\": 0.5,\n    \"crossCountry\": 2.3,\n    \"landingsNight\": 1,\n    \"remarks\": \"Night XC return. 2 VOR approaches. IMC for 30 min\"\n  }\n]\n`;\nconst MAINTENANCE_EXTRACTION_PROMPT = `\nExtract aircraft maintenance log entries from this document. For each maintenance entry, identify:\n- Date of maintenance\n- Description of work performed\n- Hobbs time (if listed)\n- Tach time (if listed)\n- Mechanic name or signature\n- Sign-off/approval status\n\nAlso extract any inspection dates such as:\n- Annual inspection date\n- 100-hour inspection date\n- Transponder check date\n- Static system check date\n\nReturn structured data with all entries and dates found.\n`;\nconst POH_EXTRACTION_PROMPT = `\nExtract operating limits and specifications from this Pilot Operating Handbook (POH).\nSpecifically extract:\n1. V-Speeds (in Knots):\n   - Vso (Stall speed in landing configuration)\n   - Vs1 (Stall speed in clean configuration)\n   - Vr (Rotation speed)\n   - Vx (Best angle of climb)\n   - Vy (Best rate of climb)\n   - Vfe (Maximum flap extended speed)\n   - Va (Maneuvering speed)\n   - Vno (Max structural cruising speed)\n   - Vne (Never exceed speed)\n\n2. Weights (in lbs):\n   - Max Gross Weight\n   - Standard Empty Weight\n   - Useful Load\n   - Fuel Capacity (Total and Usable in gallons)\n\nReturn as a JSON object with keys: vSpeeds (object with keys above camelCase), weights (object with keys above camelCase).\n`;\n// Parse POH from URL\nasync function parsePOHFromUrl(pohUrl) {\n    try {\n        const apiKey = process.env.REDUCTO_API_KEY;\n        if (!apiKey) {\n            return {\n                success: false,\n                error: \"Reducto API key not configured\"\n            };\n        }\n        // 1. Fetch PDF manually to avoid Reducto download issues\n        const response = await fetch(pohUrl);\n        if (!response.ok) throw new Error(`Failed to fetch POH PDF: ${response.statusText}`);\n        const arrayBuffer = await response.arrayBuffer();\n        const buffer = Buffer.from(arrayBuffer);\n        const client = new reductoai__WEBPACK_IMPORTED_MODULE_0__.Reducto({\n            apiKey\n        });\n        // 2. Upload\n        const upload = await client.upload({\n            file: await (0,reductoai__WEBPACK_IMPORTED_MODULE_1__.toFile)(buffer, \"poh.pdf\"),\n            extension: \"pdf\"\n        });\n        // 3. Extract\n        const extraction = await client.extract.run({\n            input: upload,\n            instructions: {\n                system_prompt: POH_EXTRACTION_PROMPT\n            }\n        });\n        if (\"job_id\" in extraction && !(\"result\" in extraction)) {\n            return {\n                success: false,\n                error: \"Async job ID returned\"\n            };\n        }\n        const res = extraction.result;\n        const data = res && res.length > 0 ? res[0] : {};\n        return {\n            success: true,\n            data: {\n                documentType: \"unknown\",\n                extractedData: data,\n                confidence: 1.0,\n                rawText: \"\"\n            }\n        };\n    } catch (error) {\n        console.error(\"POH parsing error:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\nfunction aggregateLogbookHours(entries) {\n    const now = new Date();\n    const ninetyDaysAgo = new Date(now.getTime() - 90 * 24 * 60 * 60 * 1000);\n    const thirtyDaysAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n    let totalHours = 0;\n    let picHours = 0;\n    let nightHours = 0;\n    let ifrHours = 0;\n    let last90DaysHours = 0;\n    let last30DaysHours = 0;\n    for (const entry of entries){\n        const duration = entry.duration || 0;\n        totalHours += duration;\n        // Simple heuristics since our basic prompt might not capture every column\n        // Assume if it's in the logbook, it contributes to total.\n        // We'll estimate PIC as 100% for now unless defined otherwise (often safe for private logbooks uploaded by owner)\n        // Real parsing would look for specific columns.\n        picHours += duration;\n        // Check remarks for \"Night\" or \"IFR\" keywords if explicit columns missing\n        const remarks = (entry.remarks || \"\").toLowerCase();\n        if (remarks.includes(\"night\")) {\n            nightHours += duration;\n        }\n        if (remarks.includes(\"ifr\") || remarks.includes(\"imc\") || remarks.includes(\"approach\")) {\n            ifrHours += duration;\n        }\n        // Date based calc\n        if (entry.date) {\n            const entryDate = new Date(entry.date);\n            if (!isNaN(entryDate.getTime())) {\n                if (entryDate >= ninetyDaysAgo) last90DaysHours += duration;\n                if (entryDate >= thirtyDaysAgo) last30DaysHours += duration;\n            }\n        }\n    }\n    return {\n        totalHours,\n        picHours,\n        nightHours,\n        ifrHours,\n        last90DaysHours,\n        last30DaysHours\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBR1ksV0FBVztRQUVqRCxJQUFJWixRQUFRYSxRQUFRLENBQUMsVUFBVTtZQUM3QnFDLGNBQWNyRDtRQUNoQjtRQUVBLElBQUlHLFFBQVFhLFFBQVEsQ0FBQyxVQUFVYixRQUFRYSxRQUFRLENBQUMsVUFBVWIsUUFBUWEsUUFBUSxDQUFDLGFBQWE7WUFDdEZzQyxZQUFZdEQ7UUFDZDtRQUVBLGtCQUFrQjtRQUNsQixJQUFJUCxNQUFNRSxJQUFJLEVBQUU7WUFDZCxNQUFNOEQsWUFBWSxJQUFJVixLQUFLdEQsTUFBTUUsSUFBSTtZQUNyQyxJQUFJLENBQUMrRCxNQUFNRCxVQUFVUixPQUFPLEtBQUs7Z0JBQy9CLElBQUlRLGFBQWFULGVBQWVPLG1CQUFtQnZEO2dCQUNuRCxJQUFJeUQsYUFBYVAsZUFBZU0sbUJBQW1CeEQ7WUFDckQ7UUFDRjtJQUNGO0lBRUEsT0FBTztRQUNMbUQ7UUFDQUM7UUFDQUM7UUFDQUM7UUFDQUM7UUFDQUM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXZpYXRpb24taW50ZWxsaWdlbmNlLWJyYWluLy4vbGliL3NlcnZpY2VzL3JlZHVjdG9TZXJ2aWNlLnRzPzdiZWMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUmVkdWN0byBEb2N1bWVudCBJbnRlbGxpZ2VuY2UgU2VydmljZVxuLy8gRm9yIHBhcnNpbmcgaGFuZHdyaXR0ZW4gcGlsb3QgbG9nYm9va3MgYW5kIG1haW50ZW5hbmNlIFBERnNcblxuaW50ZXJmYWNlIFJlZHVjdG9SZXNwb25zZSB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIGRhdGE/OiBQYXJzZWREb2N1bWVudDtcbiAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBQYXJzZWREb2N1bWVudCB7XG4gIGRvY3VtZW50VHlwZTogJ2xvZ2Jvb2snIHwgJ21haW50ZW5hbmNlJyB8ICd1bmtub3duJztcbiAgZXh0cmFjdGVkRGF0YTogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgY29uZmlkZW5jZTogbnVtYmVyO1xuICByYXdUZXh0OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBMb2dib29rRW50cnkge1xuICBkYXRlOiBzdHJpbmc7XG4gIGFpcmNyYWZ0OiBzdHJpbmc7XG4gIHJvdXRlOiBzdHJpbmc7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIHJlbWFya3M/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBNYWludGVuYW5jZUVudHJ5IHtcbiAgZGF0ZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBob2Jic1RpbWU/OiBudW1iZXI7XG4gIHRhY2hUaW1lPzogbnVtYmVyO1xuICBtZWNoYW5pYz86IHN0cmluZztcbiAgc2lnbk9mZj86IGJvb2xlYW47XG59XG5cbmltcG9ydCB7IFJlZHVjdG8sIHRvRmlsZSB9IGZyb20gJ3JlZHVjdG9haSc7XG5pbXBvcnQgeyBFeHRyYWN0UnVuUmVzcG9uc2UgfSBmcm9tICdyZWR1Y3RvYWkvcmVzb3VyY2VzL2V4dHJhY3QnO1xuXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXJzZURvY3VtZW50KFxuICBmaWxlQmFzZTY0OiBzdHJpbmcsXG4gIGZpbGVUeXBlOiAncGRmJyB8ICdpbWFnZScsXG4gIGRvY3VtZW50VHlwZTogJ2xvZ2Jvb2snIHwgJ21haW50ZW5hbmNlJ1xuKTogUHJvbWlzZTxSZWR1Y3RvUmVzcG9uc2U+IHtcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuUkVEVUNUT19BUElfS0VZO1xuXG4gIGlmICghYXBpS2V5KSB7XG4gICAgY29uc29sZS53YXJuKCdSZWR1Y3RvIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ1JlZHVjdG8gQVBJIGtleSBub3QgY29uZmlndXJlZCcsXG4gICAgfTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gbmV3IFJlZHVjdG8oeyBhcGlLZXkgfSk7XG5cbiAgICAvLyAxLiBVcGxvYWQgRmlsZSB1c2luZyBoZWxwZXJcbiAgICBjb25zdCBmaWxlQnVmZmVyID0gQnVmZmVyLmZyb20oZmlsZUJhc2U2NCwgJ2Jhc2U2NCcpO1xuICAgIGNvbnN0IHVwbG9hZCA9IGF3YWl0IGNsaWVudC51cGxvYWQoe1xuICAgICAgZmlsZTogYXdhaXQgdG9GaWxlKGZpbGVCdWZmZXIsIGZpbGVUeXBlID09PSAnaW1hZ2UnID8gJ2RvY3VtZW50LnBuZycgOiAnZG9jdW1lbnQucGRmJyksXG4gICAgICBleHRlbnNpb246IGZpbGVUeXBlID09PSAnaW1hZ2UnID8gJ3BuZycgOiAncGRmJyxcbiAgICB9KTtcblxuICAgIC8vIDIuIFByZXBhcmUgUHJvbXB0XG4gICAgY29uc3QgcHJvbXB0ID0gZG9jdW1lbnRUeXBlID09PSAnbG9nYm9vaydcbiAgICAgID8gTE9HQk9PS19FWFRSQUNUSU9OX1BST01QVFxuICAgICAgOiBNQUlOVEVOQU5DRV9FWFRSQUNUSU9OX1BST01QVDtcblxuICAgIC8vIDMuIEV4dHJhY3QgU3RydWN0dXJlZCBEYXRhXG4gICAgY29uc3QgZXh0cmFjdGlvbiA9IGF3YWl0IGNsaWVudC5leHRyYWN0LnJ1bih7XG4gICAgICBpbnB1dDogdXBsb2FkLFxuICAgICAgaW5zdHJ1Y3Rpb25zOiB7XG4gICAgICAgIHN5c3RlbV9wcm9tcHQ6IHByb21wdCxcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nczoge1xuICAgICAgICBvcHRpbWl6ZV9mb3JfbGF0ZW5jeTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gNC4gQWRhcHQgdG8gaW50ZXJuYWwgZm9ybWF0XG4gICAgaWYgKCdqb2JfaWQnIGluIGV4dHJhY3Rpb24gJiYgISgncmVzdWx0JyBpbiBleHRyYWN0aW9uKSkge1xuICAgICAgLy8gSGFuZGxlIGFzeW5jIHJlc3BvbnNlIGlmIGl0IGhhcHBlbnMgKHRob3VnaCB3ZSBkaWRuJ3QgcmVxdWVzdCBhc3luYylcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1JlY2VpdmVkIGFzeW5jIGpvYiBpZCBidXQgZXhwZWN0ZWQgc3luYyByZXN1bHQnIH07XG4gICAgfVxuXG4gICAgY29uc3QgaXRlbXMgPSAoZXh0cmFjdGlvbiBhcyBhbnkpLnJlc3VsdCB8fCBbXTtcbiAgICBsZXQgZXh0cmFjdGVkRGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gICAgaWYgKGRvY3VtZW50VHlwZSA9PT0gJ2xvZ2Jvb2snKSB7XG4gICAgICBleHRyYWN0ZWREYXRhID0geyBlbnRyaWVzOiBpdGVtcyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBleHRyYWN0ZWREYXRhID0geyBlbnRyaWVzOiBpdGVtcyB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YToge1xuICAgICAgICBkb2N1bWVudFR5cGU6IGRvY3VtZW50VHlwZSxcbiAgICAgICAgZXh0cmFjdGVkRGF0YSxcbiAgICAgICAgY29uZmlkZW5jZTogMS4wLFxuICAgICAgICByYXdUZXh0OiAnJyxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdSZWR1Y3RvIHNlcnZpY2UgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UsXG4gICAgfTtcbiAgfVxufVxuXG4vLyBQcm9jZXNzIHJhdyBSZWR1Y3RvIG91dHB1dCBpbnRvIHN0cnVjdHVyZWQgZGF0YVxuZnVuY3Rpb24gcHJvY2Vzc0V4dHJhY3RlZERhdGEocmF3UmVzdWx0OiBhbnksIGRvY3VtZW50VHlwZTogc3RyaW5nKTogUGFyc2VkRG9jdW1lbnQge1xuICBjb25zdCBleHRyYWN0ZWRUZXh0ID0gcmF3UmVzdWx0LnRleHQgfHwgcmF3UmVzdWx0LmV4dHJhY3RlZF90ZXh0IHx8ICcnO1xuICBjb25zdCB0YWJsZXMgPSByYXdSZXN1bHQudGFibGVzIHx8IFtdO1xuICBjb25zdCBzdHJ1Y3R1cmVkRGF0YSA9IHJhd1Jlc3VsdC5zdHJ1Y3R1cmVkX2RhdGEgfHwge307XG5cbiAgbGV0IGV4dHJhY3RlZERhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICBpZiAoZG9jdW1lbnRUeXBlID09PSAnbG9nYm9vaycpIHtcbiAgICBleHRyYWN0ZWREYXRhID0gcGFyc2VMb2dib29rRGF0YShzdHJ1Y3R1cmVkRGF0YSwgdGFibGVzLCBleHRyYWN0ZWRUZXh0KTtcbiAgfSBlbHNlIGlmIChkb2N1bWVudFR5cGUgPT09ICdtYWludGVuYW5jZScpIHtcbiAgICBleHRyYWN0ZWREYXRhID0gcGFyc2VNYWludGVuYW5jZURhdGEoc3RydWN0dXJlZERhdGEsIHRhYmxlcywgZXh0cmFjdGVkVGV4dCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGRvY3VtZW50VHlwZTogZG9jdW1lbnRUeXBlIGFzICdsb2dib29rJyB8ICdtYWludGVuYW5jZScsXG4gICAgZXh0cmFjdGVkRGF0YSxcbiAgICBjb25maWRlbmNlOiByYXdSZXN1bHQuY29uZmlkZW5jZSB8fCAwLjgsXG4gICAgcmF3VGV4dDogZXh0cmFjdGVkVGV4dCxcbiAgfTtcbn1cblxuLy8gUGFyc2UgcGlsb3QgbG9nYm9vayBlbnRyaWVzXG5mdW5jdGlvbiBwYXJzZUxvZ2Jvb2tEYXRhKFxuICBzdHJ1Y3R1cmVkOiBhbnksXG4gIHRhYmxlczogYW55W10sXG4gIHJhd1RleHQ6IHN0cmluZ1xuKTogeyBlbnRyaWVzOiBMb2dib29rRW50cnlbXSB9IHtcbiAgY29uc3QgZW50cmllczogTG9nYm9va0VudHJ5W10gPSBbXTtcblxuICAvLyBJZiBzdHJ1Y3R1cmVkIGRhdGEgY29udGFpbnMgZW50cmllc1xuICBpZiAoc3RydWN0dXJlZC5lbnRyaWVzKSB7XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBzdHJ1Y3R1cmVkLmVudHJpZXMpIHtcbiAgICAgIGVudHJpZXMucHVzaCh7XG4gICAgICAgIGRhdGU6IGVudHJ5LmRhdGUgfHwgJycsXG4gICAgICAgIGFpcmNyYWZ0OiBlbnRyeS5haXJjcmFmdCB8fCBlbnRyeS50YWlsX251bWJlciB8fCAnJyxcbiAgICAgICAgcm91dGU6IGVudHJ5LnJvdXRlIHx8IGVudHJ5LmZyb21fdG8gfHwgJycsXG4gICAgICAgIGR1cmF0aW9uOiBwYXJzZUZsb2F0KGVudHJ5LmR1cmF0aW9uIHx8IGVudHJ5LnRvdGFsX3RpbWUgfHwgJzAnKSxcbiAgICAgICAgcmVtYXJrczogZW50cnkucmVtYXJrcyB8fCBlbnRyeS5ub3RlcyB8fCAnJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFBhcnNlIGZyb20gdGFibGVzIGlmIGF2YWlsYWJsZVxuICBpZiAodGFibGVzLmxlbmd0aCA+IDApIHtcbiAgICBmb3IgKGNvbnN0IHRhYmxlIG9mIHRhYmxlcykge1xuICAgICAgY29uc3QgaGVhZGVycyA9IHRhYmxlLmhlYWRlcnMgfHwgW107XG4gICAgICBjb25zdCByb3dzID0gdGFibGUucm93cyB8fCBbXTtcblxuICAgICAgZm9yIChjb25zdCByb3cgb2Ygcm93cykge1xuICAgICAgICBjb25zdCBlbnRyeTogTG9nYm9va0VudHJ5ID0ge1xuICAgICAgICAgIGRhdGU6ICcnLFxuICAgICAgICAgIGFpcmNyYWZ0OiAnJyxcbiAgICAgICAgICByb3V0ZTogJycsXG4gICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgIH07XG5cbiAgICAgICAgaGVhZGVycy5mb3JFYWNoKChoZWFkZXI6IHN0cmluZywgaWR4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJvd1tpZHhdO1xuICAgICAgICAgIGNvbnN0IGhlYWRlckxvd2VyID0gaGVhZGVyLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICBpZiAoaGVhZGVyTG93ZXIuaW5jbHVkZXMoJ2RhdGUnKSkgZW50cnkuZGF0ZSA9IHZhbHVlO1xuICAgICAgICAgIGlmIChoZWFkZXJMb3dlci5pbmNsdWRlcygnYWlyY3JhZnQnKSB8fCBoZWFkZXJMb3dlci5pbmNsdWRlcygndGFpbCcpKVxuICAgICAgICAgICAgZW50cnkuYWlyY3JhZnQgPSB2YWx1ZTtcbiAgICAgICAgICBpZiAoaGVhZGVyTG93ZXIuaW5jbHVkZXMoJ3JvdXRlJykgfHwgaGVhZGVyTG93ZXIuaW5jbHVkZXMoJ2Zyb20nKSlcbiAgICAgICAgICAgIGVudHJ5LnJvdXRlID0gdmFsdWU7XG4gICAgICAgICAgaWYgKGhlYWRlckxvd2VyLmluY2x1ZGVzKCd0aW1lJykgfHwgaGVhZGVyTG93ZXIuaW5jbHVkZXMoJ2R1cmF0aW9uJykpXG4gICAgICAgICAgICBlbnRyeS5kdXJhdGlvbiA9IHBhcnNlRmxvYXQodmFsdWUpIHx8IDA7XG4gICAgICAgICAgaWYgKGhlYWRlckxvd2VyLmluY2x1ZGVzKCdyZW1hcmsnKSkgZW50cnkucmVtYXJrcyA9IHZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZW50cnkuZGF0ZSB8fCBlbnRyeS5haXJjcmFmdCkge1xuICAgICAgICAgIGVudHJpZXMucHVzaChlbnRyeSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4geyBlbnRyaWVzIH07XG59XG5cbi8vIFBhcnNlIG1haW50ZW5hbmNlIGxvZyBlbnRyaWVzXG5mdW5jdGlvbiBwYXJzZU1haW50ZW5hbmNlRGF0YShcbiAgc3RydWN0dXJlZDogYW55LFxuICB0YWJsZXM6IGFueVtdLFxuICByYXdUZXh0OiBzdHJpbmdcbik6IHsgZW50cmllczogTWFpbnRlbmFuY2VFbnRyeVtdIH0ge1xuICBjb25zdCBlbnRyaWVzOiBNYWludGVuYW5jZUVudHJ5W10gPSBbXTtcblxuICAvLyBJZiBzdHJ1Y3R1cmVkIGRhdGEgY29udGFpbnMgZW50cmllc1xuICBpZiAoc3RydWN0dXJlZC5lbnRyaWVzIHx8IHN0cnVjdHVyZWQubWFpbnRlbmFuY2VfaXRlbXMpIHtcbiAgICBjb25zdCBpdGVtcyA9IHN0cnVjdHVyZWQuZW50cmllcyB8fCBzdHJ1Y3R1cmVkLm1haW50ZW5hbmNlX2l0ZW1zO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgaXRlbXMpIHtcbiAgICAgIGVudHJpZXMucHVzaCh7XG4gICAgICAgIGRhdGU6IGVudHJ5LmRhdGUgfHwgJycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlbnRyeS5kZXNjcmlwdGlvbiB8fCBlbnRyeS53b3JrX3BlcmZvcm1lZCB8fCAnJyxcbiAgICAgICAgaG9iYnNUaW1lOiBwYXJzZUZsb2F0KGVudHJ5LmhvYmJzIHx8IGVudHJ5LmhvYmJzX3RpbWUgfHwgJzAnKSB8fCB1bmRlZmluZWQsXG4gICAgICAgIHRhY2hUaW1lOiBwYXJzZUZsb2F0KGVudHJ5LnRhY2ggfHwgZW50cnkudGFjaF90aW1lIHx8ICcwJykgfHwgdW5kZWZpbmVkLFxuICAgICAgICBtZWNoYW5pYzogZW50cnkubWVjaGFuaWMgfHwgZW50cnkudGVjaG5pY2lhbiB8fCAnJyxcbiAgICAgICAgc2lnbk9mZjogZW50cnkuc2lnbl9vZmYgfHwgZW50cnkuc2lnbmVkIHx8IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gUGFyc2UgYW5udWFsL2luc3BlY3Rpb24gZGF0YVxuICBpZiAoc3RydWN0dXJlZC5hbm51YWxfZGF0ZSB8fCBzdHJ1Y3R1cmVkLmxhc3RfYW5udWFsKSB7XG4gICAgZW50cmllcy5wdXNoKHtcbiAgICAgIGRhdGU6IHN0cnVjdHVyZWQuYW5udWFsX2RhdGUgfHwgc3RydWN0dXJlZC5sYXN0X2FubnVhbCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQW5udWFsIEluc3BlY3Rpb24nLFxuICAgICAgc2lnbk9mZjogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7IGVudHJpZXMgfTtcbn1cblxuLy8gRXh0cmFjdGlvbiBwcm9tcHRzIGZvciBkaWZmZXJlbnQgZG9jdW1lbnQgdHlwZXNcbmNvbnN0IExPR0JPT0tfRVhUUkFDVElPTl9QUk9NUFQgPSBgXG5Zb3UgYXJlIGFuIGV4cGVydCBhdCBwYXJzaW5nIHBpbG90IGxvZ2Jvb2sgcGFnZXMuIEV4dHJhY3QgRVZFUlkgZmxpZ2h0IGVudHJ5IGZyb20gdGhlIHRhYmxlLlxuXG5JTVBPUlRBTlQ6IExvZ2Jvb2tzIGhhdmUgbWFueSBjb2x1bW5zIGZvciBkaWZmZXJlbnQgaG91ciB0eXBlcy4gTG9vayBmb3IgQUxMIG9mIHRoZXNlOlxuXG5SRVFVSVJFRCBGSUVMRFMgKGV4dHJhY3QgaWYgdmlzaWJsZSk6XG4tIGRhdGU6IEZsaWdodCBkYXRlIChZWVlZLU1NLUREIGZvcm1hdClcbi0gYWlyY3JhZnRJZGVudDogVGFpbCBudW1iZXIgKGUuZy4sIE4xMjM0NSwgTjUzOTJSKVxuLSBhaXJjcmFmdFR5cGU6IE1ha2UvbW9kZWwgKGUuZy4sIEMxNzIsIFBBLTI4LCBTUjIyKVxuLSBmcm9tOiBEZXBhcnR1cmUgYWlycG9ydCAoNC1sZXR0ZXIgSUNBTyBwcmVmZXJyZWQsIGUuZy4sIEtKRkspXG4tIHRvOiBEZXN0aW5hdGlvbiBhaXJwb3J0XG4tIHJvdXRlOiBGdWxsIHJvdXRlIGlmIG11bHRpLWxlZyAoZS5nLiwgXCJLSkZLLUtCT1MtS0pGS1wiKVxuXG5IT1VSIENPTFVNTlMgKGV4dHJhY3QgQUxMIHRoYXQgYXJlIHZpc2libGUsIHVzZSBkZWNpbWFsIGhvdXJzIGxpa2UgMS41KTpcbi0gdG90YWxUaW1lOiBUb3RhbCBmbGlnaHQgdGltZSAoU0VMLCBNRUwsIG9yIHRvdGFsIGNvbHVtbilcbi0gc2VsOiBTaW5nbGUgRW5naW5lIExhbmQgdGltZVxuLSBtZWw6IE11bHRpIEVuZ2luZSBMYW5kIHRpbWVcbi0gcGljOiBQaWxvdCBJbiBDb21tYW5kIHRpbWVcbi0gc2ljOiBTZWNvbmQgSW4gQ29tbWFuZCB0aW1lXG4tIHNvbG86IFNvbG8gZmxpZ2h0IHRpbWVcbi0gZHVhbFJlY2VpdmVkOiBJbnN0cnVjdGlvbiByZWNlaXZlZCB0aW1lXG4tIGR1YWxHaXZlbjogSW5zdHJ1Y3Rpb24gZ2l2ZW4gKENGSSkgdGltZVxuLSBjcm9zc0NvdW50cnk6IENyb3NzLWNvdW50cnkgdGltZSAoWEMpXG4tIG5pZ2h0OiBOaWdodCBmbHlpbmcgdGltZVxuLSBhY3R1YWxJbnN0cnVtZW50OiBBY3R1YWwgSU1DIHRpbWVcbi0gc2ltdWxhdGVkSW5zdHJ1bWVudDogU2ltdWxhdGVkL2hvb2QgaW5zdHJ1bWVudCB0aW1lXG4tIGZsaWdodFNpbTogU2ltdWxhdG9yL0FBVEQvQkFURCB0aW1lXG4tIGdyb3VuZFRyYWluZXI6IEdyb3VuZCB0cmFpbmVyIHRpbWVcblxuTEFORElOR1MgKGxvb2sgZm9yIGRheS9uaWdodCBjb2x1bW5zKTpcbi0gbGFuZGluZ3NEYXk6IE51bWJlciBvZiBkYXkgbGFuZGluZ3Ncbi0gbGFuZGluZ3NOaWdodDogTnVtYmVyIG9mIG5pZ2h0IGxhbmRpbmdzXG4tIGxhbmRpbmdzRnVsbFN0b3A6IEZ1bGwgc3RvcCBsYW5kaW5ncyBpZiBzZXBhcmF0ZVxuXG5SRU1BUktTIChjcml0aWNhbCAtIGNhcHR1cmUgZXZlcnl0aGluZyk6XG4tIHJlbWFya3M6IEFMTCB0ZXh0IGZyb20gcmVtYXJrcyBjb2x1bW4gaW5jbHVkaW5nOlxuICAtIEluc3RydWN0b3Igc2lnbmF0dXJlcy9uYW1lc1xuICAtIEVuZG9yc2VtZW50cyBnaXZlbi9yZWNlaXZlZFxuICAtIEFwcHJvYWNoIHR5cGVzIChJTFMsIFZPUiwgR1BTLCBMT0MpXG4gIC0gTnVtYmVyIG9mIGFwcHJvYWNoZXNcbiAgLSBIb2xkc1xuICAtIE5pZ2h0IGN1cnJlbmN5IG5vdGVcbiAgLSBDaGVja3JpZGUgbm90ZXNcbiAgLSBBbnkgb3RoZXIgY29tbWVudHNcblxuT1VUUFVUIEZPUk1BVDpcblJldHVybiBhIEpTT04gYXJyYXkgd2hlcmUgZWFjaCBmbGlnaHQgaXMgYW4gb2JqZWN0LiBJbmNsdWRlIE9OTFkgZmllbGRzIHRoYXQgaGF2ZSB2YWx1ZXMuXG5QYXJzZSBFVkVSWSByb3cgLSBkbyBub3Qgc2tpcCBhbnkgZW50cmllcy4gSWYgaGFuZHdyaXRpbmcgaXMgdW5jbGVhciwgbWFrZSB5b3VyIGJlc3QgZ3Vlc3MuXG5cbkV4YW1wbGU6XG5bXG4gIHtcbiAgICBcImRhdGVcIjogXCIyMDI0LTAxLTE1XCIsXG4gICAgXCJhaXJjcmFmdElkZW50XCI6IFwiTjUzOTJSXCIsXG4gICAgXCJhaXJjcmFmdFR5cGVcIjogXCJDMTcyXCIsXG4gICAgXCJmcm9tXCI6IFwiS0pGS1wiLFxuICAgIFwidG9cIjogXCJLQk9TXCIsXG4gICAgXCJ0b3RhbFRpbWVcIjogMi41LFxuICAgIFwic2VsXCI6IDIuNSxcbiAgICBcInBpY1wiOiAyLjUsXG4gICAgXCJjcm9zc0NvdW50cnlcIjogMi41LFxuICAgIFwibGFuZGluZ3NEYXlcIjogMSxcbiAgICBcInJlbWFya3NcIjogXCJYQyB0byBCb3N0b24uIDEgSUxTIGFwcHJvYWNoIFJXWSA0Ui4gSi4gU21pdGggLSBDRklcIlxuICB9LFxuICB7XG4gICAgXCJkYXRlXCI6IFwiMjAyNC0wMS0xNlwiLFxuICAgIFwiYWlyY3JhZnRJZGVudFwiOiBcIk41MzkyUlwiLFxuICAgIFwiYWlyY3JhZnRUeXBlXCI6IFwiQzE3MlwiLFxuICAgIFwiZnJvbVwiOiBcIktCT1NcIixcbiAgICBcInRvXCI6IFwiS0pGS1wiLFxuICAgIFwidG90YWxUaW1lXCI6IDIuMyxcbiAgICBcInNlbFwiOiAyLjMsXG4gICAgXCJwaWNcIjogMi4zLFxuICAgIFwibmlnaHRcIjogMS41LFxuICAgIFwiYWN0dWFsSW5zdHJ1bWVudFwiOiAwLjUsXG4gICAgXCJjcm9zc0NvdW50cnlcIjogMi4zLFxuICAgIFwibGFuZGluZ3NOaWdodFwiOiAxLFxuICAgIFwicmVtYXJrc1wiOiBcIk5pZ2h0IFhDIHJldHVybi4gMiBWT1IgYXBwcm9hY2hlcy4gSU1DIGZvciAzMCBtaW5cIlxuICB9XG5dXG5gO1xuXG5jb25zdCBNQUlOVEVOQU5DRV9FWFRSQUNUSU9OX1BST01QVCA9IGBcbkV4dHJhY3QgYWlyY3JhZnQgbWFpbnRlbmFuY2UgbG9nIGVudHJpZXMgZnJvbSB0aGlzIGRvY3VtZW50LiBGb3IgZWFjaCBtYWludGVuYW5jZSBlbnRyeSwgaWRlbnRpZnk6XG4tIERhdGUgb2YgbWFpbnRlbmFuY2Vcbi0gRGVzY3JpcHRpb24gb2Ygd29yayBwZXJmb3JtZWRcbi0gSG9iYnMgdGltZSAoaWYgbGlzdGVkKVxuLSBUYWNoIHRpbWUgKGlmIGxpc3RlZClcbi0gTWVjaGFuaWMgbmFtZSBvciBzaWduYXR1cmVcbi0gU2lnbi1vZmYvYXBwcm92YWwgc3RhdHVzXG5cbkFsc28gZXh0cmFjdCBhbnkgaW5zcGVjdGlvbiBkYXRlcyBzdWNoIGFzOlxuLSBBbm51YWwgaW5zcGVjdGlvbiBkYXRlXG4tIDEwMC1ob3VyIGluc3BlY3Rpb24gZGF0ZVxuLSBUcmFuc3BvbmRlciBjaGVjayBkYXRlXG4tIFN0YXRpYyBzeXN0ZW0gY2hlY2sgZGF0ZVxuXG5SZXR1cm4gc3RydWN0dXJlZCBkYXRhIHdpdGggYWxsIGVudHJpZXMgYW5kIGRhdGVzIGZvdW5kLlxuYDtcblxuY29uc3QgUE9IX0VYVFJBQ1RJT05fUFJPTVBUID0gYFxuRXh0cmFjdCBvcGVyYXRpbmcgbGltaXRzIGFuZCBzcGVjaWZpY2F0aW9ucyBmcm9tIHRoaXMgUGlsb3QgT3BlcmF0aW5nIEhhbmRib29rIChQT0gpLlxuU3BlY2lmaWNhbGx5IGV4dHJhY3Q6XG4xLiBWLVNwZWVkcyAoaW4gS25vdHMpOlxuICAgLSBWc28gKFN0YWxsIHNwZWVkIGluIGxhbmRpbmcgY29uZmlndXJhdGlvbilcbiAgIC0gVnMxIChTdGFsbCBzcGVlZCBpbiBjbGVhbiBjb25maWd1cmF0aW9uKVxuICAgLSBWciAoUm90YXRpb24gc3BlZWQpXG4gICAtIFZ4IChCZXN0IGFuZ2xlIG9mIGNsaW1iKVxuICAgLSBWeSAoQmVzdCByYXRlIG9mIGNsaW1iKVxuICAgLSBWZmUgKE1heGltdW0gZmxhcCBleHRlbmRlZCBzcGVlZClcbiAgIC0gVmEgKE1hbmV1dmVyaW5nIHNwZWVkKVxuICAgLSBWbm8gKE1heCBzdHJ1Y3R1cmFsIGNydWlzaW5nIHNwZWVkKVxuICAgLSBWbmUgKE5ldmVyIGV4Y2VlZCBzcGVlZClcblxuMi4gV2VpZ2h0cyAoaW4gbGJzKTpcbiAgIC0gTWF4IEdyb3NzIFdlaWdodFxuICAgLSBTdGFuZGFyZCBFbXB0eSBXZWlnaHRcbiAgIC0gVXNlZnVsIExvYWRcbiAgIC0gRnVlbCBDYXBhY2l0eSAoVG90YWwgYW5kIFVzYWJsZSBpbiBnYWxsb25zKVxuXG5SZXR1cm4gYXMgYSBKU09OIG9iamVjdCB3aXRoIGtleXM6IHZTcGVlZHMgKG9iamVjdCB3aXRoIGtleXMgYWJvdmUgY2FtZWxDYXNlKSwgd2VpZ2h0cyAob2JqZWN0IHdpdGgga2V5cyBhYm92ZSBjYW1lbENhc2UpLlxuYDtcblxuLy8gUGFyc2UgUE9IIGZyb20gVVJMXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGFyc2VQT0hGcm9tVXJsKHBvaFVybDogc3RyaW5nKTogUHJvbWlzZTxSZWR1Y3RvUmVzcG9uc2U+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5SRURVQ1RPX0FQSV9LRVk7XG5cbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnUmVkdWN0byBBUEkga2V5IG5vdCBjb25maWd1cmVkJyB9O1xuICAgIH1cblxuICAgIC8vIDEuIEZldGNoIFBERiBtYW51YWxseSB0byBhdm9pZCBSZWR1Y3RvIGRvd25sb2FkIGlzc3Vlc1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocG9oVXJsKTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBQT0ggUERGOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xuICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyKTtcblxuICAgIGNvbnN0IGNsaWVudCA9IG5ldyBSZWR1Y3RvKHsgYXBpS2V5IH0pO1xuXG4gICAgLy8gMi4gVXBsb2FkXG4gICAgY29uc3QgdXBsb2FkID0gYXdhaXQgY2xpZW50LnVwbG9hZCh7XG4gICAgICBmaWxlOiBhd2FpdCB0b0ZpbGUoYnVmZmVyLCAncG9oLnBkZicpLFxuICAgICAgZXh0ZW5zaW9uOiAncGRmJ1xuICAgIH0pO1xuXG4gICAgLy8gMy4gRXh0cmFjdFxuICAgIGNvbnN0IGV4dHJhY3Rpb24gPSBhd2FpdCBjbGllbnQuZXh0cmFjdC5ydW4oe1xuICAgICAgaW5wdXQ6IHVwbG9hZCxcbiAgICAgIGluc3RydWN0aW9uczoge1xuICAgICAgICBzeXN0ZW1fcHJvbXB0OiBQT0hfRVhUUkFDVElPTl9QUk9NUFRcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICgnam9iX2lkJyBpbiBleHRyYWN0aW9uICYmICEoJ3Jlc3VsdCcgaW4gZXh0cmFjdGlvbikpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FzeW5jIGpvYiBJRCByZXR1cm5lZCcgfTtcbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSAoZXh0cmFjdGlvbiBhcyBhbnkpLnJlc3VsdDtcbiAgICBjb25zdCBkYXRhID0gcmVzICYmIHJlcy5sZW5ndGggPiAwID8gcmVzWzBdIDoge307XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZG9jdW1lbnRUeXBlOiAndW5rbm93bicsXG4gICAgICAgIGV4dHJhY3RlZERhdGE6IGRhdGEgYXMgUmVjb3JkPHN0cmluZywgYW55PixcbiAgICAgICAgY29uZmlkZW5jZTogMS4wLFxuICAgICAgICByYXdUZXh0OiAnJyxcbiAgICAgIH1cbiAgICB9O1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUE9IIHBhcnNpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlIH07XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgeyBSZWR1Y3RvUmVzcG9uc2UsIFBhcnNlZERvY3VtZW50IH07XG5cbmV4cG9ydCBmdW5jdGlvbiBhZ2dyZWdhdGVMb2dib29rSG91cnMoZW50cmllczogTG9nYm9va0VudHJ5W10pOiB7XG4gIHRvdGFsSG91cnM6IG51bWJlcjtcbiAgcGljSG91cnM6IG51bWJlcjtcbiAgbmlnaHRIb3VyczogbnVtYmVyO1xuICBpZnJIb3VyczogbnVtYmVyO1xuICBsYXN0OTBEYXlzSG91cnM6IG51bWJlcjtcbiAgbGFzdDMwRGF5c0hvdXJzOiBudW1iZXI7XG59IHtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgbmluZXR5RGF5c0FnbyA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSA5MCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICBjb25zdCB0aGlydHlEYXlzQWdvID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG5cbiAgbGV0IHRvdGFsSG91cnMgPSAwO1xuICBsZXQgcGljSG91cnMgPSAwO1xuICBsZXQgbmlnaHRIb3VycyA9IDA7XG4gIGxldCBpZnJIb3VycyA9IDA7XG4gIGxldCBsYXN0OTBEYXlzSG91cnMgPSAwO1xuICBsZXQgbGFzdDMwRGF5c0hvdXJzID0gMDtcblxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGVudHJ5LmR1cmF0aW9uIHx8IDA7XG4gICAgdG90YWxIb3VycyArPSBkdXJhdGlvbjtcblxuICAgIC8vIFNpbXBsZSBoZXVyaXN0aWNzIHNpbmNlIG91ciBiYXNpYyBwcm9tcHQgbWlnaHQgbm90IGNhcHR1cmUgZXZlcnkgY29sdW1uXG4gICAgLy8gQXNzdW1lIGlmIGl0J3MgaW4gdGhlIGxvZ2Jvb2ssIGl0IGNvbnRyaWJ1dGVzIHRvIHRvdGFsLlxuICAgIC8vIFdlJ2xsIGVzdGltYXRlIFBJQyBhcyAxMDAlIGZvciBub3cgdW5sZXNzIGRlZmluZWQgb3RoZXJ3aXNlIChvZnRlbiBzYWZlIGZvciBwcml2YXRlIGxvZ2Jvb2tzIHVwbG9hZGVkIGJ5IG93bmVyKVxuICAgIC8vIFJlYWwgcGFyc2luZyB3b3VsZCBsb29rIGZvciBzcGVjaWZpYyBjb2x1bW5zLlxuICAgIHBpY0hvdXJzICs9IGR1cmF0aW9uO1xuXG4gICAgLy8gQ2hlY2sgcmVtYXJrcyBmb3IgXCJOaWdodFwiIG9yIFwiSUZSXCIga2V5d29yZHMgaWYgZXhwbGljaXQgY29sdW1ucyBtaXNzaW5nXG4gICAgY29uc3QgcmVtYXJrcyA9IChlbnRyeS5yZW1hcmtzIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKHJlbWFya3MuaW5jbHVkZXMoJ25pZ2h0JykpIHtcbiAgICAgIG5pZ2h0SG91cnMgKz0gZHVyYXRpb247XG4gICAgfVxuXG4gICAgaWYgKHJlbWFya3MuaW5jbHVkZXMoJ2lmcicpIHx8IHJlbWFya3MuaW5jbHVkZXMoJ2ltYycpIHx8IHJlbWFya3MuaW5jbHVkZXMoJ2FwcHJvYWNoJykpIHtcbiAgICAgIGlmckhvdXJzICs9IGR1cmF0aW9uO1xuICAgIH1cblxuICAgIC8vIERhdGUgYmFzZWQgY2FsY1xuICAgIGlmIChlbnRyeS5kYXRlKSB7XG4gICAgICBjb25zdCBlbnRyeURhdGUgPSBuZXcgRGF0ZShlbnRyeS5kYXRlKTtcbiAgICAgIGlmICghaXNOYU4oZW50cnlEYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgICAgaWYgKGVudHJ5RGF0ZSA+PSBuaW5ldHlEYXlzQWdvKSBsYXN0OTBEYXlzSG91cnMgKz0gZHVyYXRpb247XG4gICAgICAgIGlmIChlbnRyeURhdGUgPj0gdGhpcnR5RGF5c0FnbykgbGFzdDMwRGF5c0hvdXJzICs9IGR1cmF0aW9uO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdG90YWxIb3VycyxcbiAgICBwaWNIb3VycyxcbiAgICBuaWdodEhvdXJzLFxuICAgIGlmckhvdXJzLFxuICAgIGxhc3Q5MERheXNIb3VycyxcbiAgICBsYXN0MzBEYXlzSG91cnNcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJSZWR1Y3RvIiwidG9GaWxlIiwicGFyc2VEb2N1bWVudCIsImZpbGVCYXNlNjQiLCJmaWxlVHlwZSIsImRvY3VtZW50VHlwZSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJSRURVQ1RPX0FQSV9LRVkiLCJjb25zb2xlIiwid2FybiIsInN1Y2Nlc3MiLCJlcnJvciIsImNsaWVudCIsImZpbGVCdWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwidXBsb2FkIiwiZmlsZSIsImV4dGVuc2lvbiIsInByb21wdCIsIkxPR0JPT0tfRVhUUkFDVElPTl9QUk9NUFQiLCJNQUlOVEVOQU5DRV9FWFRSQUNUSU9OX1BST01QVCIsImV4dHJhY3Rpb24iLCJleHRyYWN0IiwicnVuIiwiaW5wdXQiLCJpbnN0cnVjdGlvbnMiLCJzeXN0ZW1fcHJvbXB0Iiwic2V0dGluZ3MiLCJvcHRpbWl6ZV9mb3JfbGF0ZW5jeSIsIml0ZW1zIiwicmVzdWx0IiwiZXh0cmFjdGVkRGF0YSIsImVudHJpZXMiLCJkYXRhIiwiY29uZmlkZW5jZSIsInJhd1RleHQiLCJtZXNzYWdlIiwicHJvY2Vzc0V4dHJhY3RlZERhdGEiLCJyYXdSZXN1bHQiLCJleHRyYWN0ZWRUZXh0IiwidGV4dCIsImV4dHJhY3RlZF90ZXh0IiwidGFibGVzIiwic3RydWN0dXJlZERhdGEiLCJzdHJ1Y3R1cmVkX2RhdGEiLCJwYXJzZUxvZ2Jvb2tEYXRhIiwicGFyc2VNYWludGVuYW5jZURhdGEiLCJzdHJ1Y3R1cmVkIiwiZW50cnkiLCJwdXNoIiwiZGF0ZSIsImFpcmNyYWZ0IiwidGFpbF9udW1iZXIiLCJyb3V0ZSIsImZyb21fdG8iLCJkdXJhdGlvbiIsInBhcnNlRmxvYXQiLCJ0b3RhbF90aW1lIiwicmVtYXJrcyIsIm5vdGVzIiwibGVuZ3RoIiwidGFibGUiLCJoZWFkZXJzIiwicm93cyIsInJvdyIsImZvckVhY2giLCJoZWFkZXIiLCJpZHgiLCJ2YWx1ZSIsImhlYWRlckxvd2VyIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsIm1haW50ZW5hbmNlX2l0ZW1zIiwiZGVzY3JpcHRpb24iLCJ3b3JrX3BlcmZvcm1lZCIsImhvYmJzVGltZSIsImhvYmJzIiwiaG9iYnNfdGltZSIsInVuZGVmaW5lZCIsInRhY2hUaW1lIiwidGFjaCIsInRhY2hfdGltZSIsIm1lY2hhbmljIiwidGVjaG5pY2lhbiIsInNpZ25PZmYiLCJzaWduX29mZiIsInNpZ25lZCIsImFubnVhbF9kYXRlIiwibGFzdF9hbm51YWwiLCJQT0hfRVhUUkFDVElPTl9QUk9NUFQiLCJwYXJzZVBPSEZyb21VcmwiLCJwb2hVcmwiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsInJlcyIsImFnZ3JlZ2F0ZUxvZ2Jvb2tIb3VycyIsIm5vdyIsIkRhdGUiLCJuaW5ldHlEYXlzQWdvIiwiZ2V0VGltZSIsInRoaXJ0eURheXNBZ28iLCJ0b3RhbEhvdXJzIiwicGljSG91cnMiLCJuaWdodEhvdXJzIiwiaWZySG91cnMiLCJsYXN0OTBEYXlzSG91cnMiLCJsYXN0MzBEYXlzSG91cnMiLCJlbnRyeURhdGUiLCJpc05hTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/reductoService.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/node-fetch","vendor-chunks/reductoai","vendor-chunks/web-streams-polyfill","vendor-chunks/event-target-shim","vendor-chunks/agentkeepalive","vendor-chunks/form-data-encoder","vendor-chunks/abort-controller","vendor-chunks/ms","vendor-chunks/humanize-ms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fparse-document%2Froute&page=%2Fapi%2Fparse-document%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fparse-document%2Froute.ts&appDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fahmed%2FDocuments%2FGitHub%2FLogHacker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();